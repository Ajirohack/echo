{
  "summary": {
    "totalSuites": 8,
    "successfulSuites": 0,
    "failedSuites": 8,
    "totalDuration": 602028,
    "coverage": null
  },
  "suites": {
    "unit": {
      "name": "unit",
      "description": "Unit Tests",
      "command": "npm run test:unit",
      "startTime": "2025-07-04T23:02:45.464Z",
      "endTime": "2025-07-04T23:03:15.484Z",
      "duration": 30020,
      "exitCode": null,
      "stdout": "\n> universal-translator@1.0.0 test:unit\n> mocha --require tests/test-helper.js 'tests/unit/**/*.test.js' --timeout 10000 --exit\n\n\n\u001b[0m\u001b[0m\n\u001b[0m  Complete Translation Pipeline\u001b[0m\n\u001b[0m    Initialization\u001b[0m\n    \u001b[31m  1) \"before each\" hook for \"should initialize pipeline with default settings\"\u001b[0m\n\n\u001b[0m  Translation Error Handling\u001b[0m\n\u001b[0m    Service failure handling\u001b[0m\nInitializing translation services...\ndeepl translation service initialized: { success: true }\ngpt4o translation service initialized: { success: true }\ngoogle translation service initialized: { success: true }\nazure translation service initialized: { success: true }\n    \u001b[31m  2) \"before each\" hook for \"should handle all services failing\"\u001b[0m\n\n\u001b[0m  PlatformDetector\u001b[0m\n\u001b[0m    constructor\u001b[0m\n    \u001b[32m  ✔\u001b[0m\u001b[90m should initialize with supported apps list\u001b[0m\n    \u001b[31m  3) should set platform property\u001b[0m\n\u001b[0m    detectActiveApp\u001b[0m\n    \u001b[31m  4) should detect Discord on Windows\u001b[0m\n    \u001b[31m  5) should detect Zoom on macOS\u001b[0m\n    \u001b[31m  6) should detect Teams on Linux\u001b[0m\n    \u001b[31m  7) should return null when no supported app is detected\u001b[0m\n    \u001b[31m  8) should handle exec errors gracefully\u001b[0m\n    \u001b[31m  9) should handle unsupported platform\u001b[0m\n\u001b[0m    getAppConfig\u001b[0m\n    \u001b[32m  ✔\u001b[0m\u001b[90m should return Discord configuration\u001b[0m\n    \u001b[32m  ✔\u001b[0m\u001b[90m should return Zoom configuration\u001b[0m\n    \u001b[32m  ✔\u001b[0m\u001b[90m should return null for unsupported app\u001b[0m\n\u001b[0m    configureAudioRouting\u001b[0m\nAudio routing configured for Discord\n    \u001b[32m  ✔\u001b[0m\u001b[90m should configure audio routing for Discord\u001b[0m\nNo specific configuration found for Notepad\n    \u001b[32m  ✔\u001b[0m\u001b[90m should handle unsupported app gracefully\u001b[0m\n    \u001b[32m  ✔\u001b[0m\u001b[90m should handle errors gracefully\u001b[0m\n\u001b[0m    applyAudioRouting\u001b[0m\nmacOS audio routing configuration: { inputDevice: 'test', outputDevice: 'test' }\nNote: Full macOS audio routing requires Core Audio integration\n    \u001b[31m  10) should call Windows routing for win32 platform\u001b[0m\n    \u001b[32m  ✔\u001b[0m\u001b[90m should call macOS routing for darwin platform\u001b[0m\nmacOS audio routing configuration: { inputDevice: 'test', outputDevice: 'test' }\nNote: Full macOS audio routing requires Core Audio integration\n    \u001b[31m  11) should call Linux routing for linux platform\u001b[0m\n\u001b[0m    applyWindowsAudioRouting\u001b[0m\n    \u001b[31m  12) should execute PowerShell commands for Windows audio routing\u001b[0m\n    \u001b[32m  ✔\u001b[0m\u001b[90m should handle Windows routing errors\u001b[0m\n\u001b[0m    applyLinuxAudioRouting\u001b[0m\n    \u001b[31m  13) should execute pactl commands for Linux audio routing\u001b[0m\n    \u001b[32m  ✔\u001b[0m\u001b[90m should handle Linux routing errors\u001b[0m\n\u001b[0m    applyMacAudioRouting\u001b[0m\n    \u001b[32m  ✔\u001b[0m\u001b[90m should log configuration for macOS\u001b[0m\n\n\u001b[0m  Setup Automation Service\u001b[0m\n\u001b[0m    Platform Detection\u001b[0m\n    \u001b[31m  14) should detect macOS correctly\u001b[0m\n    \u001b[31m  15) should detect Windows correctly\u001b[0m\n    \u001b[31m  16) should detect Linux correctly\u001b[0m\n    \u001b[31m  17) should throw error for unsupported platform\u001b[0m\n\u001b[0m    Virtual Audio Installation\u001b[0m\n    \u001b[31m  18) should install VB-Audio Cable on Windows\u001b[0m\n    \u001b[31m  19) should install BlackHole on macOS\u001b[0m\n",
      "stderr": "Translation Manager initialization failed: TypeError: this.languagePairOptimizer.initialize is not a function\n    at TranslationManager.initialize (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/src/services/translation/translation-manager.js:79:46)\n    at async Context.<anonymous> (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/tests/unit/services/error-handling/translation-error-handling.test.js:22:9)\nError configuring audio routing for Discord: Error: Config error\n    at Context.<anonymous> (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/tests/unit/services/platform-detector.test.js:139:61)\n    at callFn (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/mocha/lib/runnable.js:364:21)\n    at Runnable.run (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/mocha/lib/runnable.js:352:5)\n    at Runner.runTest (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/mocha/lib/runner.js:677:10)\n    at /Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/mocha/lib/runner.js:800:12\n    at next (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/mocha/lib/runner.js:592:14)\n    at /Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/mocha/lib/runner.js:602:7\n    at next (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/mocha/lib/runner.js:485:14)\n    at Immediate._onImmediate (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/mocha/lib/runner.js:570:5)\n    at process.processImmediate (node:internal/timers:491:21)\nError applying Windows audio routing: Error: Command failed: powershell -Command \"Set-AudioDevice -ID 'CABLE Input'\"\n/bin/sh: powershell: command not found\n\n    at genericNodeError (node:internal/errors:983:15)\n    at wrappedFn (node:internal/errors:537:14)\n    at ChildProcess.exithandler (node:child_process:414:12)\n    at ChildProcess.emit (node:events:518:28)\n    at maybeClose (node:internal/child_process:1101:16)\n    at Socket.<anonymous> (node:internal/child_process:456:11)\n    at Socket.emit (node:events:518:28)\n    at Pipe.<anonymous> (node:net:351:12) {\n  code: 127,\n  killed: false,\n  signal: null,\n  cmd: `powershell -Command \"Set-AudioDevice -ID 'CABLE Input'\"`,\n  stdout: '',\n  stderr: '/bin/sh: powershell: command not found\\n'\n}\nError applying Windows audio routing: Error: Command failed: powershell -Command \"Set-AudioDevice -ID 'CABLE Input'\"\n/bin/sh: powershell: command not found\n\n    at genericNodeError (node:internal/errors:983:15)\n    at wrappedFn (node:internal/errors:537:14)\n    at ChildProcess.exithandler (node:child_process:414:12)\n    at ChildProcess.emit (node:events:518:28)\n    at maybeClose (node:internal/child_process:1101:16)\n    at Socket.<anonymous> (node:internal/child_process:456:11)\n    at Socket.emit (node:events:518:28)\n    at Pipe.<anonymous> (node:net:351:12) {\n  code: 127,\n  killed: false,\n  signal: null,\n  cmd: `powershell -Command \"Set-AudioDevice -ID 'CABLE Input'\"`,\n  stdout: '',\n  stderr: '/bin/sh: powershell: command not found\\n'\n}\nError applying Linux audio routing: Error: Command failed: pactl set-default-sink \"CABLE Output\"\n/bin/sh: pactl: command not found\n\n    at genericNodeError (node:internal/errors:983:15)\n    at wrappedFn (node:internal/errors:537:14)\n    at ChildProcess.exithandler (node:child_process:414:12)\n    at ChildProcess.emit (node:events:518:28)\n    at maybeClose (node:internal/child_process:1101:16)\n    at Socket.<anonymous> (node:internal/child_process:456:11)\n    at Socket.emit (node:events:518:28)\n    at Pipe.<anonymous> (node:net:351:12) {\n  code: 127,\n  killed: false,\n  signal: null,\n  cmd: 'pactl set-default-sink \"CABLE Output\"',\n  stdout: '',\n  stderr: '/bin/sh: pactl: command not found\\n'\n}\nError applying Linux audio routing: Error: Command failed: pactl set-default-sink \"CABLE Output\"\n/bin/sh: pactl: command not found\n\n    at genericNodeError (node:internal/errors:983:15)\n    at wrappedFn (node:internal/errors:537:14)\n    at ChildProcess.exithandler (node:child_process:414:12)\n    at ChildProcess.emit (node:events:518:28)\n    at maybeClose (node:internal/child_process:1101:16)\n    at Socket.<anonymous> (node:internal/child_process:456:11)\n    at Socket.emit (node:events:518:28)\n    at Pipe.<anonymous> (node:net:351:12) {\n  code: 127,\n  killed: false,\n  signal: null,\n  cmd: 'pactl set-default-sink \"CABLE Output\"',\n  stdout: '',\n  stderr: '/bin/sh: pactl: command not found\\n'\n}\n(node:23797) [DEP0174] DeprecationWarning: Calling promisify on a function that returns a Promise is likely a mistake.\n(Use `node --trace-deprecation ...` to show where the warning was created)\n(node:23797) [DEP0174] DeprecationWarning: Calling promisify on a function that returns a Promise is likely a mistake.\n(node:23797) [DEP0174] DeprecationWarning: Calling promisify on a function that returns a Promise is likely a mistake.\n",
      "success": false,
      "error": "Test suite failed with exit code null"
    },
    "integration": {
      "name": "integration",
      "description": "Integration Tests",
      "command": "npm run test:integration",
      "startTime": "2025-07-04T23:03:15.485Z",
      "endTime": "2025-07-04T23:04:00.500Z",
      "duration": 45015,
      "exitCode": null,
      "stdout": "\n> universal-translator@1.0.0 test:integration\n> mocha --require tests/test-helper.js 'tests/integration/**/*.test.js' --timeout 15000 --exit\n\n\n\u001b[0m\u001b[0m\n\u001b[0m  Complete Pipeline Integration Tests\u001b[0m\n\u001b[0m    End-to-end audio translation pipeline\u001b[0m\nInitializing translation services...\ndeepl translation service initialized: { success: true }\ngpt4o translation service initialized: { success: true }\ngoogle translation service initialized: { success: true }\nazure translation service initialized: { success: true }\n    \u001b[31m  1) should process audio through the complete pipeline\u001b[0m\n    \u001b[31m  2) should handle service failover in the pipeline\u001b[0m\nInitializing translation services...\ndeepl translation service initialized: { success: true }\ngpt4o translation service initialized: { success: true }\ngoogle translation service initialized: { success: true }\nazure translation service initialized: { success: true }\n    \u001b[31m  3) should maintain conversation context across multiple exchanges\u001b[0m\n\n\u001b[0m  Translation Integration Tests\u001b[0m\n\u001b[0m    End-to-end translation workflow\u001b[0m\nInitializing translation services...\ndeepl translation service initialized: { success: true }\ngpt4o translation service initialized: { success: true }\ngoogle translation service initialized: { success: true }\nazure translation service initialized: { success: true }\n    \u001b[31m  4) should complete the full translation pipeline\u001b[0m\nInitializing translation services...\ndeepl translation service initialized: { success: true }\ngpt4o translation service initialized: { success: true }\ngoogle translation service initialized: { success: true }\nazure translation service initialized: { success: true }\n    \u001b[31m  5) should handle service failover correctly\u001b[0m\nInitializing translation services...\ndeepl translation service initialized: { success: true }\ngpt4o translation service initialized: { success: true }\ngoogle translation service initialized: { success: true }\nazure translation service initialized: { success: true }\n    \u001b[31m  6) should maintain conversation context between translations\u001b[0m\nInitializing translation services...\ndeepl translation service initialized: { success: true }\ngpt4o translation service initialized: { success: true }\ngoogle translation service initialized: { success: true }\nazure translation service initialized: { success: true }\n    \u001b[31m  7) should handle different priority settings\u001b[0m\n\n\u001b[0m  Accessibility Tests\u001b[0m\n\u001b[0m    Main Interface\u001b[0m\n    \u001b[31m  8) \"before each\" hook for \"should have no critical accessibility violations\"\u001b[0m\n\u001b[0m    Translation Form\u001b[0m\n    \u001b[31m  9) \"before each\" hook for \"should have accessible form controls\"\u001b[0m\n\u001b[0m    Results Display\u001b[0m\n    \u001b[31m  10) \"before each\" hook for \"should have screen reader accessible results\"\u001b[0m\n\u001b[0m    Responsive Design\u001b[0m\n    \u001b[31m  11) should be accessible on mobile viewport\u001b[0m\n    \u001b[31m  12) should maintain touch target sizes on mobile\u001b[0m\n\n\u001b[0m  Azure Translator API Tests\u001b[0m\n\u001b[0m    Translation API\u001b[0m\n    \u001b[31m  13) should make correct API calls to translate text\u001b[0m\n    \u001b[31m  14) should handle API errors correctly\u001b[0m\n    \u001b[31m  15) should handle network errors gracefully\u001b[0m\n\u001b[0m    Language Detection API\u001b[0m\n    \u001b[31m  16) should detect language correctly\u001b[0m\n\u001b[0m    Supported Languages API\u001b[0m\nAzure Translator supports 3 languages\n    \u001b[32m  ✔\u001b[0m\u001b[90m should retrieve supported languages\u001b[0m\n\u001b[0m    Authentication\u001b[0m\n    \u001b[31m  17) should include correct authentication headers\u001b[0m\n\n\u001b[0m  End-to-End Tests\u001b[0m\n  \u001b[36m  - should be implemented with Playwright\u001b[0m\n\n\u001b[0m  E2E Test Placeholder\u001b[0m\n  \u001b[32m  ✔\u001b[0m\u001b[90m should pass\u001b[0m\n\n\u001b[0m  Translation App E2E Tests\u001b[0m\n  \u001b[36m  - should perform a complete translation flow\u001b[0m\n  \u001b[36m  - should handle errors gracefully\u001b[0m\n\n\u001b[0m  E2E Test Placeholder\u001b[0m\n  \u001b[32m  ✔\u001b[0m\u001b[90m should pass\u001b[0m\n\n\u001b[0m  Example Test Suite\u001b[0m\n  \u001b[32m  ✔\u001b[0m\u001b[90m should pass a simple test\u001b[0m\n  \u001b[32m  ✔\u001b[0m\u001b[90m should demonstrate sinon stub\u001b[0m\n\n\u001b[0m  Translation Performance Tests\u001b[0m\n\u001b[0m    Translation Service Latency\u001b[0m\nInitializing translation services...\ndeepl translation service initialized: { success: true }\ngpt4o translation service initialized: { success: true }\ngoogle translation service initialized: { success: true }\nazure translation service initialized: { success: true }\n    \u001b[31m  18) \"before each\" hook for \"should measure individual service latency\"\u001b[0m\n\n\u001b[0m  Translation Cache Performance\u001b[0m\nInitializing translation services...\ndeepl translation service initialized: { success: true }\ngpt4o translation service initialized: { success: true }\ngoogle translation service initialized: { success: true }\nazure translation service initialized: { success: true }\n  \u001b[31m  19) \"before each\" hook for \"should improve performance with caching\"\u001b[0m\n\n\u001b[0m  API Key Security\u001b[0m\n\u001b[0m    API key storage\u001b[0m\n    \u001b[31m  20) should encrypt API keys before storing\u001b[0m\n    \u001b[31m  21) should store API keys in the correct location\u001b[0m\n    \u001b[31m  22) should not store API keys in plain text\u001b[0m\n\u001b[0m    API key retrieval\u001b[0m\n    \u001b[31m  23) should decrypt API keys when retrieving\u001b[0m\n    \u001b[31m  24) should handle missing API keys gracefully\u001b[0m\n    \u001b[31m  25) should handle decryption errors securely\u001b[0m\n\u001b[0m    API key validation\u001b[0m\n    \u001b[31m  26) should validate API key format\u001b[0m\n    \u001b[31m  27) should detect potentially compromised API keys\u001b[0m\n\u001b[0m    API key rotation\u001b[0m\n    \u001b[31m  28) should support API key rotation\u001b[0m\n    \u001b[32m  ✔\u001b[0m\u001b[90m should not store invalid API keys during rotation\u001b[0m\n\n\u001b[0m  App Security\u001b[0m\n\u001b[0m    Input sanitization\u001b[0m\n    \u001b[31m  29) should sanitize user inputs to prevent injection attacks\u001b[0m\n    \u001b[31m  30) should sanitize file paths to prevent path traversal\u001b[0m\n\u001b[0m    Content Security Policy\u001b[0m\n    \u001b[31m  31) should validate CSP headers\u001b[0m\n\u001b[0m    Secure storage\u001b[0m\n    \u001b[31m  32) should use secure storage for sensitive data\u001b[0m\n\n\u001b[0m  Network Security\u001b[0m\n\u001b[0m    HTTPS verification\u001b[0m\n    \u001b[31m  33) should verify HTTPS certificates by default\u001b[0m\n    \u001b[31m  34) should detect and prevent SSL stripping\u001b[0m\n\u001b[0m    Authentication header handling\u001b[0m\n    \u001b[31m  35) should safely handle authentication headers\u001b[0m\n\n\u001b[0m  Complete Translation Pipeline\u001b[0m\n\u001b[0m    Initialization\u001b[0m\n    \u001b[31m  36) \"before each\" hook for \"should initialize pipeline with default settings\"\u001b[0m\n\n\u001b[0m  Translation Error Handling\u001b[0m\n\u001b[0m    Service failure handling\u001b[0m\nInitializing translation services...\ndeepl translation service initialized: { success: true }\ngpt4o translation service initialized: { success: true }\ngoogle translation service initialized: { success: true }\nazure translation service initialized: { success: true }\n    \u001b[31m  37) \"before each\" hook for \"should handle all services failing\"\u001b[0m\n\n\u001b[0m  PlatformDetector\u001b[0m\n\u001b[0m    constructor\u001b[0m\n    \u001b[32m  ✔\u001b[0m\u001b[90m should initialize with supported apps list\u001b[0m\n    \u001b[31m  38) should set platform property\u001b[0m\n\u001b[0m    detectActiveApp\u001b[0m\n    \u001b[31m  39) should detect Discord on Windows\u001b[0m\n    \u001b[31m  40) should detect Zoom on macOS\u001b[0m\n    \u001b[31m  41) should detect Teams on Linux\u001b[0m\n    \u001b[31m  42) should return null when no supported app is detected\u001b[0m\n    \u001b[31m  43) should handle exec errors gracefully\u001b[0m\n    \u001b[31m  44) should handle unsupported platform\u001b[0m\n\u001b[0m    getAppConfig\u001b[0m\n    \u001b[32m  ✔\u001b[0m\u001b[90m should return Discord configuration\u001b[0m\n    \u001b[32m  ✔\u001b[0m\u001b[90m should return Zoom configuration\u001b[0m\n    \u001b[32m  ✔\u001b[0m\u001b[90m should return null for unsupported app\u001b[0m\n\u001b[0m    configureAudioRouting\u001b[0m\nAudio routing configured for Discord\n    \u001b[32m  ✔\u001b[0m\u001b[90m should configure audio routing for Discord\u001b[0m\nNo specific configuration found for Notepad\n    \u001b[32m  ✔\u001b[0m\u001b[90m should handle unsupported app gracefully\u001b[0m\n    \u001b[32m  ✔\u001b[0m\u001b[90m should handle errors gracefully\u001b[0m\n\u001b[0m    applyAudioRouting\u001b[0m\nmacOS audio routing configuration: { inputDevice: 'test', outputDevice: 'test' }\nNote: Full macOS audio routing requires Core Audio integration\n    \u001b[31m  45) should call Windows routing for win32 platform\u001b[0m\n    \u001b[32m  ✔\u001b[0m\u001b[90m should call macOS routing for darwin platform\u001b[0m\nmacOS audio routing configuration: { inputDevice: 'test', outputDevice: 'test' }\nNote: Full macOS audio routing requires Core Audio integration\n    \u001b[31m  46) should call Linux routing for linux platform\u001b[0m\n\u001b[0m    applyWindowsAudioRouting\u001b[0m\n    \u001b[31m  47) should execute PowerShell commands for Windows audio routing\u001b[0m\n    \u001b[32m  ✔\u001b[0m\u001b[90m should handle Windows routing errors\u001b[0m\n\u001b[0m    applyLinuxAudioRouting\u001b[0m\n    \u001b[31m  48) should execute pactl commands for Linux audio routing\u001b[0m\n    \u001b[32m  ✔\u001b[0m\u001b[90m should handle Linux routing errors\u001b[0m\n\u001b[0m    applyMacAudioRouting\u001b[0m\n    \u001b[32m  ✔\u001b[0m\u001b[90m should log configuration for macOS\u001b[0m\n\n\u001b[0m  Setup Automation Service\u001b[0m\n\u001b[0m    Platform Detection\u001b[0m\n    \u001b[31m  49) should detect macOS correctly\u001b[0m\n    \u001b[31m  50) should detect Windows correctly\u001b[0m\n    \u001b[31m  51) should detect Linux correctly\u001b[0m\n    \u001b[31m  52) should throw error for unsupported platform\u001b[0m\n\u001b[0m    Virtual Audio Installation\u001b[0m\n",
      "stderr": "Translation Manager initialization failed: TypeError: this.languagePairOptimizer.initialize is not a function\n    at TranslationManager.initialize (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/src/services/translation/translation-manager.js:79:46)\n    at async Context.<anonymous> (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/tests/integration/complete-pipeline.test.js:61:13)\nTranslation Manager initialization failed: TypeError: this.languagePairOptimizer.initialize is not a function\n    at TranslationManager.initialize (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/src/services/translation/translation-manager.js:79:46)\n    at async Context.<anonymous> (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/tests/integration/complete-pipeline.test.js:178:13)\nTranslation Manager initialization failed: TypeError: this.languagePairOptimizer.initialize is not a function\n    at TranslationManager.initialize (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/src/services/translation/translation-manager.js:79:46)\n    at async Context.<anonymous> (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/tests/integration/stt-translation.test.js:38:13)\nTranslation Manager initialization failed: TypeError: this.languagePairOptimizer.initialize is not a function\n    at TranslationManager.initialize (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/src/services/translation/translation-manager.js:79:46)\n    at async Context.<anonymous> (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/tests/integration/stt-translation.test.js:98:13)\nTranslation Manager initialization failed: TypeError: this.languagePairOptimizer.initialize is not a function\n    at TranslationManager.initialize (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/src/services/translation/translation-manager.js:79:46)\n    at async Context.<anonymous> (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/tests/integration/stt-translation.test.js:112:13)\nTranslation Manager initialization failed: TypeError: this.languagePairOptimizer.initialize is not a function\n    at TranslationManager.initialize (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/src/services/translation/translation-manager.js:79:46)\n    at async Context.<anonymous> (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/tests/integration/stt-translation.test.js:147:13)\nAzure translation error: The request is not authorized because credentials are missing or invalid.\nAzure Translator initialization failed: Error: Azure Translator connection test failed: Azure Translator error: The request is not authorized because credentials are missing or invalid.\n    at AzureTranslator.testConnection (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/src/services/translation/azure-translator.js:79:19)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async AzureTranslator.initialize (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/src/services/translation/azure-translator.js:51:13)\n    at async Context.<anonymous> (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/tests/api/azure-api.test.js:84:13)\nAzure translation error: Connection refused\nAzure Translator initialization failed: Error: Azure Translator connection test failed: Azure Translator error: Connection refused\n    at AzureTranslator.testConnection (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/src/services/translation/azure-translator.js:79:19)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async AzureTranslator.initialize (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/src/services/translation/azure-translator.js:51:13)\n    at async Context.<anonymous> (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/tests/api/azure-api.test.js:106:13)\nAzure translation error: Nock: No match for request {\n  \"method\": \"POST\",\n  \"url\": \"https://api.cognitive.microsofttranslator.com/translate?api-version=3.0&to=es&category=general&profanityAction=NoAction&includeAlignment=false&includeSentenceLength=false&textType=plain&from=en\",\n  \"headers\": {\n    \"accept\": \"application/json, text/plain, */*\",\n    \"content-type\": \"application/json\",\n    \"ocp-apim-subscription-key\": \"test-api-key\",\n    \"ocp-apim-subscription-region\": \"eastus\",\n    \"x-clienttraceid\": \"eba4c2eb-53ff-4585-b7a2-98cd9ae20c70\",\n    \"user-agent\": \"axios/1.10.0\",\n    \"content-length\": \"18\",\n    \"accept-encoding\": \"gzip, compress, deflate, br\"\n  },\n  \"body\": \"[{\\\"text\\\":\\\"Hello\\\"}]\"\n}\nAzure Translator initialization failed: Error: Azure Translator connection test failed: Azure Translator error: Nock: No match for request {\n  \"method\": \"POST\",\n  \"url\": \"https://api.cognitive.microsofttranslator.com/translate?api-version=3.0&to=es&category=general&profanityAction=NoAction&includeAlignment=false&includeSentenceLength=false&textType=plain&from=en\",\n  \"headers\": {\n    \"accept\": \"application/json, text/plain, */*\",\n    \"content-type\": \"application/json\",\n    \"ocp-apim-subscription-key\": \"test-api-key\",\n    \"ocp-apim-subscription-region\": \"eastus\",\n    \"x-clienttraceid\": \"eba4c2eb-53ff-4585-b7a2-98cd9ae20c70\",\n    \"user-agent\": \"axios/1.10.0\",\n    \"content-length\": \"18\",\n    \"accept-encoding\": \"gzip, compress, deflate, br\"\n  },\n  \"body\": \"[{\\\"text\\\":\\\"Hello\\\"}]\"\n}\n    at AzureTranslator.testConnection (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/src/services/translation/azure-translator.js:79:19)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async AzureTranslator.initialize (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/src/services/translation/azure-translator.js:51:13)\n    at async Context.<anonymous> (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/tests/api/azure-api.test.js:137:13)\nFailed to load Azure Translator languages: AxiosError: Nock: No match for request {\n  \"method\": \"GET\",\n  \"url\": \"https://api.cognitive.microsofttranslator.com/languages?api-version=3.0&scope=translation\",\n  \"headers\": {\n    \"accept\": \"application/json, text/plain, */*\",\n    \"content-type\": \"application/json\",\n    \"user-agent\": \"axios/1.10.0\",\n    \"accept-encoding\": \"gzip, compress, deflate, br\"\n  }\n}\n    at AxiosError.from (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/axios/dist/node/axios.cjs:863:14)\n    at RedirectableRequest.handleRequestError (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/axios/dist/node/axios.cjs:3191:25)\n    at RedirectableRequest.emit (node:events:530:35)\n    at eventHandlers.<computed> (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/follow-redirects/index.js:49:24)\n    at OverriddenClientRequest.emit (node:events:518:28)\n    at Socket.<anonymous> (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/propagate/index.js:64:17)\n    at Socket.emit (node:events:518:28)\n    at /Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/nock/lib/socket.js:101:14\n    at process.processTicksAndRejections (node:internal/process/task_queues:85:11)\n    at Axios.request (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/axios/dist/node/axios.cjs:4280:41)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async AzureTranslator.loadSupportedLanguages (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/src/services/translation/azure-translator.js:90:30)\n    at async AzureTranslator.initialize (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/src/services/translation/azure-translator.js:52:13)\n    at async Context.<anonymous> (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/tests/api/azure-api.test.js:205:13) {\n  statusCode: 404,\n  status: 404,\n  code: 'ERR_NOCK_NO_MATCH',\n  config: {\n    transitional: {\n      silentJSONParsing: true,\n      forcedJSONParsing: true,\n      clarifyTimeoutError: false\n    },\n    adapter: [ 'xhr', 'http', 'fetch' ],\n    transformRequest: [ [Function: transformRequest] ],\n    transformResponse: [ [Function: transformResponse] ],\n    timeout: 10000,\n    xsrfCookieName: 'XSRF-TOKEN',\n    xsrfHeaderName: 'X-XSRF-TOKEN',\n    maxContentLength: -1,\n    maxBodyLength: -1,\n    env: { FormData: [Function [FormData]], Blob: [class Blob] },\n    validateStatus: [Function: validateStatus],\n    headers: Object [AxiosHeaders] {\n      Accept: 'application/json, text/plain, */*',\n      'Content-Type': 'application/json',\n      'User-Agent': 'axios/1.10.0',\n      'Accept-Encoding': 'gzip, compress, deflate, br'\n    },\n    method: 'get',\n    url: 'https://api.cognitive.microsofttranslator.com/languages?api-version=3.0&scope=translation',\n    allowAbsoluteUrls: true,\n    data: undefined\n  },\n  request: <ref *2> Writable {\n    _events: {\n      close: undefined,\n      error: [Function: handleRequestError],\n      prefinish: undefined,\n      finish: undefined,\n      drain: undefined,\n      response: [Function: handleResponse],\n      socket: [Array],\n      timeout: undefined,\n      abort: undefined\n    },\n    _writableState: WritableState {\n      highWaterMark: 65536,\n      length: 0,\n      corked: 0,\n      onwrite: [Function: bound onwrite],\n      writelen: 0,\n      bufferedIndex: 0,\n      pendingcb: 0,\n      [Symbol(kState)]: 17580812,\n      [Symbol(kBufferedValue)]: null\n    },\n    _maxListeners: undefined,\n    _options: {\n      maxRedirects: 21,\n      maxBodyLength: Infinity,\n      protocol: 'https:',\n      path: '/languages?api-version=3.0&scope=translation',\n      method: 'GET',\n      headers: [Object: null prototype],\n      agents: [Object],\n      auth: undefined,\n      family: undefined,\n      beforeRedirect: [Function: dispatchBeforeRedirect],\n      beforeRedirects: [Object],\n      hostname: 'api.cognitive.microsofttranslator.com',\n      port: '',\n      agent: undefined,\n      nativeProtocols: [Object],\n      pathname: '/languages',\n      search: '?api-version=3.0&scope=translation'\n    },\n    _ended: true,\n    _ending: true,\n    _redirectCount: 0,\n    _redirects: [],\n    _requestBodyLength: 0,\n    _requestBodyBuffers: [],\n    _eventsCount: 3,\n    _onNativeResponse: [Function (anonymous)],\n    _currentRequest: <ref *1> OverriddenClientRequest {\n      _events: [Object: null prototype],\n      _eventsCount: 7,\n      _maxListeners: undefined,\n      outputData: [],\n      outputSize: 0,\n      writable: true,\n      destroyed: true,\n      _last: false,\n      chunkedEncoding: false,\n      shouldKeepAlive: true,\n      maxRequestsOnConnectionReached: false,\n      _defaultKeepAlive: true,\n      useChunkedEncodingByDefault: true,\n      sendDate: false,\n      _removedConnection: false,\n      _removedContLen: false,\n      _removedTE: false,\n      strictContentLength: false,\n      _contentLength: null,\n      _hasBody: true,\n      _trailer: '',\n      finished: true,\n      _headerSent: false,\n      _closed: false,\n      _header: null,\n      _keepAliveTimeout: 0,\n      _onPendingData: [Function: nop],\n      path: '/languages?api-version=3.0&scope=translation',\n      method: 'GET',\n      write: [Function (anonymous)],\n      end: [Function (anonymous)],\n      flushHeaders: [Function (anonymous)],\n      req: [Circular *1],\n      options: [Object],\n      interceptors: [],\n      response: [IncomingMessage],\n      requestBodyBuffers: [],\n      playbackStarted: false,\n      readyToStartPlaybackOnSocketEvent: false,\n      _redirectable: [Circular *2],\n      [Symbol(shapeMode)]: false,\n      [Symbol(kCapture)]: false,\n      [Symbol(kBytesWritten)]: 0,\n      [Symbol(kNeedDrain)]: false,\n      [Symbol(corked)]: 0,\n      [Symbol(kChunkedBuffer)]: [],\n      [Symbol(kChunkedLength)]: 0,\n      [Symbol(kSocket)]: [Socket],\n      [Symbol(kOutHeaders)]: [Object: null prototype],\n      [Symbol(errored)]: null,\n      [Symbol(kHighWaterMark)]: 65536,\n      [Symbol(kRejectNonStandardBodyWrites)]: false,\n      [Symbol(kError)]: [Error]\n    },\n    _currentUrl: 'https://api.cognitive.microsofttranslator.com/languages?api-version=3.0&scope=translation',\n    _timeout: null,\n    [Symbol(shapeMode)]: true,\n    [Symbol(kCapture)]: false\n  },\n  cause: Error: Nock: No match for request {\n    \"method\": \"GET\",\n    \"url\": \"https://api.cognitive.microsofttranslator.com/languages?api-version=3.0&scope=translation\",\n    \"headers\": {\n      \"accept\": \"application/json, text/plain, */*\",\n      \"content-type\": \"application/json\",\n      \"user-agent\": \"axios/1.10.0\",\n      \"accept-encoding\": \"gzip, compress, deflate, br\"\n    }\n  }\n      at InterceptedRequestRouter.startPlayback (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/nock/lib/intercepted_request_router.js:346:21)\n      at InterceptedRequestRouter.maybeStartPlayback (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/nock/lib/intercepted_request_router.js:268:12)\n      at InterceptedRequestRouter.connectSocket (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/nock/lib/intercepted_request_router.js:140:12)\n      at /Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/nock/lib/intercepted_request_router.js:78:33\n      at process.processTicksAndRejections (node:internal/process/task_queues:85:11) {\n    code: 'ERR_NOCK_NO_MATCH',\n    status: 404,\n    statusCode: 404\n  }\n}\nAzure translation error: Nock: No match for request {\n  \"method\": \"POST\",\n  \"url\": \"https://api.cognitive.microsofttranslator.com/translate?api-version=3.0&to=es&category=general&profanityAction=NoAction&includeAlignment=false&includeSentenceLength=false&textType=plain&from=en\",\n  \"headers\": {\n    \"accept\": \"application/json, text/plain, */*\",\n    \"content-type\": \"application/json\",\n    \"ocp-apim-subscription-key\": \"test-api-key\",\n    \"ocp-apim-subscription-region\": \"eastus\",\n    \"x-clienttraceid\": \"e56c2ae5-52e4-45a5-83b8-f020d89e06a9\",\n    \"user-agent\": \"axios/1.10.0\",\n    \"content-length\": \"18\",\n    \"accept-encoding\": \"gzip, compress, deflate, br\"\n  },\n  \"body\": \"[{\\\"text\\\":\\\"Hello\\\"}]\"\n}\nAzure Translator translation failed: Error: Azure Translator error: Nock: No match for request {\n  \"method\": \"POST\",\n  \"url\": \"https://api.cognitive.microsofttranslator.com/translate?api-version=3.0&to=es&category=general&profanityAction=NoAction&includeAlignment=false&includeSentenceLength=false&textType=plain&from=en\",\n  \"headers\": {\n    \"accept\": \"application/json, text/plain, */*\",\n    \"content-type\": \"application/json\",\n    \"ocp-apim-subscription-key\": \"test-api-key\",\n    \"ocp-apim-subscription-region\": \"eastus\",\n    \"x-clienttraceid\": \"e56c2ae5-52e4-45a5-83b8-f020d89e06a9\",\n    \"user-agent\": \"axios/1.10.0\",\n    \"content-length\": \"18\",\n    \"accept-encoding\": \"gzip, compress, deflate, br\"\n  },\n  \"body\": \"[{\\\"text\\\":\\\"Hello\\\"}]\"\n}\n    at AzureTranslator.translateText (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/src/services/translation/azure-translator.js:223:19)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async AzureTranslator.translate (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/src/services/translation/azure-translator.js:129:20)\n    at async Context.<anonymous> (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/tests/api/azure-api.test.js:208:13)\nTranslation Manager initialization failed: TypeError: this.languagePairOptimizer.initialize is not a function\n    at TranslationManager.initialize (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/src/services/translation/translation-manager.js:79:46)\n    at async Context.<anonymous> (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/tests/performance/translation-performance.test.js:52:9)\nTranslation Manager initialization failed: TypeError: this.languagePairOptimizer.initialize is not a function\n    at TranslationManager.initialize (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/src/services/translation/translation-manager.js:79:46)\n    at async Context.<anonymous> (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/tests/performance/translation-performance.test.js:331:9)\nFailed to load API keys: \"undefined\" is not valid JSON\nFailed to load API keys: \"undefined\" is not valid JSON\nFailed to load API keys: \"undefined\" is not valid JSON\nFailed to load API keys: \"undefined\" is not valid JSON\nFailed to load API keys: \"undefined\" is not valid JSON\nFailed to load API keys: \"undefined\" is not valid JSON\nFailed to load API keys: \"undefined\" is not valid JSON\nFailed to load API keys: \"undefined\" is not valid JSON\nFailed to load API keys: \"undefined\" is not valid JSON\nFailed to load API keys: \"undefined\" is not valid JSON\nTranslation Manager initialization failed: TypeError: this.languagePairOptimizer.initialize is not a function\n    at TranslationManager.initialize (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/src/services/translation/translation-manager.js:79:46)\n    at async Context.<anonymous> (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/tests/unit/services/error-handling/translation-error-handling.test.js:22:9)\nError configuring audio routing for Discord: Error: Config error\n    at Context.<anonymous> (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/tests/unit/services/platform-detector.test.js:139:61)\n    at callFn (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/mocha/lib/runnable.js:364:21)\n    at Runnable.run (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/mocha/lib/runnable.js:352:5)\n    at Runner.runTest (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/mocha/lib/runner.js:677:10)\n    at /Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/mocha/lib/runner.js:800:12\n    at next (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/mocha/lib/runner.js:592:14)\n    at /Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/mocha/lib/runner.js:602:7\n    at next (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/mocha/lib/runner.js:485:14)\n    at Immediate._onImmediate (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/mocha/lib/runner.js:570:5)\n    at process.processImmediate (node:internal/timers:491:21)\nError applying Windows audio routing: Error: Command failed: powershell -Command \"Set-AudioDevice -ID 'CABLE Input'\"\n/bin/sh: powershell: command not found\n\n    at genericNodeError (node:internal/errors:983:15)\n    at wrappedFn (node:internal/errors:537:14)\n    at ChildProcess.exithandler (node:child_process:414:12)\n    at ChildProcess.emit (node:events:518:28)\n    at maybeClose (node:internal/child_process:1101:16)\n    at Socket.<anonymous> (node:internal/child_process:456:11)\n    at Socket.emit (node:events:518:28)\n    at Pipe.<anonymous> (node:net:351:12) {\n  code: 127,\n  killed: false,\n  signal: null,\n  cmd: `powershell -Command \"Set-AudioDevice -ID 'CABLE Input'\"`,\n  stdout: '',\n  stderr: '/bin/sh: powershell: command not found\\n'\n}\nError applying Windows audio routing: Error: Command failed: powershell -Command \"Set-AudioDevice -ID 'CABLE Input'\"\n/bin/sh: powershell: command not found\n\n    at genericNodeError (node:internal/errors:983:15)\n    at wrappedFn (node:internal/errors:537:14)\n    at ChildProcess.exithandler (node:child_process:414:12)\n    at ChildProcess.emit (node:events:518:28)\n    at maybeClose (node:internal/child_process:1101:16)\n    at Socket.<anonymous> (node:internal/child_process:456:11)\n    at Socket.emit (node:events:518:28)\n    at Pipe.<anonymous> (node:net:351:12) {\n  code: 127,\n  killed: false,\n  signal: null,\n  cmd: `powershell -Command \"Set-AudioDevice -ID 'CABLE Input'\"`,\n  stdout: '',\n  stderr: '/bin/sh: powershell: command not found\\n'\n}\nError applying Linux audio routing: Error: Command failed: pactl set-default-sink \"CABLE Output\"\n/bin/sh: pactl: command not found\n\n    at genericNodeError (node:internal/errors:983:15)\n    at wrappedFn (node:internal/errors:537:14)\n    at ChildProcess.exithandler (node:child_process:414:12)\n    at ChildProcess.emit (node:events:518:28)\n    at maybeClose (node:internal/child_process:1101:16)\n    at Socket.<anonymous> (node:internal/child_process:456:11)\n    at Socket.emit (node:events:518:28)\n    at Pipe.<anonymous> (node:net:351:12) {\n  code: 127,\n  killed: false,\n  signal: null,\n  cmd: 'pactl set-default-sink \"CABLE Output\"',\n  stdout: '',\n  stderr: '/bin/sh: pactl: command not found\\n'\n}\nError applying Linux audio routing: Error: Command failed: pactl set-default-sink \"CABLE Output\"\n/bin/sh: pactl: command not found\n\n    at genericNodeError (node:internal/errors:983:15)\n    at wrappedFn (node:internal/errors:537:14)\n    at ChildProcess.exithandler (node:child_process:414:12)\n    at ChildProcess.emit (node:events:518:28)\n    at maybeClose (node:internal/child_process:1101:16)\n    at Socket.<anonymous> (node:internal/child_process:456:11)\n    at Socket.emit (node:events:518:28)\n    at Pipe.<anonymous> (node:net:351:12) {\n  code: 127,\n  killed: false,\n  signal: null,\n  cmd: 'pactl set-default-sink \"CABLE Output\"',\n  stdout: '',\n  stderr: '/bin/sh: pactl: command not found\\n'\n}\n(node:25178) [DEP0174] DeprecationWarning: Calling promisify on a function that returns a Promise is likely a mistake.\n(Use `node --trace-deprecation ...` to show where the warning was created)\n",
      "success": false,
      "error": "Test suite failed with exit code null"
    },
    "api": {
      "name": "api",
      "description": "API Tests",
      "command": "npm run test:api",
      "startTime": "2025-07-04T23:04:00.501Z",
      "endTime": "2025-07-04T23:05:00.518Z",
      "duration": 60017,
      "exitCode": null,
      "stdout": "\n> universal-translator@1.0.0 test:api\n> mocha --require tests/test-helper.js 'tests/api/**/*.test.js' --timeout 20000 --exit\n\n\n\u001b[0m\u001b[0m\n\u001b[0m  Azure Translator API Tests\u001b[0m\n\u001b[0m    Translation API\u001b[0m\n    \u001b[31m  1) should make correct API calls to translate text\u001b[0m\n    \u001b[31m  2) should handle API errors correctly\u001b[0m\n    \u001b[31m  3) should handle network errors gracefully\u001b[0m\n\u001b[0m    Language Detection API\u001b[0m\n    \u001b[31m  4) should detect language correctly\u001b[0m\n\u001b[0m    Supported Languages API\u001b[0m\nAzure Translator supports 3 languages\n    \u001b[32m  ✔\u001b[0m\u001b[90m should retrieve supported languages\u001b[0m\n\u001b[0m    Authentication\u001b[0m\n    \u001b[31m  5) should include correct authentication headers\u001b[0m\n\n\u001b[0m  Accessibility Tests\u001b[0m\n\u001b[0m    Main Interface\u001b[0m\n    \u001b[31m  6) \"before each\" hook for \"should have no critical accessibility violations\"\u001b[0m\n\u001b[0m    Translation Form\u001b[0m\n    \u001b[31m  7) \"before each\" hook for \"should have accessible form controls\"\u001b[0m\n\u001b[0m    Results Display\u001b[0m\n    \u001b[31m  8) \"before each\" hook for \"should have screen reader accessible results\"\u001b[0m\n\u001b[0m    Responsive Design\u001b[0m\n    \u001b[31m  9) should be accessible on mobile viewport\u001b[0m\n    \u001b[31m  10) should maintain touch target sizes on mobile\u001b[0m\n\n\u001b[0m  End-to-End Tests\u001b[0m\n  \u001b[36m  - should be implemented with Playwright\u001b[0m\n\n\u001b[0m  E2E Test Placeholder\u001b[0m\n  \u001b[32m  ✔\u001b[0m\u001b[90m should pass\u001b[0m\n\n\u001b[0m  Translation App E2E Tests\u001b[0m\n  \u001b[36m  - should perform a complete translation flow\u001b[0m\n  \u001b[36m  - should handle errors gracefully\u001b[0m\n\n\u001b[0m  E2E Test Placeholder\u001b[0m\n  \u001b[32m  ✔\u001b[0m\u001b[90m should pass\u001b[0m\n\n\u001b[0m  Example Test Suite\u001b[0m\n  \u001b[32m  ✔\u001b[0m\u001b[90m should pass a simple test\u001b[0m\n  \u001b[32m  ✔\u001b[0m\u001b[90m should demonstrate sinon stub\u001b[0m\n\n\u001b[0m  Complete Pipeline Integration Tests\u001b[0m\n\u001b[0m    End-to-end audio translation pipeline\u001b[0m\nInitializing translation services...\ndeepl translation service initialized: { success: true }\ngpt4o translation service initialized: { success: true }\ngoogle translation service initialized: { success: true }\nazure translation service initialized: { success: true }\n    \u001b[31m  11) should process audio through the complete pipeline\u001b[0m\n    \u001b[31m  12) should handle service failover in the pipeline\u001b[0m\nInitializing translation services...\ndeepl translation service initialized: { success: true }\ngpt4o translation service initialized: { success: true }\ngoogle translation service initialized: { success: true }\nazure translation service initialized: { success: true }\n    \u001b[31m  13) should maintain conversation context across multiple exchanges\u001b[0m\n\n\u001b[0m  Translation Integration Tests\u001b[0m\n\u001b[0m    End-to-end translation workflow\u001b[0m\nInitializing translation services...\ndeepl translation service initialized: { success: true }\ngpt4o translation service initialized: { success: true }\ngoogle translation service initialized: { success: true }\nazure translation service initialized: { success: true }\n    \u001b[31m  14) should complete the full translation pipeline\u001b[0m\nInitializing translation services...\ndeepl translation service initialized: { success: true }\ngpt4o translation service initialized: { success: true }\ngoogle translation service initialized: { success: true }\nazure translation service initialized: { success: true }\n    \u001b[31m  15) should handle service failover correctly\u001b[0m\nInitializing translation services...\ndeepl translation service initialized: { success: true }\ngpt4o translation service initialized: { success: true }\ngoogle translation service initialized: { success: true }\nazure translation service initialized: { success: true }\n    \u001b[31m  16) should maintain conversation context between translations\u001b[0m\nInitializing translation services...\ndeepl translation service initialized: { success: true }\ngpt4o translation service initialized: { success: true }\ngoogle translation service initialized: { success: true }\nazure translation service initialized: { success: true }\n    \u001b[31m  17) should handle different priority settings\u001b[0m\n\n\u001b[0m  Translation Performance Tests\u001b[0m\n\u001b[0m    Translation Service Latency\u001b[0m\nInitializing translation services...\ndeepl translation service initialized: { success: true }\ngpt4o translation service initialized: { success: true }\ngoogle translation service initialized: { success: true }\nazure translation service initialized: { success: true }\n    \u001b[31m  18) \"before each\" hook for \"should measure individual service latency\"\u001b[0m\n\n\u001b[0m  Translation Cache Performance\u001b[0m\nInitializing translation services...\ndeepl translation service initialized: { success: true }\ngpt4o translation service initialized: { success: true }\ngoogle translation service initialized: { success: true }\nazure translation service initialized: { success: true }\n  \u001b[31m  19) \"before each\" hook for \"should improve performance with caching\"\u001b[0m\n\n\u001b[0m  API Key Security\u001b[0m\n\u001b[0m    API key storage\u001b[0m\n    \u001b[31m  20) should encrypt API keys before storing\u001b[0m\n    \u001b[31m  21) should store API keys in the correct location\u001b[0m\n    \u001b[31m  22) should not store API keys in plain text\u001b[0m\n\u001b[0m    API key retrieval\u001b[0m\n    \u001b[31m  23) should decrypt API keys when retrieving\u001b[0m\n    \u001b[31m  24) should handle missing API keys gracefully\u001b[0m\n    \u001b[31m  25) should handle decryption errors securely\u001b[0m\n\u001b[0m    API key validation\u001b[0m\n    \u001b[31m  26) should validate API key format\u001b[0m\n    \u001b[31m  27) should detect potentially compromised API keys\u001b[0m\n\u001b[0m    API key rotation\u001b[0m\n    \u001b[31m  28) should support API key rotation\u001b[0m\n    \u001b[32m  ✔\u001b[0m\u001b[90m should not store invalid API keys during rotation\u001b[0m\n\n\u001b[0m  App Security\u001b[0m\n\u001b[0m    Input sanitization\u001b[0m\n    \u001b[31m  29) should sanitize user inputs to prevent injection attacks\u001b[0m\n    \u001b[31m  30) should sanitize file paths to prevent path traversal\u001b[0m\n\u001b[0m    Content Security Policy\u001b[0m\n    \u001b[31m  31) should validate CSP headers\u001b[0m\n\u001b[0m    Secure storage\u001b[0m\n    \u001b[31m  32) should use secure storage for sensitive data\u001b[0m\n\n\u001b[0m  Network Security\u001b[0m\n\u001b[0m    HTTPS verification\u001b[0m\n    \u001b[31m  33) should verify HTTPS certificates by default\u001b[0m\n    \u001b[31m  34) should detect and prevent SSL stripping\u001b[0m\n\u001b[0m    Authentication header handling\u001b[0m\n    \u001b[31m  35) should safely handle authentication headers\u001b[0m\n\n\u001b[0m  Complete Translation Pipeline\u001b[0m\n\u001b[0m    Initialization\u001b[0m\n    \u001b[31m  36) \"before each\" hook for \"should initialize pipeline with default settings\"\u001b[0m\n\n\u001b[0m  Translation Error Handling\u001b[0m\n\u001b[0m    Service failure handling\u001b[0m\nInitializing translation services...\ndeepl translation service initialized: { success: true }\ngpt4o translation service initialized: { success: true }\ngoogle translation service initialized: { success: true }\nazure translation service initialized: { success: true }\n    \u001b[31m  37) \"before each\" hook for \"should handle all services failing\"\u001b[0m\n\n\u001b[0m  PlatformDetector\u001b[0m\n\u001b[0m    constructor\u001b[0m\n    \u001b[32m  ✔\u001b[0m\u001b[90m should initialize with supported apps list\u001b[0m\n    \u001b[31m  38) should set platform property\u001b[0m\n\u001b[0m    detectActiveApp\u001b[0m\n    \u001b[31m  39) should detect Discord on Windows\u001b[0m\n    \u001b[31m  40) should detect Zoom on macOS\u001b[0m\n    \u001b[31m  41) should detect Teams on Linux\u001b[0m\n    \u001b[31m  42) should return null when no supported app is detected\u001b[0m\n    \u001b[31m  43) should handle exec errors gracefully\u001b[0m\n    \u001b[31m  44) should handle unsupported platform\u001b[0m\n\u001b[0m    getAppConfig\u001b[0m\n    \u001b[32m  ✔\u001b[0m\u001b[90m should return Discord configuration\u001b[0m\n    \u001b[32m  ✔\u001b[0m\u001b[90m should return Zoom configuration\u001b[0m\n    \u001b[32m  ✔\u001b[0m\u001b[90m should return null for unsupported app\u001b[0m\n\u001b[0m    configureAudioRouting\u001b[0m\nAudio routing configured for Discord\n    \u001b[32m  ✔\u001b[0m\u001b[90m should configure audio routing for Discord\u001b[0m\nNo specific configuration found for Notepad\n    \u001b[32m  ✔\u001b[0m\u001b[90m should handle unsupported app gracefully\u001b[0m\n    \u001b[32m  ✔\u001b[0m\u001b[90m should handle errors gracefully\u001b[0m\n\u001b[0m    applyAudioRouting\u001b[0m\nmacOS audio routing configuration: { inputDevice: 'test', outputDevice: 'test' }\nNote: Full macOS audio routing requires Core Audio integration\n    \u001b[31m  45) should call Windows routing for win32 platform\u001b[0m\n    \u001b[32m  ✔\u001b[0m\u001b[90m should call macOS routing for darwin platform\u001b[0m\nmacOS audio routing configuration: { inputDevice: 'test', outputDevice: 'test' }\nNote: Full macOS audio routing requires Core Audio integration\n    \u001b[31m  46) should call Linux routing for linux platform\u001b[0m\n\u001b[0m    applyWindowsAudioRouting\u001b[0m\n    \u001b[31m  47) should execute PowerShell commands for Windows audio routing\u001b[0m\n    \u001b[32m  ✔\u001b[0m\u001b[90m should handle Windows routing errors\u001b[0m\n\u001b[0m    applyLinuxAudioRouting\u001b[0m\n    \u001b[31m  48) should execute pactl commands for Linux audio routing\u001b[0m\n    \u001b[32m  ✔\u001b[0m\u001b[90m should handle Linux routing errors\u001b[0m\n\u001b[0m    applyMacAudioRouting\u001b[0m\n    \u001b[32m  ✔\u001b[0m\u001b[90m should log configuration for macOS\u001b[0m\n\n\u001b[0m  Setup Automation Service\u001b[0m\n\u001b[0m    Platform Detection\u001b[0m\n    \u001b[31m  49) should detect macOS correctly\u001b[0m\n    \u001b[31m  50) should detect Windows correctly\u001b[0m\n    \u001b[31m  51) should detect Linux correctly\u001b[0m\n    \u001b[31m  52) should throw error for unsupported platform\u001b[0m\n\u001b[0m    Virtual Audio Installation\u001b[0m\n    \u001b[31m  53) should install VB-Audio Cable on Windows\u001b[0m\n",
      "stderr": "Azure translation error: The request is not authorized because credentials are missing or invalid.\nAzure Translator initialization failed: Error: Azure Translator connection test failed: Azure Translator error: The request is not authorized because credentials are missing or invalid.\n    at AzureTranslator.testConnection (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/src/services/translation/azure-translator.js:79:19)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async AzureTranslator.initialize (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/src/services/translation/azure-translator.js:51:13)\n    at async Context.<anonymous> (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/tests/api/azure-api.test.js:84:13)\nAzure translation error: Connection refused\nAzure Translator initialization failed: Error: Azure Translator connection test failed: Azure Translator error: Connection refused\n    at AzureTranslator.testConnection (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/src/services/translation/azure-translator.js:79:19)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async AzureTranslator.initialize (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/src/services/translation/azure-translator.js:51:13)\n    at async Context.<anonymous> (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/tests/api/azure-api.test.js:106:13)\nAzure translation error: Nock: No match for request {\n  \"method\": \"POST\",\n  \"url\": \"https://api.cognitive.microsofttranslator.com/translate?api-version=3.0&to=es&category=general&profanityAction=NoAction&includeAlignment=false&includeSentenceLength=false&textType=plain&from=en\",\n  \"headers\": {\n    \"accept\": \"application/json, text/plain, */*\",\n    \"content-type\": \"application/json\",\n    \"ocp-apim-subscription-key\": \"test-api-key\",\n    \"ocp-apim-subscription-region\": \"eastus\",\n    \"x-clienttraceid\": \"c0ce22b1-2148-48f1-8565-3bbc428f0d6d\",\n    \"user-agent\": \"axios/1.10.0\",\n    \"content-length\": \"18\",\n    \"accept-encoding\": \"gzip, compress, deflate, br\"\n  },\n  \"body\": \"[{\\\"text\\\":\\\"Hello\\\"}]\"\n}\nAzure Translator initialization failed: Error: Azure Translator connection test failed: Azure Translator error: Nock: No match for request {\n  \"method\": \"POST\",\n  \"url\": \"https://api.cognitive.microsofttranslator.com/translate?api-version=3.0&to=es&category=general&profanityAction=NoAction&includeAlignment=false&includeSentenceLength=false&textType=plain&from=en\",\n  \"headers\": {\n    \"accept\": \"application/json, text/plain, */*\",\n    \"content-type\": \"application/json\",\n    \"ocp-apim-subscription-key\": \"test-api-key\",\n    \"ocp-apim-subscription-region\": \"eastus\",\n    \"x-clienttraceid\": \"c0ce22b1-2148-48f1-8565-3bbc428f0d6d\",\n    \"user-agent\": \"axios/1.10.0\",\n    \"content-length\": \"18\",\n    \"accept-encoding\": \"gzip, compress, deflate, br\"\n  },\n  \"body\": \"[{\\\"text\\\":\\\"Hello\\\"}]\"\n}\n    at AzureTranslator.testConnection (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/src/services/translation/azure-translator.js:79:19)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async AzureTranslator.initialize (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/src/services/translation/azure-translator.js:51:13)\n    at async Context.<anonymous> (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/tests/api/azure-api.test.js:137:13)\nFailed to load Azure Translator languages: AxiosError: Nock: No match for request {\n  \"method\": \"GET\",\n  \"url\": \"https://api.cognitive.microsofttranslator.com/languages?api-version=3.0&scope=translation\",\n  \"headers\": {\n    \"accept\": \"application/json, text/plain, */*\",\n    \"content-type\": \"application/json\",\n    \"user-agent\": \"axios/1.10.0\",\n    \"accept-encoding\": \"gzip, compress, deflate, br\"\n  }\n}\n    at AxiosError.from (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/axios/dist/node/axios.cjs:863:14)\n    at RedirectableRequest.handleRequestError (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/axios/dist/node/axios.cjs:3191:25)\n    at RedirectableRequest.emit (node:events:530:35)\n    at eventHandlers.<computed> (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/follow-redirects/index.js:49:24)\n    at OverriddenClientRequest.emit (node:events:518:28)\n    at Socket.<anonymous> (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/propagate/index.js:64:17)\n    at Socket.emit (node:events:518:28)\n    at /Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/nock/lib/socket.js:101:14\n    at process.processTicksAndRejections (node:internal/process/task_queues:85:11)\n    at Axios.request (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/axios/dist/node/axios.cjs:4280:41)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async AzureTranslator.loadSupportedLanguages (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/src/services/translation/azure-translator.js:90:30)\n    at async AzureTranslator.initialize (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/src/services/translation/azure-translator.js:52:13)\n    at async Context.<anonymous> (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/tests/api/azure-api.test.js:205:13) {\n  statusCode: 404,\n  status: 404,\n  code: 'ERR_NOCK_NO_MATCH',\n  config: {\n    transitional: {\n      silentJSONParsing: true,\n      forcedJSONParsing: true,\n      clarifyTimeoutError: false\n    },\n    adapter: [ 'xhr', 'http', 'fetch' ],\n    transformRequest: [ [Function: transformRequest] ],\n    transformResponse: [ [Function: transformResponse] ],\n    timeout: 10000,\n    xsrfCookieName: 'XSRF-TOKEN',\n    xsrfHeaderName: 'X-XSRF-TOKEN',\n    maxContentLength: -1,\n    maxBodyLength: -1,\n    env: { FormData: [Function [FormData]], Blob: [class Blob] },\n    validateStatus: [Function: validateStatus],\n    headers: Object [AxiosHeaders] {\n      Accept: 'application/json, text/plain, */*',\n      'Content-Type': 'application/json',\n      'User-Agent': 'axios/1.10.0',\n      'Accept-Encoding': 'gzip, compress, deflate, br'\n    },\n    method: 'get',\n    url: 'https://api.cognitive.microsofttranslator.com/languages?api-version=3.0&scope=translation',\n    allowAbsoluteUrls: true,\n    data: undefined\n  },\n  request: <ref *2> Writable {\n    _events: {\n      close: undefined,\n      error: [Function: handleRequestError],\n      prefinish: undefined,\n      finish: undefined,\n      drain: undefined,\n      response: [Function: handleResponse],\n      socket: [Array],\n      timeout: undefined,\n      abort: undefined\n    },\n    _writableState: WritableState {\n      highWaterMark: 65536,\n      length: 0,\n      corked: 0,\n      onwrite: [Function: bound onwrite],\n      writelen: 0,\n      bufferedIndex: 0,\n      pendingcb: 0,\n      [Symbol(kState)]: 17580812,\n      [Symbol(kBufferedValue)]: null\n    },\n    _maxListeners: undefined,\n    _options: {\n      maxRedirects: 21,\n      maxBodyLength: Infinity,\n      protocol: 'https:',\n      path: '/languages?api-version=3.0&scope=translation',\n      method: 'GET',\n      headers: [Object: null prototype],\n      agents: [Object],\n      auth: undefined,\n      family: undefined,\n      beforeRedirect: [Function: dispatchBeforeRedirect],\n      beforeRedirects: [Object],\n      hostname: 'api.cognitive.microsofttranslator.com',\n      port: '',\n      agent: undefined,\n      nativeProtocols: [Object],\n      pathname: '/languages',\n      search: '?api-version=3.0&scope=translation'\n    },\n    _ended: true,\n    _ending: true,\n    _redirectCount: 0,\n    _redirects: [],\n    _requestBodyLength: 0,\n    _requestBodyBuffers: [],\n    _eventsCount: 3,\n    _onNativeResponse: [Function (anonymous)],\n    _currentRequest: <ref *1> OverriddenClientRequest {\n      _events: [Object: null prototype],\n      _eventsCount: 7,\n      _maxListeners: undefined,\n      outputData: [],\n      outputSize: 0,\n      writable: true,\n      destroyed: true,\n      _last: false,\n      chunkedEncoding: false,\n      shouldKeepAlive: true,\n      maxRequestsOnConnectionReached: false,\n      _defaultKeepAlive: true,\n      useChunkedEncodingByDefault: true,\n      sendDate: false,\n      _removedConnection: false,\n      _removedContLen: false,\n      _removedTE: false,\n      strictContentLength: false,\n      _contentLength: null,\n      _hasBody: true,\n      _trailer: '',\n      finished: true,\n      _headerSent: false,\n      _closed: false,\n      _header: null,\n      _keepAliveTimeout: 0,\n      _onPendingData: [Function: nop],\n      path: '/languages?api-version=3.0&scope=translation',\n      method: 'GET',\n      write: [Function (anonymous)],\n      end: [Function (anonymous)],\n      flushHeaders: [Function (anonymous)],\n      req: [Circular *1],\n      options: [Object],\n      interceptors: [],\n      response: [IncomingMessage],\n      requestBodyBuffers: [],\n      playbackStarted: false,\n      readyToStartPlaybackOnSocketEvent: false,\n      _redirectable: [Circular *2],\n      [Symbol(shapeMode)]: false,\n      [Symbol(kCapture)]: false,\n      [Symbol(kBytesWritten)]: 0,\n      [Symbol(kNeedDrain)]: false,\n      [Symbol(corked)]: 0,\n      [Symbol(kChunkedBuffer)]: [],\n      [Symbol(kChunkedLength)]: 0,\n      [Symbol(kSocket)]: [Socket],\n      [Symbol(kOutHeaders)]: [Object: null prototype],\n      [Symbol(errored)]: null,\n      [Symbol(kHighWaterMark)]: 65536,\n      [Symbol(kRejectNonStandardBodyWrites)]: false,\n      [Symbol(kError)]: [Error]\n    },\n    _currentUrl: 'https://api.cognitive.microsofttranslator.com/languages?api-version=3.0&scope=translation',\n    _timeout: null,\n    [Symbol(shapeMode)]: true,\n    [Symbol(kCapture)]: false\n  },\n  cause: Error: Nock: No match for request {\n    \"method\": \"GET\",\n    \"url\": \"https://api.cognitive.microsofttranslator.com/languages?api-version=3.0&scope=translation\",\n    \"headers\": {\n      \"accept\": \"application/json, text/plain, */*\",\n      \"content-type\": \"application/json\",\n      \"user-agent\": \"axios/1.10.0\",\n      \"accept-encoding\": \"gzip, compress, deflate, br\"\n    }\n  }\n      at InterceptedRequestRouter.startPlayback (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/nock/lib/intercepted_request_router.js:346:21)\n      at InterceptedRequestRouter.maybeStartPlayback (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/nock/lib/intercepted_request_router.js:268:12)\n      at InterceptedRequestRouter.connectSocket (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/nock/lib/intercepted_request_router.js:140:12)\n      at /Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/nock/lib/intercepted_request_router.js:78:33\n      at process.processTicksAndRejections (node:internal/process/task_queues:85:11) {\n    code: 'ERR_NOCK_NO_MATCH',\n    status: 404,\n    statusCode: 404\n  }\n}\nAzure translation error: Nock: No match for request {\n  \"method\": \"POST\",\n  \"url\": \"https://api.cognitive.microsofttranslator.com/translate?api-version=3.0&to=es&category=general&profanityAction=NoAction&includeAlignment=false&includeSentenceLength=false&textType=plain&from=en\",\n  \"headers\": {\n    \"accept\": \"application/json, text/plain, */*\",\n    \"content-type\": \"application/json\",\n    \"ocp-apim-subscription-key\": \"test-api-key\",\n    \"ocp-apim-subscription-region\": \"eastus\",\n    \"x-clienttraceid\": \"349c71d5-901f-43ef-bf64-d2c23cb1a2ee\",\n    \"user-agent\": \"axios/1.10.0\",\n    \"content-length\": \"18\",\n    \"accept-encoding\": \"gzip, compress, deflate, br\"\n  },\n  \"body\": \"[{\\\"text\\\":\\\"Hello\\\"}]\"\n}\nAzure Translator translation failed: Error: Azure Translator error: Nock: No match for request {\n  \"method\": \"POST\",\n  \"url\": \"https://api.cognitive.microsofttranslator.com/translate?api-version=3.0&to=es&category=general&profanityAction=NoAction&includeAlignment=false&includeSentenceLength=false&textType=plain&from=en\",\n  \"headers\": {\n    \"accept\": \"application/json, text/plain, */*\",\n    \"content-type\": \"application/json\",\n    \"ocp-apim-subscription-key\": \"test-api-key\",\n    \"ocp-apim-subscription-region\": \"eastus\",\n    \"x-clienttraceid\": \"349c71d5-901f-43ef-bf64-d2c23cb1a2ee\",\n    \"user-agent\": \"axios/1.10.0\",\n    \"content-length\": \"18\",\n    \"accept-encoding\": \"gzip, compress, deflate, br\"\n  },\n  \"body\": \"[{\\\"text\\\":\\\"Hello\\\"}]\"\n}\n    at AzureTranslator.translateText (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/src/services/translation/azure-translator.js:223:19)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async AzureTranslator.translate (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/src/services/translation/azure-translator.js:129:20)\n    at async Context.<anonymous> (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/tests/api/azure-api.test.js:208:13)\nTranslation Manager initialization failed: TypeError: this.languagePairOptimizer.initialize is not a function\n    at TranslationManager.initialize (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/src/services/translation/translation-manager.js:79:46)\n    at async Context.<anonymous> (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/tests/integration/complete-pipeline.test.js:61:13)\nTranslation Manager initialization failed: TypeError: this.languagePairOptimizer.initialize is not a function\n    at TranslationManager.initialize (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/src/services/translation/translation-manager.js:79:46)\n    at async Context.<anonymous> (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/tests/integration/complete-pipeline.test.js:178:13)\nTranslation Manager initialization failed: TypeError: this.languagePairOptimizer.initialize is not a function\n    at TranslationManager.initialize (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/src/services/translation/translation-manager.js:79:46)\n    at async Context.<anonymous> (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/tests/integration/stt-translation.test.js:38:13)\nTranslation Manager initialization failed: TypeError: this.languagePairOptimizer.initialize is not a function\n    at TranslationManager.initialize (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/src/services/translation/translation-manager.js:79:46)\n    at async Context.<anonymous> (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/tests/integration/stt-translation.test.js:98:13)\nTranslation Manager initialization failed: TypeError: this.languagePairOptimizer.initialize is not a function\n    at TranslationManager.initialize (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/src/services/translation/translation-manager.js:79:46)\n    at async Context.<anonymous> (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/tests/integration/stt-translation.test.js:112:13)\nTranslation Manager initialization failed: TypeError: this.languagePairOptimizer.initialize is not a function\n    at TranslationManager.initialize (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/src/services/translation/translation-manager.js:79:46)\n    at async Context.<anonymous> (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/tests/integration/stt-translation.test.js:147:13)\nTranslation Manager initialization failed: TypeError: this.languagePairOptimizer.initialize is not a function\n    at TranslationManager.initialize (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/src/services/translation/translation-manager.js:79:46)\n    at async Context.<anonymous> (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/tests/performance/translation-performance.test.js:52:9)\nTranslation Manager initialization failed: TypeError: this.languagePairOptimizer.initialize is not a function\n    at TranslationManager.initialize (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/src/services/translation/translation-manager.js:79:46)\n    at async Context.<anonymous> (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/tests/performance/translation-performance.test.js:331:9)\nFailed to load API keys: \"undefined\" is not valid JSON\nFailed to load API keys: \"undefined\" is not valid JSON\nFailed to load API keys: \"undefined\" is not valid JSON\nFailed to load API keys: \"undefined\" is not valid JSON\nFailed to load API keys: \"undefined\" is not valid JSON\nFailed to load API keys: \"undefined\" is not valid JSON\nFailed to load API keys: \"undefined\" is not valid JSON\nFailed to load API keys: \"undefined\" is not valid JSON\nFailed to load API keys: \"undefined\" is not valid JSON\nFailed to load API keys: \"undefined\" is not valid JSON\nTranslation Manager initialization failed: TypeError: this.languagePairOptimizer.initialize is not a function\n    at TranslationManager.initialize (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/src/services/translation/translation-manager.js:79:46)\n    at async Context.<anonymous> (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/tests/unit/services/error-handling/translation-error-handling.test.js:22:9)\nError configuring audio routing for Discord: Error: Config error\n    at Context.<anonymous> (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/tests/unit/services/platform-detector.test.js:139:61)\n    at callFn (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/mocha/lib/runnable.js:364:21)\n    at Runnable.run (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/mocha/lib/runnable.js:352:5)\n    at Runner.runTest (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/mocha/lib/runner.js:677:10)\n    at /Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/mocha/lib/runner.js:800:12\n    at next (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/mocha/lib/runner.js:592:14)\n    at /Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/mocha/lib/runner.js:602:7\n    at next (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/mocha/lib/runner.js:485:14)\n    at Immediate._onImmediate (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/mocha/lib/runner.js:570:5)\n    at process.processImmediate (node:internal/timers:491:21)\nError applying Windows audio routing: Error: Command failed: powershell -Command \"Set-AudioDevice -ID 'CABLE Input'\"\n/bin/sh: powershell: command not found\n\n    at genericNodeError (node:internal/errors:983:15)\n    at wrappedFn (node:internal/errors:537:14)\n    at ChildProcess.exithandler (node:child_process:414:12)\n    at ChildProcess.emit (node:events:518:28)\n    at maybeClose (node:internal/child_process:1101:16)\n    at Socket.<anonymous> (node:internal/child_process:456:11)\n    at Socket.emit (node:events:518:28)\n    at Pipe.<anonymous> (node:net:351:12) {\n  code: 127,\n  killed: false,\n  signal: null,\n  cmd: `powershell -Command \"Set-AudioDevice -ID 'CABLE Input'\"`,\n  stdout: '',\n  stderr: '/bin/sh: powershell: command not found\\n'\n}\nError applying Windows audio routing: Error: Command failed: powershell -Command \"Set-AudioDevice -ID 'CABLE Input'\"\n/bin/sh: powershell: command not found\n\n    at genericNodeError (node:internal/errors:983:15)\n    at wrappedFn (node:internal/errors:537:14)\n    at ChildProcess.exithandler (node:child_process:414:12)\n    at ChildProcess.emit (node:events:518:28)\n    at maybeClose (node:internal/child_process:1101:16)\n    at ChildProcess._handle.onexit (node:internal/child_process:304:5) {\n  code: 127,\n  killed: false,\n  signal: null,\n  cmd: `powershell -Command \"Set-AudioDevice -ID 'CABLE Input'\"`,\n  stdout: '',\n  stderr: '/bin/sh: powershell: command not found\\n'\n}\nError applying Linux audio routing: Error: Command failed: pactl set-default-sink \"CABLE Output\"\n/bin/sh: pactl: command not found\n\n    at genericNodeError (node:internal/errors:983:15)\n    at wrappedFn (node:internal/errors:537:14)\n    at ChildProcess.exithandler (node:child_process:414:12)\n    at ChildProcess.emit (node:events:518:28)\n    at maybeClose (node:internal/child_process:1101:16)\n    at Socket.<anonymous> (node:internal/child_process:456:11)\n    at Socket.emit (node:events:518:28)\n    at Pipe.<anonymous> (node:net:351:12) {\n  code: 127,\n  killed: false,\n  signal: null,\n  cmd: 'pactl set-default-sink \"CABLE Output\"',\n  stdout: '',\n  stderr: '/bin/sh: pactl: command not found\\n'\n}\nError applying Linux audio routing: Error: Command failed: pactl set-default-sink \"CABLE Output\"\n/bin/sh: pactl: command not found\n\n    at genericNodeError (node:internal/errors:983:15)\n    at wrappedFn (node:internal/errors:537:14)\n    at ChildProcess.exithandler (node:child_process:414:12)\n    at ChildProcess.emit (node:events:518:28)\n    at maybeClose (node:internal/child_process:1101:16)\n    at Socket.<anonymous> (node:internal/child_process:456:11)\n    at Socket.emit (node:events:518:28)\n    at Pipe.<anonymous> (node:net:351:12) {\n  code: 127,\n  killed: false,\n  signal: null,\n  cmd: 'pactl set-default-sink \"CABLE Output\"',\n  stdout: '',\n  stderr: '/bin/sh: pactl: command not found\\n'\n}\n(node:25971) [DEP0174] DeprecationWarning: Calling promisify on a function that returns a Promise is likely a mistake.\n(Use `node --trace-deprecation ...` to show where the warning was created)\n(node:25971) [DEP0174] DeprecationWarning: Calling promisify on a function that returns a Promise is likely a mistake.\n",
      "success": false,
      "error": "Test suite failed with exit code null"
    },
    "performance": {
      "name": "performance",
      "description": "Performance Tests",
      "command": "npm run test:performance",
      "startTime": "2025-07-04T23:05:00.518Z",
      "endTime": "2025-07-04T23:06:30.521Z",
      "duration": 90003,
      "exitCode": null,
      "stdout": "\n> universal-translator@1.0.0 test:performance\n> mocha --require tests/test-helper.js 'tests/performance/**/*.test.js' --timeout 30000 --exit\n\n\n\u001b[0m\u001b[0m\n\u001b[0m  Translation Performance Tests\u001b[0m\n\u001b[0m    Translation Service Latency\u001b[0m\nInitializing translation services...\ndeepl translation service initialized: { success: true }\ngpt4o translation service initialized: { success: true }\ngoogle translation service initialized: { success: true }\nazure translation service initialized: { success: true }\n    \u001b[31m  1) \"before each\" hook for \"should measure individual service latency\"\u001b[0m\n\n\u001b[0m  Translation Cache Performance\u001b[0m\nInitializing translation services...\ndeepl translation service initialized: { success: true }\ngpt4o translation service initialized: { success: true }\ngoogle translation service initialized: { success: true }\nazure translation service initialized: { success: true }\n  \u001b[31m  2) \"before each\" hook for \"should improve performance with caching\"\u001b[0m\n\n\u001b[0m  Accessibility Tests\u001b[0m\n\u001b[0m    Main Interface\u001b[0m\n    \u001b[31m  3) \"before each\" hook for \"should have no critical accessibility violations\"\u001b[0m\n\u001b[0m    Translation Form\u001b[0m\n    \u001b[31m  4) \"before each\" hook for \"should have accessible form controls\"\u001b[0m\n\u001b[0m    Results Display\u001b[0m\n    \u001b[31m  5) \"before each\" hook for \"should have screen reader accessible results\"\u001b[0m\n\u001b[0m    Responsive Design\u001b[0m\n    \u001b[31m  6) should be accessible on mobile viewport\u001b[0m\n    \u001b[31m  7) should maintain touch target sizes on mobile\u001b[0m\n\n\u001b[0m  Azure Translator API Tests\u001b[0m\n\u001b[0m    Translation API\u001b[0m\n    \u001b[31m  8) should make correct API calls to translate text\u001b[0m\n    \u001b[31m  9) should handle API errors correctly\u001b[0m\n    \u001b[31m  10) should handle network errors gracefully\u001b[0m\n\u001b[0m    Language Detection API\u001b[0m\n    \u001b[31m  11) should detect language correctly\u001b[0m\n\u001b[0m    Supported Languages API\u001b[0m\nAzure Translator supports 3 languages\n    \u001b[32m  ✔\u001b[0m\u001b[90m should retrieve supported languages\u001b[0m\n\u001b[0m    Authentication\u001b[0m\n    \u001b[31m  12) should include correct authentication headers\u001b[0m\n\n\u001b[0m  End-to-End Tests\u001b[0m\n  \u001b[36m  - should be implemented with Playwright\u001b[0m\n\n\u001b[0m  E2E Test Placeholder\u001b[0m\n  \u001b[32m  ✔\u001b[0m\u001b[90m should pass\u001b[0m\n\n\u001b[0m  Translation App E2E Tests\u001b[0m\n  \u001b[36m  - should perform a complete translation flow\u001b[0m\n  \u001b[36m  - should handle errors gracefully\u001b[0m\n\n\u001b[0m  E2E Test Placeholder\u001b[0m\n  \u001b[32m  ✔\u001b[0m\u001b[90m should pass\u001b[0m\n\n\u001b[0m  Example Test Suite\u001b[0m\n  \u001b[32m  ✔\u001b[0m\u001b[90m should pass a simple test\u001b[0m\n  \u001b[32m  ✔\u001b[0m\u001b[90m should demonstrate sinon stub\u001b[0m\n\n\u001b[0m  Complete Pipeline Integration Tests\u001b[0m\n\u001b[0m    End-to-end audio translation pipeline\u001b[0m\nInitializing translation services...\ndeepl translation service initialized: { success: true }\ngpt4o translation service initialized: { success: true }\ngoogle translation service initialized: { success: true }\nazure translation service initialized: { success: true }\n    \u001b[31m  13) should process audio through the complete pipeline\u001b[0m\n    \u001b[31m  14) should handle service failover in the pipeline\u001b[0m\nInitializing translation services...\ndeepl translation service initialized: { success: true }\ngpt4o translation service initialized: { success: true }\ngoogle translation service initialized: { success: true }\nazure translation service initialized: { success: true }\n    \u001b[31m  15) should maintain conversation context across multiple exchanges\u001b[0m\n\n\u001b[0m  Translation Integration Tests\u001b[0m\n\u001b[0m    End-to-end translation workflow\u001b[0m\nInitializing translation services...\ndeepl translation service initialized: { success: true }\ngpt4o translation service initialized: { success: true }\ngoogle translation service initialized: { success: true }\nazure translation service initialized: { success: true }\n    \u001b[31m  16) should complete the full translation pipeline\u001b[0m\nInitializing translation services...\ndeepl translation service initialized: { success: true }\ngpt4o translation service initialized: { success: true }\ngoogle translation service initialized: { success: true }\nazure translation service initialized: { success: true }\n    \u001b[31m  17) should handle service failover correctly\u001b[0m\nInitializing translation services...\ndeepl translation service initialized: { success: true }\ngpt4o translation service initialized: { success: true }\ngoogle translation service initialized: { success: true }\nazure translation service initialized: { success: true }\n    \u001b[31m  18) should maintain conversation context between translations\u001b[0m\nInitializing translation services...\ndeepl translation service initialized: { success: true }\ngpt4o translation service initialized: { success: true }\ngoogle translation service initialized: { success: true }\nazure translation service initialized: { success: true }\n    \u001b[31m  19) should handle different priority settings\u001b[0m\n\n\u001b[0m  API Key Security\u001b[0m\n\u001b[0m    API key storage\u001b[0m\n    \u001b[31m  20) should encrypt API keys before storing\u001b[0m\n    \u001b[31m  21) should store API keys in the correct location\u001b[0m\n    \u001b[31m  22) should not store API keys in plain text\u001b[0m\n\u001b[0m    API key retrieval\u001b[0m\n    \u001b[31m  23) should decrypt API keys when retrieving\u001b[0m\n    \u001b[31m  24) should handle missing API keys gracefully\u001b[0m\n    \u001b[31m  25) should handle decryption errors securely\u001b[0m\n\u001b[0m    API key validation\u001b[0m\n    \u001b[31m  26) should validate API key format\u001b[0m\n    \u001b[31m  27) should detect potentially compromised API keys\u001b[0m\n\u001b[0m    API key rotation\u001b[0m\n    \u001b[31m  28) should support API key rotation\u001b[0m\n    \u001b[32m  ✔\u001b[0m\u001b[90m should not store invalid API keys during rotation\u001b[0m\n\n\u001b[0m  App Security\u001b[0m\n\u001b[0m    Input sanitization\u001b[0m\n    \u001b[31m  29) should sanitize user inputs to prevent injection attacks\u001b[0m\n    \u001b[31m  30) should sanitize file paths to prevent path traversal\u001b[0m\n\u001b[0m    Content Security Policy\u001b[0m\n    \u001b[31m  31) should validate CSP headers\u001b[0m\n\u001b[0m    Secure storage\u001b[0m\n    \u001b[31m  32) should use secure storage for sensitive data\u001b[0m\n\n\u001b[0m  Network Security\u001b[0m\n\u001b[0m    HTTPS verification\u001b[0m\n    \u001b[31m  33) should verify HTTPS certificates by default\u001b[0m\n    \u001b[31m  34) should detect and prevent SSL stripping\u001b[0m\n\u001b[0m    Authentication header handling\u001b[0m\n    \u001b[31m  35) should safely handle authentication headers\u001b[0m\n\n\u001b[0m  Complete Translation Pipeline\u001b[0m\n\u001b[0m    Initialization\u001b[0m\n    \u001b[31m  36) \"before each\" hook for \"should initialize pipeline with default settings\"\u001b[0m\n\n\u001b[0m  Translation Error Handling\u001b[0m\n\u001b[0m    Service failure handling\u001b[0m\nInitializing translation services...\ndeepl translation service initialized: { success: true }\ngpt4o translation service initialized: { success: true }\ngoogle translation service initialized: { success: true }\nazure translation service initialized: { success: true }\n    \u001b[31m  37) \"before each\" hook for \"should handle all services failing\"\u001b[0m\n\n\u001b[0m  PlatformDetector\u001b[0m\n\u001b[0m    constructor\u001b[0m\n    \u001b[32m  ✔\u001b[0m\u001b[90m should initialize with supported apps list\u001b[0m\n    \u001b[31m  38) should set platform property\u001b[0m\n\u001b[0m    detectActiveApp\u001b[0m\n    \u001b[31m  39) should detect Discord on Windows\u001b[0m\n    \u001b[31m  40) should detect Zoom on macOS\u001b[0m\n    \u001b[31m  41) should detect Teams on Linux\u001b[0m\n    \u001b[31m  42) should return null when no supported app is detected\u001b[0m\n    \u001b[31m  43) should handle exec errors gracefully\u001b[0m\n    \u001b[31m  44) should handle unsupported platform\u001b[0m\n\u001b[0m    getAppConfig\u001b[0m\n    \u001b[32m  ✔\u001b[0m\u001b[90m should return Discord configuration\u001b[0m\n    \u001b[32m  ✔\u001b[0m\u001b[90m should return Zoom configuration\u001b[0m\n    \u001b[32m  ✔\u001b[0m\u001b[90m should return null for unsupported app\u001b[0m\n\u001b[0m    configureAudioRouting\u001b[0m\nAudio routing configured for Discord\n    \u001b[32m  ✔\u001b[0m\u001b[90m should configure audio routing for Discord\u001b[0m\nNo specific configuration found for Notepad\n    \u001b[32m  ✔\u001b[0m\u001b[90m should handle unsupported app gracefully\u001b[0m\n    \u001b[32m  ✔\u001b[0m\u001b[90m should handle errors gracefully\u001b[0m\n\u001b[0m    applyAudioRouting\u001b[0m\nmacOS audio routing configuration: { inputDevice: 'test', outputDevice: 'test' }\nNote: Full macOS audio routing requires Core Audio integration\n    \u001b[31m  45) should call Windows routing for win32 platform\u001b[0m\n    \u001b[32m  ✔\u001b[0m\u001b[90m should call macOS routing for darwin platform\u001b[0m\nmacOS audio routing configuration: { inputDevice: 'test', outputDevice: 'test' }\nNote: Full macOS audio routing requires Core Audio integration\n    \u001b[31m  46) should call Linux routing for linux platform\u001b[0m\n\u001b[0m    applyWindowsAudioRouting\u001b[0m\n    \u001b[31m  47) should execute PowerShell commands for Windows audio routing\u001b[0m\n    \u001b[32m  ✔\u001b[0m\u001b[90m should handle Windows routing errors\u001b[0m\n\u001b[0m    applyLinuxAudioRouting\u001b[0m\n    \u001b[31m  48) should execute pactl commands for Linux audio routing\u001b[0m\n    \u001b[32m  ✔\u001b[0m\u001b[90m should handle Linux routing errors\u001b[0m\n\u001b[0m    applyMacAudioRouting\u001b[0m\n    \u001b[32m  ✔\u001b[0m\u001b[90m should log configuration for macOS\u001b[0m\n\n\u001b[0m  Setup Automation Service\u001b[0m\n\u001b[0m    Platform Detection\u001b[0m\n    \u001b[31m  49) should detect macOS correctly\u001b[0m\n    \u001b[31m  50) should detect Windows correctly\u001b[0m\n    \u001b[31m  51) should detect Linux correctly\u001b[0m\n    \u001b[31m  52) should throw error for unsupported platform\u001b[0m\n\u001b[0m    Virtual Audio Installation\u001b[0m\n    \u001b[31m  53) should install VB-Audio Cable on Windows\u001b[0m\n",
      "stderr": "Translation Manager initialization failed: TypeError: this.languagePairOptimizer.initialize is not a function\n    at TranslationManager.initialize (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/src/services/translation/translation-manager.js:79:46)\n    at async Context.<anonymous> (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/tests/performance/translation-performance.test.js:52:9)\nTranslation Manager initialization failed: TypeError: this.languagePairOptimizer.initialize is not a function\n    at TranslationManager.initialize (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/src/services/translation/translation-manager.js:79:46)\n    at async Context.<anonymous> (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/tests/performance/translation-performance.test.js:331:9)\nAzure translation error: The request is not authorized because credentials are missing or invalid.\nAzure Translator initialization failed: Error: Azure Translator connection test failed: Azure Translator error: The request is not authorized because credentials are missing or invalid.\n    at AzureTranslator.testConnection (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/src/services/translation/azure-translator.js:79:19)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async AzureTranslator.initialize (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/src/services/translation/azure-translator.js:51:13)\n    at async Context.<anonymous> (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/tests/api/azure-api.test.js:84:13)\nAzure translation error: Connection refused\nAzure Translator initialization failed: Error: Azure Translator connection test failed: Azure Translator error: Connection refused\n    at AzureTranslator.testConnection (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/src/services/translation/azure-translator.js:79:19)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async AzureTranslator.initialize (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/src/services/translation/azure-translator.js:51:13)\n    at async Context.<anonymous> (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/tests/api/azure-api.test.js:106:13)\nAzure translation error: Nock: No match for request {\n  \"method\": \"POST\",\n  \"url\": \"https://api.cognitive.microsofttranslator.com/translate?api-version=3.0&to=es&category=general&profanityAction=NoAction&includeAlignment=false&includeSentenceLength=false&textType=plain&from=en\",\n  \"headers\": {\n    \"accept\": \"application/json, text/plain, */*\",\n    \"content-type\": \"application/json\",\n    \"ocp-apim-subscription-key\": \"test-api-key\",\n    \"ocp-apim-subscription-region\": \"eastus\",\n    \"x-clienttraceid\": \"8a958140-bf73-43d9-80f7-d29ad3657bc9\",\n    \"user-agent\": \"axios/1.10.0\",\n    \"content-length\": \"18\",\n    \"accept-encoding\": \"gzip, compress, deflate, br\"\n  },\n  \"body\": \"[{\\\"text\\\":\\\"Hello\\\"}]\"\n}\nAzure Translator initialization failed: Error: Azure Translator connection test failed: Azure Translator error: Nock: No match for request {\n  \"method\": \"POST\",\n  \"url\": \"https://api.cognitive.microsofttranslator.com/translate?api-version=3.0&to=es&category=general&profanityAction=NoAction&includeAlignment=false&includeSentenceLength=false&textType=plain&from=en\",\n  \"headers\": {\n    \"accept\": \"application/json, text/plain, */*\",\n    \"content-type\": \"application/json\",\n    \"ocp-apim-subscription-key\": \"test-api-key\",\n    \"ocp-apim-subscription-region\": \"eastus\",\n    \"x-clienttraceid\": \"8a958140-bf73-43d9-80f7-d29ad3657bc9\",\n    \"user-agent\": \"axios/1.10.0\",\n    \"content-length\": \"18\",\n    \"accept-encoding\": \"gzip, compress, deflate, br\"\n  },\n  \"body\": \"[{\\\"text\\\":\\\"Hello\\\"}]\"\n}\n    at AzureTranslator.testConnection (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/src/services/translation/azure-translator.js:79:19)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async AzureTranslator.initialize (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/src/services/translation/azure-translator.js:51:13)\n    at async Context.<anonymous> (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/tests/api/azure-api.test.js:137:13)\nFailed to load Azure Translator languages: AxiosError: Nock: No match for request {\n  \"method\": \"GET\",\n  \"url\": \"https://api.cognitive.microsofttranslator.com/languages?api-version=3.0&scope=translation\",\n  \"headers\": {\n    \"accept\": \"application/json, text/plain, */*\",\n    \"content-type\": \"application/json\",\n    \"user-agent\": \"axios/1.10.0\",\n    \"accept-encoding\": \"gzip, compress, deflate, br\"\n  }\n}\n    at AxiosError.from (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/axios/dist/node/axios.cjs:863:14)\n    at RedirectableRequest.handleRequestError (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/axios/dist/node/axios.cjs:3191:25)\n    at RedirectableRequest.emit (node:events:530:35)\n    at eventHandlers.<computed> (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/follow-redirects/index.js:49:24)\n    at OverriddenClientRequest.emit (node:events:518:28)\n    at Socket.<anonymous> (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/propagate/index.js:64:17)\n    at Socket.emit (node:events:518:28)\n    at /Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/nock/lib/socket.js:101:14\n    at process.processTicksAndRejections (node:internal/process/task_queues:85:11)\n    at Axios.request (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/axios/dist/node/axios.cjs:4280:41)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async AzureTranslator.loadSupportedLanguages (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/src/services/translation/azure-translator.js:90:30)\n    at async AzureTranslator.initialize (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/src/services/translation/azure-translator.js:52:13)\n    at async Context.<anonymous> (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/tests/api/azure-api.test.js:205:13) {\n  statusCode: 404,\n  status: 404,\n  code: 'ERR_NOCK_NO_MATCH',\n  config: {\n    transitional: {\n      silentJSONParsing: true,\n      forcedJSONParsing: true,\n      clarifyTimeoutError: false\n    },\n    adapter: [ 'xhr', 'http', 'fetch' ],\n    transformRequest: [ [Function: transformRequest] ],\n    transformResponse: [ [Function: transformResponse] ],\n    timeout: 10000,\n    xsrfCookieName: 'XSRF-TOKEN',\n    xsrfHeaderName: 'X-XSRF-TOKEN',\n    maxContentLength: -1,\n    maxBodyLength: -1,\n    env: { FormData: [Function [FormData]], Blob: [class Blob] },\n    validateStatus: [Function: validateStatus],\n    headers: Object [AxiosHeaders] {\n      Accept: 'application/json, text/plain, */*',\n      'Content-Type': 'application/json',\n      'User-Agent': 'axios/1.10.0',\n      'Accept-Encoding': 'gzip, compress, deflate, br'\n    },\n    method: 'get',\n    url: 'https://api.cognitive.microsofttranslator.com/languages?api-version=3.0&scope=translation',\n    allowAbsoluteUrls: true,\n    data: undefined\n  },\n  request: <ref *2> Writable {\n    _events: {\n      close: undefined,\n      error: [Function: handleRequestError],\n      prefinish: undefined,\n      finish: undefined,\n      drain: undefined,\n      response: [Function: handleResponse],\n      socket: [Array],\n      timeout: undefined,\n      abort: undefined\n    },\n    _writableState: WritableState {\n      highWaterMark: 65536,\n      length: 0,\n      corked: 0,\n      onwrite: [Function: bound onwrite],\n      writelen: 0,\n      bufferedIndex: 0,\n      pendingcb: 0,\n      [Symbol(kState)]: 17580812,\n      [Symbol(kBufferedValue)]: null\n    },\n    _maxListeners: undefined,\n    _options: {\n      maxRedirects: 21,\n      maxBodyLength: Infinity,\n      protocol: 'https:',\n      path: '/languages?api-version=3.0&scope=translation',\n      method: 'GET',\n      headers: [Object: null prototype],\n      agents: [Object],\n      auth: undefined,\n      family: undefined,\n      beforeRedirect: [Function: dispatchBeforeRedirect],\n      beforeRedirects: [Object],\n      hostname: 'api.cognitive.microsofttranslator.com',\n      port: '',\n      agent: undefined,\n      nativeProtocols: [Object],\n      pathname: '/languages',\n      search: '?api-version=3.0&scope=translation'\n    },\n    _ended: true,\n    _ending: true,\n    _redirectCount: 0,\n    _redirects: [],\n    _requestBodyLength: 0,\n    _requestBodyBuffers: [],\n    _eventsCount: 3,\n    _onNativeResponse: [Function (anonymous)],\n    _currentRequest: <ref *1> OverriddenClientRequest {\n      _events: [Object: null prototype],\n      _eventsCount: 7,\n      _maxListeners: undefined,\n      outputData: [],\n      outputSize: 0,\n      writable: true,\n      destroyed: true,\n      _last: false,\n      chunkedEncoding: false,\n      shouldKeepAlive: true,\n      maxRequestsOnConnectionReached: false,\n      _defaultKeepAlive: true,\n      useChunkedEncodingByDefault: true,\n      sendDate: false,\n      _removedConnection: false,\n      _removedContLen: false,\n      _removedTE: false,\n      strictContentLength: false,\n      _contentLength: null,\n      _hasBody: true,\n      _trailer: '',\n      finished: true,\n      _headerSent: false,\n      _closed: false,\n      _header: null,\n      _keepAliveTimeout: 0,\n      _onPendingData: [Function: nop],\n      path: '/languages?api-version=3.0&scope=translation',\n      method: 'GET',\n      write: [Function (anonymous)],\n      end: [Function (anonymous)],\n      flushHeaders: [Function (anonymous)],\n      req: [Circular *1],\n      options: [Object],\n      interceptors: [],\n      response: [IncomingMessage],\n      requestBodyBuffers: [],\n      playbackStarted: false,\n      readyToStartPlaybackOnSocketEvent: false,\n      _redirectable: [Circular *2],\n      [Symbol(shapeMode)]: false,\n      [Symbol(kCapture)]: false,\n      [Symbol(kBytesWritten)]: 0,\n      [Symbol(kNeedDrain)]: false,\n      [Symbol(corked)]: 0,\n      [Symbol(kChunkedBuffer)]: [],\n      [Symbol(kChunkedLength)]: 0,\n      [Symbol(kSocket)]: [Socket],\n      [Symbol(kOutHeaders)]: [Object: null prototype],\n      [Symbol(errored)]: null,\n      [Symbol(kHighWaterMark)]: 65536,\n      [Symbol(kRejectNonStandardBodyWrites)]: false,\n      [Symbol(kError)]: [Error]\n    },\n    _currentUrl: 'https://api.cognitive.microsofttranslator.com/languages?api-version=3.0&scope=translation',\n    _timeout: null,\n    [Symbol(shapeMode)]: true,\n    [Symbol(kCapture)]: false\n  },\n  cause: Error: Nock: No match for request {\n    \"method\": \"GET\",\n    \"url\": \"https://api.cognitive.microsofttranslator.com/languages?api-version=3.0&scope=translation\",\n    \"headers\": {\n      \"accept\": \"application/json, text/plain, */*\",\n      \"content-type\": \"application/json\",\n      \"user-agent\": \"axios/1.10.0\",\n      \"accept-encoding\": \"gzip, compress, deflate, br\"\n    }\n  }\n      at InterceptedRequestRouter.startPlayback (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/nock/lib/intercepted_request_router.js:346:21)\n      at InterceptedRequestRouter.maybeStartPlayback (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/nock/lib/intercepted_request_router.js:268:12)\n      at InterceptedRequestRouter.connectSocket (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/nock/lib/intercepted_request_router.js:140:12)\n      at /Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/nock/lib/intercepted_request_router.js:78:33\n      at process.processTicksAndRejections (node:internal/process/task_queues:85:11) {\n    code: 'ERR_NOCK_NO_MATCH',\n    status: 404,\n    statusCode: 404\n  }\n}\nAzure translation error: Nock: No match for request {\n  \"method\": \"POST\",\n  \"url\": \"https://api.cognitive.microsofttranslator.com/translate?api-version=3.0&to=es&category=general&profanityAction=NoAction&includeAlignment=false&includeSentenceLength=false&textType=plain&from=en\",\n  \"headers\": {\n    \"accept\": \"application/json, text/plain, */*\",\n    \"content-type\": \"application/json\",\n    \"ocp-apim-subscription-key\": \"test-api-key\",\n    \"ocp-apim-subscription-region\": \"eastus\",\n    \"x-clienttraceid\": \"a8c97cf1-ba84-4699-b045-7fe89bd40278\",\n    \"user-agent\": \"axios/1.10.0\",\n    \"content-length\": \"18\",\n    \"accept-encoding\": \"gzip, compress, deflate, br\"\n  },\n  \"body\": \"[{\\\"text\\\":\\\"Hello\\\"}]\"\n}\nAzure Translator translation failed: Error: Azure Translator error: Nock: No match for request {\n  \"method\": \"POST\",\n  \"url\": \"https://api.cognitive.microsofttranslator.com/translate?api-version=3.0&to=es&category=general&profanityAction=NoAction&includeAlignment=false&includeSentenceLength=false&textType=plain&from=en\",\n  \"headers\": {\n    \"accept\": \"application/json, text/plain, */*\",\n    \"content-type\": \"application/json\",\n    \"ocp-apim-subscription-key\": \"test-api-key\",\n    \"ocp-apim-subscription-region\": \"eastus\",\n    \"x-clienttraceid\": \"a8c97cf1-ba84-4699-b045-7fe89bd40278\",\n    \"user-agent\": \"axios/1.10.0\",\n    \"content-length\": \"18\",\n    \"accept-encoding\": \"gzip, compress, deflate, br\"\n  },\n  \"body\": \"[{\\\"text\\\":\\\"Hello\\\"}]\"\n}\n    at AzureTranslator.translateText (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/src/services/translation/azure-translator.js:223:19)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async AzureTranslator.translate (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/src/services/translation/azure-translator.js:129:20)\n    at async Context.<anonymous> (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/tests/api/azure-api.test.js:208:13)\nTranslation Manager initialization failed: TypeError: this.languagePairOptimizer.initialize is not a function\n    at TranslationManager.initialize (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/src/services/translation/translation-manager.js:79:46)\n    at async Context.<anonymous> (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/tests/integration/complete-pipeline.test.js:61:13)\nTranslation Manager initialization failed: TypeError: this.languagePairOptimizer.initialize is not a function\n    at TranslationManager.initialize (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/src/services/translation/translation-manager.js:79:46)\n    at async Context.<anonymous> (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/tests/integration/complete-pipeline.test.js:178:13)\nTranslation Manager initialization failed: TypeError: this.languagePairOptimizer.initialize is not a function\n    at TranslationManager.initialize (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/src/services/translation/translation-manager.js:79:46)\n    at async Context.<anonymous> (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/tests/integration/stt-translation.test.js:38:13)\nTranslation Manager initialization failed: TypeError: this.languagePairOptimizer.initialize is not a function\n    at TranslationManager.initialize (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/src/services/translation/translation-manager.js:79:46)\n    at async Context.<anonymous> (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/tests/integration/stt-translation.test.js:98:13)\nTranslation Manager initialization failed: TypeError: this.languagePairOptimizer.initialize is not a function\n    at TranslationManager.initialize (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/src/services/translation/translation-manager.js:79:46)\n    at async Context.<anonymous> (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/tests/integration/stt-translation.test.js:112:13)\nTranslation Manager initialization failed: TypeError: this.languagePairOptimizer.initialize is not a function\n    at TranslationManager.initialize (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/src/services/translation/translation-manager.js:79:46)\n    at async Context.<anonymous> (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/tests/integration/stt-translation.test.js:147:13)\nFailed to load API keys: \"undefined\" is not valid JSON\nFailed to load API keys: \"undefined\" is not valid JSON\nFailed to load API keys: \"undefined\" is not valid JSON\nFailed to load API keys: \"undefined\" is not valid JSON\nFailed to load API keys: \"undefined\" is not valid JSON\nFailed to load API keys: \"undefined\" is not valid JSON\nFailed to load API keys: \"undefined\" is not valid JSON\nFailed to load API keys: \"undefined\" is not valid JSON\nFailed to load API keys: \"undefined\" is not valid JSON\nFailed to load API keys: \"undefined\" is not valid JSON\nTranslation Manager initialization failed: TypeError: this.languagePairOptimizer.initialize is not a function\n    at TranslationManager.initialize (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/src/services/translation/translation-manager.js:79:46)\n    at async Context.<anonymous> (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/tests/unit/services/error-handling/translation-error-handling.test.js:22:9)\nError configuring audio routing for Discord: Error: Config error\n    at Context.<anonymous> (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/tests/unit/services/platform-detector.test.js:139:61)\n    at callFn (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/mocha/lib/runnable.js:364:21)\n    at Runnable.run (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/mocha/lib/runnable.js:352:5)\n    at Runner.runTest (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/mocha/lib/runner.js:677:10)\n    at /Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/mocha/lib/runner.js:800:12\n    at next (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/mocha/lib/runner.js:592:14)\n    at /Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/mocha/lib/runner.js:602:7\n    at next (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/mocha/lib/runner.js:485:14)\n    at Immediate._onImmediate (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/mocha/lib/runner.js:570:5)\n    at process.processImmediate (node:internal/timers:491:21)\nError applying Windows audio routing: Error: Command failed: powershell -Command \"Set-AudioDevice -ID 'CABLE Input'\"\n/bin/sh: powershell: command not found\n\n    at genericNodeError (node:internal/errors:983:15)\n    at wrappedFn (node:internal/errors:537:14)\n    at ChildProcess.exithandler (node:child_process:414:12)\n    at ChildProcess.emit (node:events:518:28)\n    at maybeClose (node:internal/child_process:1101:16)\n    at Socket.<anonymous> (node:internal/child_process:456:11)\n    at Socket.emit (node:events:518:28)\n    at Pipe.<anonymous> (node:net:351:12) {\n  code: 127,\n  killed: false,\n  signal: null,\n  cmd: `powershell -Command \"Set-AudioDevice -ID 'CABLE Input'\"`,\n  stdout: '',\n  stderr: '/bin/sh: powershell: command not found\\n'\n}\nError applying Windows audio routing: Error: Command failed: powershell -Command \"Set-AudioDevice -ID 'CABLE Input'\"\n/bin/sh: powershell: command not found\n\n    at genericNodeError (node:internal/errors:983:15)\n    at wrappedFn (node:internal/errors:537:14)\n    at ChildProcess.exithandler (node:child_process:414:12)\n    at ChildProcess.emit (node:events:518:28)\n    at maybeClose (node:internal/child_process:1101:16)\n    at Socket.<anonymous> (node:internal/child_process:456:11)\n    at Socket.emit (node:events:518:28)\n    at Pipe.<anonymous> (node:net:351:12) {\n  code: 127,\n  killed: false,\n  signal: null,\n  cmd: `powershell -Command \"Set-AudioDevice -ID 'CABLE Input'\"`,\n  stdout: '',\n  stderr: '/bin/sh: powershell: command not found\\n'\n}\nError applying Linux audio routing: Error: Command failed: pactl set-default-sink \"CABLE Output\"\n/bin/sh: pactl: command not found\n\n    at genericNodeError (node:internal/errors:983:15)\n    at wrappedFn (node:internal/errors:537:14)\n    at ChildProcess.exithandler (node:child_process:414:12)\n    at ChildProcess.emit (node:events:518:28)\n    at maybeClose (node:internal/child_process:1101:16)\n    at ChildProcess._handle.onexit (node:internal/child_process:304:5) {\n  code: 127,\n  killed: false,\n  signal: null,\n  cmd: 'pactl set-default-sink \"CABLE Output\"',\n  stdout: '',\n  stderr: '/bin/sh: pactl: command not found\\n'\n}\nError applying Linux audio routing: Error: Command failed: pactl set-default-sink \"CABLE Output\"\n/bin/sh: pactl: command not found\n\n    at genericNodeError (node:internal/errors:983:15)\n    at wrappedFn (node:internal/errors:537:14)\n    at ChildProcess.exithandler (node:child_process:414:12)\n    at ChildProcess.emit (node:events:518:28)\n    at maybeClose (node:internal/child_process:1101:16)\n    at Socket.<anonymous> (node:internal/child_process:456:11)\n    at Socket.emit (node:events:518:28)\n    at Pipe.<anonymous> (node:net:351:12) {\n  code: 127,\n  killed: false,\n  signal: null,\n  cmd: 'pactl set-default-sink \"CABLE Output\"',\n  stdout: '',\n  stderr: '/bin/sh: pactl: command not found\\n'\n}\n(node:27031) [DEP0174] DeprecationWarning: Calling promisify on a function that returns a Promise is likely a mistake.\n(Use `node --trace-deprecation ...` to show where the warning was created)\n(node:27031) [DEP0174] DeprecationWarning: Calling promisify on a function that returns a Promise is likely a mistake.\n",
      "success": false,
      "error": "Test suite failed with exit code null"
    },
    "security": {
      "name": "security",
      "description": "Security Tests",
      "command": "npm run test:security",
      "startTime": "2025-07-04T23:06:30.521Z",
      "endTime": "2025-07-04T23:07:15.546Z",
      "duration": 45025,
      "exitCode": null,
      "stdout": "\n> universal-translator@1.0.0 test:security\n> mocha --require tests/test-helper.js 'tests/security/**/*.test.js' --timeout 15000 --exit\n\n\n\u001b[0m\u001b[0m\n\u001b[0m  API Key Security\u001b[0m\n\u001b[0m    API key storage\u001b[0m\n    \u001b[31m  1) should encrypt API keys before storing\u001b[0m\n    \u001b[31m  2) should store API keys in the correct location\u001b[0m\n    \u001b[31m  3) should not store API keys in plain text\u001b[0m\n\u001b[0m    API key retrieval\u001b[0m\n    \u001b[31m  4) should decrypt API keys when retrieving\u001b[0m\n    \u001b[31m  5) should handle missing API keys gracefully\u001b[0m\n    \u001b[31m  6) should handle decryption errors securely\u001b[0m\n\u001b[0m    API key validation\u001b[0m\n    \u001b[31m  7) should validate API key format\u001b[0m\n    \u001b[31m  8) should detect potentially compromised API keys\u001b[0m\n\u001b[0m    API key rotation\u001b[0m\n    \u001b[31m  9) should support API key rotation\u001b[0m\n    \u001b[32m  ✔\u001b[0m\u001b[90m should not store invalid API keys during rotation\u001b[0m\n\n\u001b[0m  App Security\u001b[0m\n\u001b[0m    Input sanitization\u001b[0m\n    \u001b[31m  10) should sanitize user inputs to prevent injection attacks\u001b[0m\n    \u001b[31m  11) should sanitize file paths to prevent path traversal\u001b[0m\n\u001b[0m    Content Security Policy\u001b[0m\n    \u001b[31m  12) should validate CSP headers\u001b[0m\n\u001b[0m    Secure storage\u001b[0m\n    \u001b[31m  13) should use secure storage for sensitive data\u001b[0m\n\n\u001b[0m  Network Security\u001b[0m\n\u001b[0m    HTTPS verification\u001b[0m\n    \u001b[31m  14) should verify HTTPS certificates by default\u001b[0m\n    \u001b[31m  15) should detect and prevent SSL stripping\u001b[0m\n\u001b[0m    Authentication header handling\u001b[0m\n    \u001b[31m  16) should safely handle authentication headers\u001b[0m\n\n\u001b[0m  Accessibility Tests\u001b[0m\n\u001b[0m    Main Interface\u001b[0m\n    \u001b[31m  17) \"before each\" hook for \"should have no critical accessibility violations\"\u001b[0m\n\u001b[0m    Translation Form\u001b[0m\n    \u001b[31m  18) \"before each\" hook for \"should have accessible form controls\"\u001b[0m\n\u001b[0m    Results Display\u001b[0m\n    \u001b[31m  19) \"before each\" hook for \"should have screen reader accessible results\"\u001b[0m\n\u001b[0m    Responsive Design\u001b[0m\n    \u001b[31m  20) should be accessible on mobile viewport\u001b[0m\n    \u001b[31m  21) should maintain touch target sizes on mobile\u001b[0m\n\n\u001b[0m  Azure Translator API Tests\u001b[0m\n\u001b[0m    Translation API\u001b[0m\n    \u001b[31m  22) should make correct API calls to translate text\u001b[0m\n    \u001b[31m  23) should handle API errors correctly\u001b[0m\n    \u001b[31m  24) should handle network errors gracefully\u001b[0m\n\u001b[0m    Language Detection API\u001b[0m\n    \u001b[31m  25) should detect language correctly\u001b[0m\n\u001b[0m    Supported Languages API\u001b[0m\nAzure Translator supports 3 languages\n    \u001b[32m  ✔\u001b[0m\u001b[90m should retrieve supported languages\u001b[0m\n\u001b[0m    Authentication\u001b[0m\n    \u001b[31m  26) should include correct authentication headers\u001b[0m\n\n\u001b[0m  End-to-End Tests\u001b[0m\n  \u001b[36m  - should be implemented with Playwright\u001b[0m\n\n\u001b[0m  E2E Test Placeholder\u001b[0m\n  \u001b[32m  ✔\u001b[0m\u001b[90m should pass\u001b[0m\n\n\u001b[0m  Translation App E2E Tests\u001b[0m\n  \u001b[36m  - should perform a complete translation flow\u001b[0m\n  \u001b[36m  - should handle errors gracefully\u001b[0m\n\n\u001b[0m  E2E Test Placeholder\u001b[0m\n  \u001b[32m  ✔\u001b[0m\u001b[90m should pass\u001b[0m\n\n\u001b[0m  Example Test Suite\u001b[0m\n  \u001b[32m  ✔\u001b[0m\u001b[90m should pass a simple test\u001b[0m\n  \u001b[32m  ✔\u001b[0m\u001b[90m should demonstrate sinon stub\u001b[0m\n\n\u001b[0m  Complete Pipeline Integration Tests\u001b[0m\n\u001b[0m    End-to-end audio translation pipeline\u001b[0m\nInitializing translation services...\ndeepl translation service initialized: { success: true }\ngpt4o translation service initialized: { success: true }\ngoogle translation service initialized: { success: true }\nazure translation service initialized: { success: true }\n    \u001b[31m  27) should process audio through the complete pipeline\u001b[0m\n    \u001b[31m  28) should handle service failover in the pipeline\u001b[0m\nInitializing translation services...\ndeepl translation service initialized: { success: true }\ngpt4o translation service initialized: { success: true }\ngoogle translation service initialized: { success: true }\nazure translation service initialized: { success: true }\n    \u001b[31m  29) should maintain conversation context across multiple exchanges\u001b[0m\n\n\u001b[0m  Translation Integration Tests\u001b[0m\n\u001b[0m    End-to-end translation workflow\u001b[0m\nInitializing translation services...\ndeepl translation service initialized: { success: true }\ngpt4o translation service initialized: { success: true }\ngoogle translation service initialized: { success: true }\nazure translation service initialized: { success: true }\n    \u001b[31m  30) should complete the full translation pipeline\u001b[0m\nInitializing translation services...\ndeepl translation service initialized: { success: true }\ngpt4o translation service initialized: { success: true }\ngoogle translation service initialized: { success: true }\nazure translation service initialized: { success: true }\n    \u001b[31m  31) should handle service failover correctly\u001b[0m\nInitializing translation services...\ndeepl translation service initialized: { success: true }\ngpt4o translation service initialized: { success: true }\ngoogle translation service initialized: { success: true }\nazure translation service initialized: { success: true }\n    \u001b[31m  32) should maintain conversation context between translations\u001b[0m\nInitializing translation services...\ndeepl translation service initialized: { success: true }\ngpt4o translation service initialized: { success: true }\ngoogle translation service initialized: { success: true }\nazure translation service initialized: { success: true }\n    \u001b[31m  33) should handle different priority settings\u001b[0m\n\n\u001b[0m  Translation Performance Tests\u001b[0m\n\u001b[0m    Translation Service Latency\u001b[0m\nInitializing translation services...\ndeepl translation service initialized: { success: true }\ngpt4o translation service initialized: { success: true }\ngoogle translation service initialized: { success: true }\nazure translation service initialized: { success: true }\n    \u001b[31m  34) \"before each\" hook for \"should measure individual service latency\"\u001b[0m\n\n\u001b[0m  Translation Cache Performance\u001b[0m\nInitializing translation services...\ndeepl translation service initialized: { success: true }\ngpt4o translation service initialized: { success: true }\ngoogle translation service initialized: { success: true }\nazure translation service initialized: { success: true }\n  \u001b[31m  35) \"before each\" hook for \"should improve performance with caching\"\u001b[0m\n\n\u001b[0m  Complete Translation Pipeline\u001b[0m\n\u001b[0m    Initialization\u001b[0m\n    \u001b[31m  36) \"before each\" hook for \"should initialize pipeline with default settings\"\u001b[0m\n\n\u001b[0m  Translation Error Handling\u001b[0m\n\u001b[0m    Service failure handling\u001b[0m\nInitializing translation services...\ndeepl translation service initialized: { success: true }\ngpt4o translation service initialized: { success: true }\ngoogle translation service initialized: { success: true }\nazure translation service initialized: { success: true }\n    \u001b[31m  37) \"before each\" hook for \"should handle all services failing\"\u001b[0m\n\n\u001b[0m  PlatformDetector\u001b[0m\n\u001b[0m    constructor\u001b[0m\n    \u001b[32m  ✔\u001b[0m\u001b[90m should initialize with supported apps list\u001b[0m\n    \u001b[31m  38) should set platform property\u001b[0m\n\u001b[0m    detectActiveApp\u001b[0m\n    \u001b[31m  39) should detect Discord on Windows\u001b[0m\n    \u001b[31m  40) should detect Zoom on macOS\u001b[0m\n    \u001b[31m  41) should detect Teams on Linux\u001b[0m\n    \u001b[31m  42) should return null when no supported app is detected\u001b[0m\n    \u001b[31m  43) should handle exec errors gracefully\u001b[0m\n    \u001b[31m  44) should handle unsupported platform\u001b[0m\n\u001b[0m    getAppConfig\u001b[0m\n    \u001b[32m  ✔\u001b[0m\u001b[90m should return Discord configuration\u001b[0m\n    \u001b[32m  ✔\u001b[0m\u001b[90m should return Zoom configuration\u001b[0m\n    \u001b[32m  ✔\u001b[0m\u001b[90m should return null for unsupported app\u001b[0m\n\u001b[0m    configureAudioRouting\u001b[0m\nAudio routing configured for Discord\n    \u001b[32m  ✔\u001b[0m\u001b[90m should configure audio routing for Discord\u001b[0m\nNo specific configuration found for Notepad\n    \u001b[32m  ✔\u001b[0m\u001b[90m should handle unsupported app gracefully\u001b[0m\n    \u001b[32m  ✔\u001b[0m\u001b[90m should handle errors gracefully\u001b[0m\n\u001b[0m    applyAudioRouting\u001b[0m\nmacOS audio routing configuration: { inputDevice: 'test', outputDevice: 'test' }\nNote: Full macOS audio routing requires Core Audio integration\n    \u001b[31m  45) should call Windows routing for win32 platform\u001b[0m\n    \u001b[32m  ✔\u001b[0m\u001b[90m should call macOS routing for darwin platform\u001b[0m\nmacOS audio routing configuration: { inputDevice: 'test', outputDevice: 'test' }\nNote: Full macOS audio routing requires Core Audio integration\n    \u001b[31m  46) should call Linux routing for linux platform\u001b[0m\n\u001b[0m    applyWindowsAudioRouting\u001b[0m\n    \u001b[31m  47) should execute PowerShell commands for Windows audio routing\u001b[0m\n    \u001b[32m  ✔\u001b[0m\u001b[90m should handle Windows routing errors\u001b[0m\n\u001b[0m    applyLinuxAudioRouting\u001b[0m\n    \u001b[31m  48) should execute pactl commands for Linux audio routing\u001b[0m\n    \u001b[32m  ✔\u001b[0m\u001b[90m should handle Linux routing errors\u001b[0m\n\u001b[0m    applyMacAudioRouting\u001b[0m\n    \u001b[32m  ✔\u001b[0m\u001b[90m should log configuration for macOS\u001b[0m\n\n\u001b[0m  Setup Automation Service\u001b[0m\n\u001b[0m    Platform Detection\u001b[0m\n    \u001b[31m  49) should detect macOS correctly\u001b[0m\n    \u001b[31m  50) should detect Windows correctly\u001b[0m\n    \u001b[31m  51) should detect Linux correctly\u001b[0m\n    \u001b[31m  52) should throw error for unsupported platform\u001b[0m\n\u001b[0m    Virtual Audio Installation\u001b[0m\n",
      "stderr": "Failed to load API keys: \"undefined\" is not valid JSON\nFailed to load API keys: \"undefined\" is not valid JSON\nFailed to load API keys: \"undefined\" is not valid JSON\nFailed to load API keys: \"undefined\" is not valid JSON\nFailed to load API keys: \"undefined\" is not valid JSON\nFailed to load API keys: \"undefined\" is not valid JSON\nFailed to load API keys: \"undefined\" is not valid JSON\nFailed to load API keys: \"undefined\" is not valid JSON\nFailed to load API keys: \"undefined\" is not valid JSON\nFailed to load API keys: \"undefined\" is not valid JSON\nAzure translation error: The request is not authorized because credentials are missing or invalid.\nAzure Translator initialization failed: Error: Azure Translator connection test failed: Azure Translator error: The request is not authorized because credentials are missing or invalid.\n    at AzureTranslator.testConnection (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/src/services/translation/azure-translator.js:79:19)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async AzureTranslator.initialize (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/src/services/translation/azure-translator.js:51:13)\n    at async Context.<anonymous> (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/tests/api/azure-api.test.js:84:13)\nAzure translation error: Connection refused\nAzure Translator initialization failed: Error: Azure Translator connection test failed: Azure Translator error: Connection refused\n    at AzureTranslator.testConnection (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/src/services/translation/azure-translator.js:79:19)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async AzureTranslator.initialize (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/src/services/translation/azure-translator.js:51:13)\n    at async Context.<anonymous> (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/tests/api/azure-api.test.js:106:13)\nAzure translation error: Nock: No match for request {\n  \"method\": \"POST\",\n  \"url\": \"https://api.cognitive.microsofttranslator.com/translate?api-version=3.0&to=es&category=general&profanityAction=NoAction&includeAlignment=false&includeSentenceLength=false&textType=plain&from=en\",\n  \"headers\": {\n    \"accept\": \"application/json, text/plain, */*\",\n    \"content-type\": \"application/json\",\n    \"ocp-apim-subscription-key\": \"test-api-key\",\n    \"ocp-apim-subscription-region\": \"eastus\",\n    \"x-clienttraceid\": \"f547a246-7654-4e8e-a196-7f13d9e487f8\",\n    \"user-agent\": \"axios/1.10.0\",\n    \"content-length\": \"18\",\n    \"accept-encoding\": \"gzip, compress, deflate, br\"\n  },\n  \"body\": \"[{\\\"text\\\":\\\"Hello\\\"}]\"\n}\nAzure Translator initialization failed: Error: Azure Translator connection test failed: Azure Translator error: Nock: No match for request {\n  \"method\": \"POST\",\n  \"url\": \"https://api.cognitive.microsofttranslator.com/translate?api-version=3.0&to=es&category=general&profanityAction=NoAction&includeAlignment=false&includeSentenceLength=false&textType=plain&from=en\",\n  \"headers\": {\n    \"accept\": \"application/json, text/plain, */*\",\n    \"content-type\": \"application/json\",\n    \"ocp-apim-subscription-key\": \"test-api-key\",\n    \"ocp-apim-subscription-region\": \"eastus\",\n    \"x-clienttraceid\": \"f547a246-7654-4e8e-a196-7f13d9e487f8\",\n    \"user-agent\": \"axios/1.10.0\",\n    \"content-length\": \"18\",\n    \"accept-encoding\": \"gzip, compress, deflate, br\"\n  },\n  \"body\": \"[{\\\"text\\\":\\\"Hello\\\"}]\"\n}\n    at AzureTranslator.testConnection (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/src/services/translation/azure-translator.js:79:19)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async AzureTranslator.initialize (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/src/services/translation/azure-translator.js:51:13)\n    at async Context.<anonymous> (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/tests/api/azure-api.test.js:137:13)\nFailed to load Azure Translator languages: AxiosError: Nock: No match for request {\n  \"method\": \"GET\",\n  \"url\": \"https://api.cognitive.microsofttranslator.com/languages?api-version=3.0&scope=translation\",\n  \"headers\": {\n    \"accept\": \"application/json, text/plain, */*\",\n    \"content-type\": \"application/json\",\n    \"user-agent\": \"axios/1.10.0\",\n    \"accept-encoding\": \"gzip, compress, deflate, br\"\n  }\n}\n    at AxiosError.from (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/axios/dist/node/axios.cjs:863:14)\n    at RedirectableRequest.handleRequestError (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/axios/dist/node/axios.cjs:3191:25)\n    at RedirectableRequest.emit (node:events:530:35)\n    at eventHandlers.<computed> (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/follow-redirects/index.js:49:24)\n    at OverriddenClientRequest.emit (node:events:518:28)\n    at Socket.<anonymous> (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/propagate/index.js:64:17)\n    at Socket.emit (node:events:518:28)\n    at /Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/nock/lib/socket.js:101:14\n    at process.processTicksAndRejections (node:internal/process/task_queues:85:11)\n    at Axios.request (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/axios/dist/node/axios.cjs:4280:41)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async AzureTranslator.loadSupportedLanguages (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/src/services/translation/azure-translator.js:90:30)\n    at async AzureTranslator.initialize (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/src/services/translation/azure-translator.js:52:13)\n    at async Context.<anonymous> (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/tests/api/azure-api.test.js:205:13) {\n  statusCode: 404,\n  status: 404,\n  code: 'ERR_NOCK_NO_MATCH',\n  config: {\n    transitional: {\n      silentJSONParsing: true,\n      forcedJSONParsing: true,\n      clarifyTimeoutError: false\n    },\n    adapter: [ 'xhr', 'http', 'fetch' ],\n    transformRequest: [ [Function: transformRequest] ],\n    transformResponse: [ [Function: transformResponse] ],\n    timeout: 10000,\n    xsrfCookieName: 'XSRF-TOKEN',\n    xsrfHeaderName: 'X-XSRF-TOKEN',\n    maxContentLength: -1,\n    maxBodyLength: -1,\n    env: { FormData: [Function [FormData]], Blob: [class Blob] },\n    validateStatus: [Function: validateStatus],\n    headers: Object [AxiosHeaders] {\n      Accept: 'application/json, text/plain, */*',\n      'Content-Type': 'application/json',\n      'User-Agent': 'axios/1.10.0',\n      'Accept-Encoding': 'gzip, compress, deflate, br'\n    },\n    method: 'get',\n    url: 'https://api.cognitive.microsofttranslator.com/languages?api-version=3.0&scope=translation',\n    allowAbsoluteUrls: true,\n    data: undefined\n  },\n  request: <ref *2> Writable {\n    _events: {\n      close: undefined,\n      error: [Function: handleRequestError],\n      prefinish: undefined,\n      finish: undefined,\n      drain: undefined,\n      response: [Function: handleResponse],\n      socket: [Array],\n      timeout: undefined,\n      abort: undefined\n    },\n    _writableState: WritableState {\n      highWaterMark: 65536,\n      length: 0,\n      corked: 0,\n      onwrite: [Function: bound onwrite],\n      writelen: 0,\n      bufferedIndex: 0,\n      pendingcb: 0,\n      [Symbol(kState)]: 17580812,\n      [Symbol(kBufferedValue)]: null\n    },\n    _maxListeners: undefined,\n    _options: {\n      maxRedirects: 21,\n      maxBodyLength: Infinity,\n      protocol: 'https:',\n      path: '/languages?api-version=3.0&scope=translation',\n      method: 'GET',\n      headers: [Object: null prototype],\n      agents: [Object],\n      auth: undefined,\n      family: undefined,\n      beforeRedirect: [Function: dispatchBeforeRedirect],\n      beforeRedirects: [Object],\n      hostname: 'api.cognitive.microsofttranslator.com',\n      port: '',\n      agent: undefined,\n      nativeProtocols: [Object],\n      pathname: '/languages',\n      search: '?api-version=3.0&scope=translation'\n    },\n    _ended: true,\n    _ending: true,\n    _redirectCount: 0,\n    _redirects: [],\n    _requestBodyLength: 0,\n    _requestBodyBuffers: [],\n    _eventsCount: 3,\n    _onNativeResponse: [Function (anonymous)],\n    _currentRequest: <ref *1> OverriddenClientRequest {\n      _events: [Object: null prototype],\n      _eventsCount: 7,\n      _maxListeners: undefined,\n      outputData: [],\n      outputSize: 0,\n      writable: true,\n      destroyed: true,\n      _last: false,\n      chunkedEncoding: false,\n      shouldKeepAlive: true,\n      maxRequestsOnConnectionReached: false,\n      _defaultKeepAlive: true,\n      useChunkedEncodingByDefault: true,\n      sendDate: false,\n      _removedConnection: false,\n      _removedContLen: false,\n      _removedTE: false,\n      strictContentLength: false,\n      _contentLength: null,\n      _hasBody: true,\n      _trailer: '',\n      finished: true,\n      _headerSent: false,\n      _closed: false,\n      _header: null,\n      _keepAliveTimeout: 0,\n      _onPendingData: [Function: nop],\n      path: '/languages?api-version=3.0&scope=translation',\n      method: 'GET',\n      write: [Function (anonymous)],\n      end: [Function (anonymous)],\n      flushHeaders: [Function (anonymous)],\n      req: [Circular *1],\n      options: [Object],\n      interceptors: [],\n      response: [IncomingMessage],\n      requestBodyBuffers: [],\n      playbackStarted: false,\n      readyToStartPlaybackOnSocketEvent: false,\n      _redirectable: [Circular *2],\n      [Symbol(shapeMode)]: false,\n      [Symbol(kCapture)]: false,\n      [Symbol(kBytesWritten)]: 0,\n      [Symbol(kNeedDrain)]: false,\n      [Symbol(corked)]: 0,\n      [Symbol(kChunkedBuffer)]: [],\n      [Symbol(kChunkedLength)]: 0,\n      [Symbol(kSocket)]: [Socket],\n      [Symbol(kOutHeaders)]: [Object: null prototype],\n      [Symbol(errored)]: null,\n      [Symbol(kHighWaterMark)]: 65536,\n      [Symbol(kRejectNonStandardBodyWrites)]: false,\n      [Symbol(kError)]: [Error]\n    },\n    _currentUrl: 'https://api.cognitive.microsofttranslator.com/languages?api-version=3.0&scope=translation',\n    _timeout: null,\n    [Symbol(shapeMode)]: true,\n    [Symbol(kCapture)]: false\n  },\n  cause: Error: Nock: No match for request {\n    \"method\": \"GET\",\n    \"url\": \"https://api.cognitive.microsofttranslator.com/languages?api-version=3.0&scope=translation\",\n    \"headers\": {\n      \"accept\": \"application/json, text/plain, */*\",\n      \"content-type\": \"application/json\",\n      \"user-agent\": \"axios/1.10.0\",\n      \"accept-encoding\": \"gzip, compress, deflate, br\"\n    }\n  }\n      at InterceptedRequestRouter.startPlayback (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/nock/lib/intercepted_request_router.js:346:21)\n      at InterceptedRequestRouter.maybeStartPlayback (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/nock/lib/intercepted_request_router.js:268:12)\n      at InterceptedRequestRouter.connectSocket (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/nock/lib/intercepted_request_router.js:140:12)\n      at /Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/nock/lib/intercepted_request_router.js:78:33\n      at process.processTicksAndRejections (node:internal/process/task_queues:85:11) {\n    code: 'ERR_NOCK_NO_MATCH',\n    status: 404,\n    statusCode: 404\n  }\n}\nAzure translation error: Nock: No match for request {\n  \"method\": \"POST\",\n  \"url\": \"https://api.cognitive.microsofttranslator.com/translate?api-version=3.0&to=es&category=general&profanityAction=NoAction&includeAlignment=false&includeSentenceLength=false&textType=plain&from=en\",\n  \"headers\": {\n    \"accept\": \"application/json, text/plain, */*\",\n    \"content-type\": \"application/json\",\n    \"ocp-apim-subscription-key\": \"test-api-key\",\n    \"ocp-apim-subscription-region\": \"eastus\",\n    \"x-clienttraceid\": \"470c3459-ebed-47fa-8b4b-f1fe2a6d7986\",\n    \"user-agent\": \"axios/1.10.0\",\n    \"content-length\": \"18\",\n    \"accept-encoding\": \"gzip, compress, deflate, br\"\n  },\n  \"body\": \"[{\\\"text\\\":\\\"Hello\\\"}]\"\n}\nAzure Translator translation failed: Error: Azure Translator error: Nock: No match for request {\n  \"method\": \"POST\",\n  \"url\": \"https://api.cognitive.microsofttranslator.com/translate?api-version=3.0&to=es&category=general&profanityAction=NoAction&includeAlignment=false&includeSentenceLength=false&textType=plain&from=en\",\n  \"headers\": {\n    \"accept\": \"application/json, text/plain, */*\",\n    \"content-type\": \"application/json\",\n    \"ocp-apim-subscription-key\": \"test-api-key\",\n    \"ocp-apim-subscription-region\": \"eastus\",\n    \"x-clienttraceid\": \"470c3459-ebed-47fa-8b4b-f1fe2a6d7986\",\n    \"user-agent\": \"axios/1.10.0\",\n    \"content-length\": \"18\",\n    \"accept-encoding\": \"gzip, compress, deflate, br\"\n  },\n  \"body\": \"[{\\\"text\\\":\\\"Hello\\\"}]\"\n}\n    at AzureTranslator.translateText (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/src/services/translation/azure-translator.js:223:19)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async AzureTranslator.translate (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/src/services/translation/azure-translator.js:129:20)\n    at async Context.<anonymous> (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/tests/api/azure-api.test.js:208:13)\nTranslation Manager initialization failed: TypeError: this.languagePairOptimizer.initialize is not a function\n    at TranslationManager.initialize (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/src/services/translation/translation-manager.js:79:46)\n    at async Context.<anonymous> (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/tests/integration/complete-pipeline.test.js:61:13)\nTranslation Manager initialization failed: TypeError: this.languagePairOptimizer.initialize is not a function\n    at TranslationManager.initialize (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/src/services/translation/translation-manager.js:79:46)\n    at async Context.<anonymous> (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/tests/integration/complete-pipeline.test.js:178:13)\nTranslation Manager initialization failed: TypeError: this.languagePairOptimizer.initialize is not a function\n    at TranslationManager.initialize (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/src/services/translation/translation-manager.js:79:46)\n    at async Context.<anonymous> (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/tests/integration/stt-translation.test.js:38:13)\nTranslation Manager initialization failed: TypeError: this.languagePairOptimizer.initialize is not a function\n    at TranslationManager.initialize (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/src/services/translation/translation-manager.js:79:46)\n    at async Context.<anonymous> (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/tests/integration/stt-translation.test.js:98:13)\nTranslation Manager initialization failed: TypeError: this.languagePairOptimizer.initialize is not a function\n    at TranslationManager.initialize (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/src/services/translation/translation-manager.js:79:46)\n    at async Context.<anonymous> (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/tests/integration/stt-translation.test.js:112:13)\nTranslation Manager initialization failed: TypeError: this.languagePairOptimizer.initialize is not a function\n    at TranslationManager.initialize (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/src/services/translation/translation-manager.js:79:46)\n    at async Context.<anonymous> (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/tests/integration/stt-translation.test.js:147:13)\nTranslation Manager initialization failed: TypeError: this.languagePairOptimizer.initialize is not a function\n    at TranslationManager.initialize (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/src/services/translation/translation-manager.js:79:46)\n    at async Context.<anonymous> (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/tests/performance/translation-performance.test.js:52:9)\nTranslation Manager initialization failed: TypeError: this.languagePairOptimizer.initialize is not a function\n    at TranslationManager.initialize (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/src/services/translation/translation-manager.js:79:46)\n    at async Context.<anonymous> (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/tests/performance/translation-performance.test.js:331:9)\nTranslation Manager initialization failed: TypeError: this.languagePairOptimizer.initialize is not a function\n    at TranslationManager.initialize (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/src/services/translation/translation-manager.js:79:46)\n    at async Context.<anonymous> (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/tests/unit/services/error-handling/translation-error-handling.test.js:22:9)\nError configuring audio routing for Discord: Error: Config error\n    at Context.<anonymous> (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/tests/unit/services/platform-detector.test.js:139:61)\n    at callFn (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/mocha/lib/runnable.js:364:21)\n    at Runnable.run (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/mocha/lib/runnable.js:352:5)\n    at Runner.runTest (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/mocha/lib/runner.js:677:10)\n    at /Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/mocha/lib/runner.js:800:12\n    at next (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/mocha/lib/runner.js:592:14)\n    at /Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/mocha/lib/runner.js:602:7\n    at next (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/mocha/lib/runner.js:485:14)\n    at Immediate._onImmediate (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/mocha/lib/runner.js:570:5)\n    at process.processImmediate (node:internal/timers:491:21)\nError applying Windows audio routing: Error: Command failed: powershell -Command \"Set-AudioDevice -ID 'CABLE Input'\"\n/bin/sh: powershell: command not found\n\n    at genericNodeError (node:internal/errors:983:15)\n    at wrappedFn (node:internal/errors:537:14)\n    at ChildProcess.exithandler (node:child_process:414:12)\n    at ChildProcess.emit (node:events:518:28)\n    at maybeClose (node:internal/child_process:1101:16)\n    at Socket.<anonymous> (node:internal/child_process:456:11)\n    at Socket.emit (node:events:518:28)\n    at Pipe.<anonymous> (node:net:351:12) {\n  code: 127,\n  killed: false,\n  signal: null,\n  cmd: `powershell -Command \"Set-AudioDevice -ID 'CABLE Input'\"`,\n  stdout: '',\n  stderr: '/bin/sh: powershell: command not found\\n'\n}\nError applying Windows audio routing: Error: Command failed: powershell -Command \"Set-AudioDevice -ID 'CABLE Input'\"\n/bin/sh: powershell: command not found\n\n    at genericNodeError (node:internal/errors:983:15)\n    at wrappedFn (node:internal/errors:537:14)\n    at ChildProcess.exithandler (node:child_process:414:12)\n    at ChildProcess.emit (node:events:518:28)\n    at maybeClose (node:internal/child_process:1101:16)\n    at Socket.<anonymous> (node:internal/child_process:456:11)\n    at Socket.emit (node:events:518:28)\n    at Pipe.<anonymous> (node:net:351:12) {\n  code: 127,\n  killed: false,\n  signal: null,\n  cmd: `powershell -Command \"Set-AudioDevice -ID 'CABLE Input'\"`,\n  stdout: '',\n  stderr: '/bin/sh: powershell: command not found\\n'\n}\nError applying Linux audio routing: Error: Command failed: pactl set-default-sink \"CABLE Output\"\n/bin/sh: pactl: command not found\n\n    at genericNodeError (node:internal/errors:983:15)\n    at wrappedFn (node:internal/errors:537:14)\n    at ChildProcess.exithandler (node:child_process:414:12)\n    at ChildProcess.emit (node:events:518:28)\n    at maybeClose (node:internal/child_process:1101:16)\n    at Socket.<anonymous> (node:internal/child_process:456:11)\n    at Socket.emit (node:events:518:28)\n    at Pipe.<anonymous> (node:net:351:12) {\n  code: 127,\n  killed: false,\n  signal: null,\n  cmd: 'pactl set-default-sink \"CABLE Output\"',\n  stdout: '',\n  stderr: '/bin/sh: pactl: command not found\\n'\n}\nError applying Linux audio routing: Error: Command failed: pactl set-default-sink \"CABLE Output\"\n/bin/sh: pactl: command not found\n\n    at genericNodeError (node:internal/errors:983:15)\n    at wrappedFn (node:internal/errors:537:14)\n    at ChildProcess.exithandler (node:child_process:414:12)\n    at ChildProcess.emit (node:events:518:28)\n    at maybeClose (node:internal/child_process:1101:16)\n    at Socket.<anonymous> (node:internal/child_process:456:11)\n    at Socket.emit (node:events:518:28)\n    at Pipe.<anonymous> (node:net:351:12) {\n  code: 127,\n  killed: false,\n  signal: null,\n  cmd: 'pactl set-default-sink \"CABLE Output\"',\n  stdout: '',\n  stderr: '/bin/sh: pactl: command not found\\n'\n}\n(node:28510) [DEP0174] DeprecationWarning: Calling promisify on a function that returns a Promise is likely a mistake.\n(Use `node --trace-deprecation ...` to show where the warning was created)\n",
      "success": false,
      "error": "Test suite failed with exit code null"
    },
    "e2e": {
      "name": "e2e",
      "description": "End-to-End Tests",
      "command": "npm run test:e2e",
      "startTime": "2025-07-04T23:07:15.546Z",
      "endTime": "2025-07-04T23:09:15.565Z",
      "duration": 120019,
      "exitCode": null,
      "stdout": "\n> universal-translator@1.0.0 test:e2e\n> mocha --require tests/test-helper.js 'tests/e2e/**/*.test.js' --timeout 60000 --exit\n\n\n\u001b[0m\u001b[0m\n\u001b[0m  End-to-End Tests\u001b[0m\n  \u001b[36m  - should be implemented with Playwright\u001b[0m\n\n\u001b[0m  E2E Test Placeholder\u001b[0m\n  \u001b[32m  ✔\u001b[0m\u001b[90m should pass\u001b[0m\n\n\u001b[0m  Translation App E2E Tests\u001b[0m\n  \u001b[36m  - should perform a complete translation flow\u001b[0m\n  \u001b[36m  - should handle errors gracefully\u001b[0m\n\n\u001b[0m  E2E Test Placeholder\u001b[0m\n  \u001b[32m  ✔\u001b[0m\u001b[90m should pass\u001b[0m\n\n\u001b[0m  Accessibility Tests\u001b[0m\n\u001b[0m    Main Interface\u001b[0m\n    \u001b[31m  1) \"before each\" hook for \"should have no critical accessibility violations\"\u001b[0m\n\u001b[0m    Translation Form\u001b[0m\n    \u001b[31m  2) \"before each\" hook for \"should have accessible form controls\"\u001b[0m\n\u001b[0m    Results Display\u001b[0m\n    \u001b[31m  3) \"before each\" hook for \"should have screen reader accessible results\"\u001b[0m\n\u001b[0m    Responsive Design\u001b[0m\n    \u001b[31m  4) should be accessible on mobile viewport\u001b[0m\n    \u001b[31m  5) should maintain touch target sizes on mobile\u001b[0m\n\n\u001b[0m  Azure Translator API Tests\u001b[0m\n\u001b[0m    Translation API\u001b[0m\n    \u001b[31m  6) should make correct API calls to translate text\u001b[0m\n    \u001b[31m  7) should handle API errors correctly\u001b[0m\n    \u001b[31m  8) should handle network errors gracefully\u001b[0m\n\u001b[0m    Language Detection API\u001b[0m\n    \u001b[31m  9) should detect language correctly\u001b[0m\n\u001b[0m    Supported Languages API\u001b[0m\nAzure Translator supports 3 languages\n    \u001b[32m  ✔\u001b[0m\u001b[90m should retrieve supported languages\u001b[0m\n\u001b[0m    Authentication\u001b[0m\n    \u001b[31m  10) should include correct authentication headers\u001b[0m\n\n\u001b[0m  Example Test Suite\u001b[0m\n  \u001b[32m  ✔\u001b[0m\u001b[90m should pass a simple test\u001b[0m\n  \u001b[32m  ✔\u001b[0m\u001b[90m should demonstrate sinon stub\u001b[0m\n\n\u001b[0m  Complete Pipeline Integration Tests\u001b[0m\n\u001b[0m    End-to-end audio translation pipeline\u001b[0m\nInitializing translation services...\ndeepl translation service initialized: { success: true }\ngpt4o translation service initialized: { success: true }\ngoogle translation service initialized: { success: true }\nazure translation service initialized: { success: true }\n    \u001b[31m  11) should process audio through the complete pipeline\u001b[0m\n    \u001b[31m  12) should handle service failover in the pipeline\u001b[0m\nInitializing translation services...\ndeepl translation service initialized: { success: true }\ngpt4o translation service initialized: { success: true }\ngoogle translation service initialized: { success: true }\nazure translation service initialized: { success: true }\n    \u001b[31m  13) should maintain conversation context across multiple exchanges\u001b[0m\n\n\u001b[0m  Translation Integration Tests\u001b[0m\n\u001b[0m    End-to-end translation workflow\u001b[0m\nInitializing translation services...\ndeepl translation service initialized: { success: true }\ngpt4o translation service initialized: { success: true }\ngoogle translation service initialized: { success: true }\nazure translation service initialized: { success: true }\n    \u001b[31m  14) should complete the full translation pipeline\u001b[0m\nInitializing translation services...\ndeepl translation service initialized: { success: true }\ngpt4o translation service initialized: { success: true }\ngoogle translation service initialized: { success: true }\nazure translation service initialized: { success: true }\n    \u001b[31m  15) should handle service failover correctly\u001b[0m\nInitializing translation services...\ndeepl translation service initialized: { success: true }\ngpt4o translation service initialized: { success: true }\ngoogle translation service initialized: { success: true }\nazure translation service initialized: { success: true }\n    \u001b[31m  16) should maintain conversation context between translations\u001b[0m\nInitializing translation services...\ndeepl translation service initialized: { success: true }\ngpt4o translation service initialized: { success: true }\ngoogle translation service initialized: { success: true }\nazure translation service initialized: { success: true }\n    \u001b[31m  17) should handle different priority settings\u001b[0m\n\n\u001b[0m  Translation Performance Tests\u001b[0m\n\u001b[0m    Translation Service Latency\u001b[0m\nInitializing translation services...\ndeepl translation service initialized: { success: true }\ngpt4o translation service initialized: { success: true }\ngoogle translation service initialized: { success: true }\nazure translation service initialized: { success: true }\n    \u001b[31m  18) \"before each\" hook for \"should measure individual service latency\"\u001b[0m\n\n\u001b[0m  Translation Cache Performance\u001b[0m\nInitializing translation services...\ndeepl translation service initialized: { success: true }\ngpt4o translation service initialized: { success: true }\ngoogle translation service initialized: { success: true }\nazure translation service initialized: { success: true }\n  \u001b[31m  19) \"before each\" hook for \"should improve performance with caching\"\u001b[0m\n\n\u001b[0m  API Key Security\u001b[0m\n\u001b[0m    API key storage\u001b[0m\n    \u001b[31m  20) should encrypt API keys before storing\u001b[0m\n    \u001b[31m  21) should store API keys in the correct location\u001b[0m\n    \u001b[31m  22) should not store API keys in plain text\u001b[0m\n\u001b[0m    API key retrieval\u001b[0m\n    \u001b[31m  23) should decrypt API keys when retrieving\u001b[0m\n    \u001b[31m  24) should handle missing API keys gracefully\u001b[0m\n    \u001b[31m  25) should handle decryption errors securely\u001b[0m\n\u001b[0m    API key validation\u001b[0m\n    \u001b[31m  26) should validate API key format\u001b[0m\n    \u001b[31m  27) should detect potentially compromised API keys\u001b[0m\n\u001b[0m    API key rotation\u001b[0m\n    \u001b[31m  28) should support API key rotation\u001b[0m\n    \u001b[32m  ✔\u001b[0m\u001b[90m should not store invalid API keys during rotation\u001b[0m\n\n\u001b[0m  App Security\u001b[0m\n\u001b[0m    Input sanitization\u001b[0m\n    \u001b[31m  29) should sanitize user inputs to prevent injection attacks\u001b[0m\n    \u001b[31m  30) should sanitize file paths to prevent path traversal\u001b[0m\n\u001b[0m    Content Security Policy\u001b[0m\n    \u001b[31m  31) should validate CSP headers\u001b[0m\n\u001b[0m    Secure storage\u001b[0m\n    \u001b[31m  32) should use secure storage for sensitive data\u001b[0m\n\n\u001b[0m  Network Security\u001b[0m\n\u001b[0m    HTTPS verification\u001b[0m\n    \u001b[31m  33) should verify HTTPS certificates by default\u001b[0m\n    \u001b[31m  34) should detect and prevent SSL stripping\u001b[0m\n\u001b[0m    Authentication header handling\u001b[0m\n    \u001b[31m  35) should safely handle authentication headers\u001b[0m\n\n\u001b[0m  Complete Translation Pipeline\u001b[0m\n\u001b[0m    Initialization\u001b[0m\n    \u001b[31m  36) \"before each\" hook for \"should initialize pipeline with default settings\"\u001b[0m\n\n\u001b[0m  Translation Error Handling\u001b[0m\n\u001b[0m    Service failure handling\u001b[0m\nInitializing translation services...\ndeepl translation service initialized: { success: true }\ngpt4o translation service initialized: { success: true }\ngoogle translation service initialized: { success: true }\nazure translation service initialized: { success: true }\n    \u001b[31m  37) \"before each\" hook for \"should handle all services failing\"\u001b[0m\n\n\u001b[0m  PlatformDetector\u001b[0m\n\u001b[0m    constructor\u001b[0m\n    \u001b[32m  ✔\u001b[0m\u001b[90m should initialize with supported apps list\u001b[0m\n    \u001b[31m  38) should set platform property\u001b[0m\n\u001b[0m    detectActiveApp\u001b[0m\n    \u001b[31m  39) should detect Discord on Windows\u001b[0m\n    \u001b[31m  40) should detect Zoom on macOS\u001b[0m\n    \u001b[31m  41) should detect Teams on Linux\u001b[0m\n    \u001b[31m  42) should return null when no supported app is detected\u001b[0m\n    \u001b[31m  43) should handle exec errors gracefully\u001b[0m\n    \u001b[31m  44) should handle unsupported platform\u001b[0m\n\u001b[0m    getAppConfig\u001b[0m\n    \u001b[32m  ✔\u001b[0m\u001b[90m should return Discord configuration\u001b[0m\n    \u001b[32m  ✔\u001b[0m\u001b[90m should return Zoom configuration\u001b[0m\n    \u001b[32m  ✔\u001b[0m\u001b[90m should return null for unsupported app\u001b[0m\n\u001b[0m    configureAudioRouting\u001b[0m\nAudio routing configured for Discord\n    \u001b[32m  ✔\u001b[0m\u001b[90m should configure audio routing for Discord\u001b[0m\nNo specific configuration found for Notepad\n    \u001b[32m  ✔\u001b[0m\u001b[90m should handle unsupported app gracefully\u001b[0m\n    \u001b[32m  ✔\u001b[0m\u001b[90m should handle errors gracefully\u001b[0m\n\u001b[0m    applyAudioRouting\u001b[0m\nmacOS audio routing configuration: { inputDevice: 'test', outputDevice: 'test' }\nNote: Full macOS audio routing requires Core Audio integration\n    \u001b[31m  45) should call Windows routing for win32 platform\u001b[0m\n    \u001b[32m  ✔\u001b[0m\u001b[90m should call macOS routing for darwin platform\u001b[0m\nmacOS audio routing configuration: { inputDevice: 'test', outputDevice: 'test' }\nNote: Full macOS audio routing requires Core Audio integration\n    \u001b[31m  46) should call Linux routing for linux platform\u001b[0m\n\u001b[0m    applyWindowsAudioRouting\u001b[0m\n    \u001b[31m  47) should execute PowerShell commands for Windows audio routing\u001b[0m\n    \u001b[32m  ✔\u001b[0m\u001b[90m should handle Windows routing errors\u001b[0m\n\u001b[0m    applyLinuxAudioRouting\u001b[0m\n    \u001b[31m  48) should execute pactl commands for Linux audio routing\u001b[0m\n    \u001b[32m  ✔\u001b[0m\u001b[90m should handle Linux routing errors\u001b[0m\n\u001b[0m    applyMacAudioRouting\u001b[0m\n    \u001b[32m  ✔\u001b[0m\u001b[90m should log configuration for macOS\u001b[0m\n\n\u001b[0m  Setup Automation Service\u001b[0m\n\u001b[0m    Platform Detection\u001b[0m\n    \u001b[31m  49) should detect macOS correctly\u001b[0m\n    \u001b[31m  50) should detect Windows correctly\u001b[0m\n    \u001b[31m  51) should detect Linux correctly\u001b[0m\n    \u001b[31m  52) should throw error for unsupported platform\u001b[0m\n\u001b[0m    Virtual Audio Installation\u001b[0m\n    \u001b[31m  53) should install VB-Audio Cable on Windows\u001b[0m\n",
      "stderr": "Azure translation error: The request is not authorized because credentials are missing or invalid.\nAzure Translator initialization failed: Error: Azure Translator connection test failed: Azure Translator error: The request is not authorized because credentials are missing or invalid.\n    at AzureTranslator.testConnection (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/src/services/translation/azure-translator.js:79:19)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async AzureTranslator.initialize (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/src/services/translation/azure-translator.js:51:13)\n    at async Context.<anonymous> (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/tests/api/azure-api.test.js:84:13)\nAzure translation error: Connection refused\nAzure Translator initialization failed: Error: Azure Translator connection test failed: Azure Translator error: Connection refused\n    at AzureTranslator.testConnection (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/src/services/translation/azure-translator.js:79:19)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async AzureTranslator.initialize (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/src/services/translation/azure-translator.js:51:13)\n    at async Context.<anonymous> (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/tests/api/azure-api.test.js:106:13)\nAzure translation error: Nock: No match for request {\n  \"method\": \"POST\",\n  \"url\": \"https://api.cognitive.microsofttranslator.com/translate?api-version=3.0&to=es&category=general&profanityAction=NoAction&includeAlignment=false&includeSentenceLength=false&textType=plain&from=en\",\n  \"headers\": {\n    \"accept\": \"application/json, text/plain, */*\",\n    \"content-type\": \"application/json\",\n    \"ocp-apim-subscription-key\": \"test-api-key\",\n    \"ocp-apim-subscription-region\": \"eastus\",\n    \"x-clienttraceid\": \"707713a9-d118-4daa-9ab6-290af40387bc\",\n    \"user-agent\": \"axios/1.10.0\",\n    \"content-length\": \"18\",\n    \"accept-encoding\": \"gzip, compress, deflate, br\"\n  },\n  \"body\": \"[{\\\"text\\\":\\\"Hello\\\"}]\"\n}\nAzure Translator initialization failed: Error: Azure Translator connection test failed: Azure Translator error: Nock: No match for request {\n  \"method\": \"POST\",\n  \"url\": \"https://api.cognitive.microsofttranslator.com/translate?api-version=3.0&to=es&category=general&profanityAction=NoAction&includeAlignment=false&includeSentenceLength=false&textType=plain&from=en\",\n  \"headers\": {\n    \"accept\": \"application/json, text/plain, */*\",\n    \"content-type\": \"application/json\",\n    \"ocp-apim-subscription-key\": \"test-api-key\",\n    \"ocp-apim-subscription-region\": \"eastus\",\n    \"x-clienttraceid\": \"707713a9-d118-4daa-9ab6-290af40387bc\",\n    \"user-agent\": \"axios/1.10.0\",\n    \"content-length\": \"18\",\n    \"accept-encoding\": \"gzip, compress, deflate, br\"\n  },\n  \"body\": \"[{\\\"text\\\":\\\"Hello\\\"}]\"\n}\n    at AzureTranslator.testConnection (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/src/services/translation/azure-translator.js:79:19)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async AzureTranslator.initialize (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/src/services/translation/azure-translator.js:51:13)\n    at async Context.<anonymous> (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/tests/api/azure-api.test.js:137:13)\nFailed to load Azure Translator languages: AxiosError: Nock: No match for request {\n  \"method\": \"GET\",\n  \"url\": \"https://api.cognitive.microsofttranslator.com/languages?api-version=3.0&scope=translation\",\n  \"headers\": {\n    \"accept\": \"application/json, text/plain, */*\",\n    \"content-type\": \"application/json\",\n    \"user-agent\": \"axios/1.10.0\",\n    \"accept-encoding\": \"gzip, compress, deflate, br\"\n  }\n}\n    at AxiosError.from (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/axios/dist/node/axios.cjs:863:14)\n    at RedirectableRequest.handleRequestError (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/axios/dist/node/axios.cjs:3191:25)\n    at RedirectableRequest.emit (node:events:530:35)\n    at eventHandlers.<computed> (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/follow-redirects/index.js:49:24)\n    at OverriddenClientRequest.emit (node:events:518:28)\n    at Socket.<anonymous> (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/propagate/index.js:64:17)\n    at Socket.emit (node:events:518:28)\n    at /Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/nock/lib/socket.js:101:14\n    at process.processTicksAndRejections (node:internal/process/task_queues:85:11)\n    at Axios.request (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/axios/dist/node/axios.cjs:4280:41)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async AzureTranslator.loadSupportedLanguages (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/src/services/translation/azure-translator.js:90:30)\n    at async AzureTranslator.initialize (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/src/services/translation/azure-translator.js:52:13)\n    at async Context.<anonymous> (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/tests/api/azure-api.test.js:205:13) {\n  statusCode: 404,\n  status: 404,\n  code: 'ERR_NOCK_NO_MATCH',\n  config: {\n    transitional: {\n      silentJSONParsing: true,\n      forcedJSONParsing: true,\n      clarifyTimeoutError: false\n    },\n    adapter: [ 'xhr', 'http', 'fetch' ],\n    transformRequest: [ [Function: transformRequest] ],\n    transformResponse: [ [Function: transformResponse] ],\n    timeout: 10000,\n    xsrfCookieName: 'XSRF-TOKEN',\n    xsrfHeaderName: 'X-XSRF-TOKEN',\n    maxContentLength: -1,\n    maxBodyLength: -1,\n    env: { FormData: [Function [FormData]], Blob: [class Blob] },\n    validateStatus: [Function: validateStatus],\n    headers: Object [AxiosHeaders] {\n      Accept: 'application/json, text/plain, */*',\n      'Content-Type': 'application/json',\n      'User-Agent': 'axios/1.10.0',\n      'Accept-Encoding': 'gzip, compress, deflate, br'\n    },\n    method: 'get',\n    url: 'https://api.cognitive.microsofttranslator.com/languages?api-version=3.0&scope=translation',\n    allowAbsoluteUrls: true,\n    data: undefined\n  },\n  request: <ref *2> Writable {\n    _events: {\n      close: undefined,\n      error: [Function: handleRequestError],\n      prefinish: undefined,\n      finish: undefined,\n      drain: undefined,\n      response: [Function: handleResponse],\n      socket: [Array],\n      timeout: undefined,\n      abort: undefined\n    },\n    _writableState: WritableState {\n      highWaterMark: 65536,\n      length: 0,\n      corked: 0,\n      onwrite: [Function: bound onwrite],\n      writelen: 0,\n      bufferedIndex: 0,\n      pendingcb: 0,\n      [Symbol(kState)]: 17580812,\n      [Symbol(kBufferedValue)]: null\n    },\n    _maxListeners: undefined,\n    _options: {\n      maxRedirects: 21,\n      maxBodyLength: Infinity,\n      protocol: 'https:',\n      path: '/languages?api-version=3.0&scope=translation',\n      method: 'GET',\n      headers: [Object: null prototype],\n      agents: [Object],\n      auth: undefined,\n      family: undefined,\n      beforeRedirect: [Function: dispatchBeforeRedirect],\n      beforeRedirects: [Object],\n      hostname: 'api.cognitive.microsofttranslator.com',\n      port: '',\n      agent: undefined,\n      nativeProtocols: [Object],\n      pathname: '/languages',\n      search: '?api-version=3.0&scope=translation'\n    },\n    _ended: true,\n    _ending: true,\n    _redirectCount: 0,\n    _redirects: [],\n    _requestBodyLength: 0,\n    _requestBodyBuffers: [],\n    _eventsCount: 3,\n    _onNativeResponse: [Function (anonymous)],\n    _currentRequest: <ref *1> OverriddenClientRequest {\n      _events: [Object: null prototype],\n      _eventsCount: 7,\n      _maxListeners: undefined,\n      outputData: [],\n      outputSize: 0,\n      writable: true,\n      destroyed: true,\n      _last: false,\n      chunkedEncoding: false,\n      shouldKeepAlive: true,\n      maxRequestsOnConnectionReached: false,\n      _defaultKeepAlive: true,\n      useChunkedEncodingByDefault: true,\n      sendDate: false,\n      _removedConnection: false,\n      _removedContLen: false,\n      _removedTE: false,\n      strictContentLength: false,\n      _contentLength: null,\n      _hasBody: true,\n      _trailer: '',\n      finished: true,\n      _headerSent: false,\n      _closed: false,\n      _header: null,\n      _keepAliveTimeout: 0,\n      _onPendingData: [Function: nop],\n      path: '/languages?api-version=3.0&scope=translation',\n      method: 'GET',\n      write: [Function (anonymous)],\n      end: [Function (anonymous)],\n      flushHeaders: [Function (anonymous)],\n      req: [Circular *1],\n      options: [Object],\n      interceptors: [],\n      response: [IncomingMessage],\n      requestBodyBuffers: [],\n      playbackStarted: false,\n      readyToStartPlaybackOnSocketEvent: false,\n      _redirectable: [Circular *2],\n      [Symbol(shapeMode)]: false,\n      [Symbol(kCapture)]: false,\n      [Symbol(kBytesWritten)]: 0,\n      [Symbol(kNeedDrain)]: false,\n      [Symbol(corked)]: 0,\n      [Symbol(kChunkedBuffer)]: [],\n      [Symbol(kChunkedLength)]: 0,\n      [Symbol(kSocket)]: [Socket],\n      [Symbol(kOutHeaders)]: [Object: null prototype],\n      [Symbol(errored)]: null,\n      [Symbol(kHighWaterMark)]: 65536,\n      [Symbol(kRejectNonStandardBodyWrites)]: false,\n      [Symbol(kError)]: [Error]\n    },\n    _currentUrl: 'https://api.cognitive.microsofttranslator.com/languages?api-version=3.0&scope=translation',\n    _timeout: null,\n    [Symbol(shapeMode)]: true,\n    [Symbol(kCapture)]: false\n  },\n  cause: Error: Nock: No match for request {\n    \"method\": \"GET\",\n    \"url\": \"https://api.cognitive.microsofttranslator.com/languages?api-version=3.0&scope=translation\",\n    \"headers\": {\n      \"accept\": \"application/json, text/plain, */*\",\n      \"content-type\": \"application/json\",\n      \"user-agent\": \"axios/1.10.0\",\n      \"accept-encoding\": \"gzip, compress, deflate, br\"\n    }\n  }\n      at InterceptedRequestRouter.startPlayback (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/nock/lib/intercepted_request_router.js:346:21)\n      at InterceptedRequestRouter.maybeStartPlayback (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/nock/lib/intercepted_request_router.js:268:12)\n      at InterceptedRequestRouter.connectSocket (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/nock/lib/intercepted_request_router.js:140:12)\n      at /Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/nock/lib/intercepted_request_router.js:78:33\n      at process.processTicksAndRejections (node:internal/process/task_queues:85:11) {\n    code: 'ERR_NOCK_NO_MATCH',\n    status: 404,\n    statusCode: 404\n  }\n}\nAzure translation error: Nock: No match for request {\n  \"method\": \"POST\",\n  \"url\": \"https://api.cognitive.microsofttranslator.com/translate?api-version=3.0&to=es&category=general&profanityAction=NoAction&includeAlignment=false&includeSentenceLength=false&textType=plain&from=en\",\n  \"headers\": {\n    \"accept\": \"application/json, text/plain, */*\",\n    \"content-type\": \"application/json\",\n    \"ocp-apim-subscription-key\": \"test-api-key\",\n    \"ocp-apim-subscription-region\": \"eastus\",\n    \"x-clienttraceid\": \"0396d915-4f4c-4e38-a183-b30e4447a5f9\",\n    \"user-agent\": \"axios/1.10.0\",\n    \"content-length\": \"18\",\n    \"accept-encoding\": \"gzip, compress, deflate, br\"\n  },\n  \"body\": \"[{\\\"text\\\":\\\"Hello\\\"}]\"\n}\nAzure Translator translation failed: Error: Azure Translator error: Nock: No match for request {\n  \"method\": \"POST\",\n  \"url\": \"https://api.cognitive.microsofttranslator.com/translate?api-version=3.0&to=es&category=general&profanityAction=NoAction&includeAlignment=false&includeSentenceLength=false&textType=plain&from=en\",\n  \"headers\": {\n    \"accept\": \"application/json, text/plain, */*\",\n    \"content-type\": \"application/json\",\n    \"ocp-apim-subscription-key\": \"test-api-key\",\n    \"ocp-apim-subscription-region\": \"eastus\",\n    \"x-clienttraceid\": \"0396d915-4f4c-4e38-a183-b30e4447a5f9\",\n    \"user-agent\": \"axios/1.10.0\",\n    \"content-length\": \"18\",\n    \"accept-encoding\": \"gzip, compress, deflate, br\"\n  },\n  \"body\": \"[{\\\"text\\\":\\\"Hello\\\"}]\"\n}\n    at AzureTranslator.translateText (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/src/services/translation/azure-translator.js:223:19)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async AzureTranslator.translate (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/src/services/translation/azure-translator.js:129:20)\n    at async Context.<anonymous> (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/tests/api/azure-api.test.js:208:13)\nTranslation Manager initialization failed: TypeError: this.languagePairOptimizer.initialize is not a function\n    at TranslationManager.initialize (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/src/services/translation/translation-manager.js:79:46)\n    at async Context.<anonymous> (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/tests/integration/complete-pipeline.test.js:61:13)\nTranslation Manager initialization failed: TypeError: this.languagePairOptimizer.initialize is not a function\n    at TranslationManager.initialize (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/src/services/translation/translation-manager.js:79:46)\n    at async Context.<anonymous> (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/tests/integration/complete-pipeline.test.js:178:13)\nTranslation Manager initialization failed: TypeError: this.languagePairOptimizer.initialize is not a function\n    at TranslationManager.initialize (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/src/services/translation/translation-manager.js:79:46)\n    at async Context.<anonymous> (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/tests/integration/stt-translation.test.js:38:13)\nTranslation Manager initialization failed: TypeError: this.languagePairOptimizer.initialize is not a function\n    at TranslationManager.initialize (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/src/services/translation/translation-manager.js:79:46)\n    at async Context.<anonymous> (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/tests/integration/stt-translation.test.js:98:13)\nTranslation Manager initialization failed: TypeError: this.languagePairOptimizer.initialize is not a function\n    at TranslationManager.initialize (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/src/services/translation/translation-manager.js:79:46)\n    at async Context.<anonymous> (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/tests/integration/stt-translation.test.js:112:13)\nTranslation Manager initialization failed: TypeError: this.languagePairOptimizer.initialize is not a function\n    at TranslationManager.initialize (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/src/services/translation/translation-manager.js:79:46)\n    at async Context.<anonymous> (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/tests/integration/stt-translation.test.js:147:13)\nTranslation Manager initialization failed: TypeError: this.languagePairOptimizer.initialize is not a function\n    at TranslationManager.initialize (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/src/services/translation/translation-manager.js:79:46)\n    at async Context.<anonymous> (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/tests/performance/translation-performance.test.js:52:9)\nTranslation Manager initialization failed: TypeError: this.languagePairOptimizer.initialize is not a function\n    at TranslationManager.initialize (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/src/services/translation/translation-manager.js:79:46)\n    at async Context.<anonymous> (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/tests/performance/translation-performance.test.js:331:9)\nFailed to load API keys: \"undefined\" is not valid JSON\nFailed to load API keys: \"undefined\" is not valid JSON\nFailed to load API keys: \"undefined\" is not valid JSON\nFailed to load API keys: \"undefined\" is not valid JSON\nFailed to load API keys: \"undefined\" is not valid JSON\nFailed to load API keys: \"undefined\" is not valid JSON\nFailed to load API keys: \"undefined\" is not valid JSON\nFailed to load API keys: \"undefined\" is not valid JSON\nFailed to load API keys: \"undefined\" is not valid JSON\nFailed to load API keys: \"undefined\" is not valid JSON\nTranslation Manager initialization failed: TypeError: this.languagePairOptimizer.initialize is not a function\n    at TranslationManager.initialize (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/src/services/translation/translation-manager.js:79:46)\n    at async Context.<anonymous> (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/tests/unit/services/error-handling/translation-error-handling.test.js:22:9)\nError configuring audio routing for Discord: Error: Config error\n    at Context.<anonymous> (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/tests/unit/services/platform-detector.test.js:139:61)\n    at callFn (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/mocha/lib/runnable.js:364:21)\n    at Runnable.run (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/mocha/lib/runnable.js:352:5)\n    at Runner.runTest (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/mocha/lib/runner.js:677:10)\n    at /Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/mocha/lib/runner.js:800:12\n    at next (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/mocha/lib/runner.js:592:14)\n    at /Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/mocha/lib/runner.js:602:7\n    at next (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/mocha/lib/runner.js:485:14)\n    at Immediate._onImmediate (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/mocha/lib/runner.js:570:5)\n    at process.processImmediate (node:internal/timers:491:21)\nError applying Windows audio routing: Error: Command failed: powershell -Command \"Set-AudioDevice -ID 'CABLE Input'\"\n/bin/sh: powershell: command not found\n\n    at genericNodeError (node:internal/errors:983:15)\n    at wrappedFn (node:internal/errors:537:14)\n    at ChildProcess.exithandler (node:child_process:414:12)\n    at ChildProcess.emit (node:events:518:28)\n    at maybeClose (node:internal/child_process:1101:16)\n    at Socket.<anonymous> (node:internal/child_process:456:11)\n    at Socket.emit (node:events:518:28)\n    at Pipe.<anonymous> (node:net:351:12) {\n  code: 127,\n  killed: false,\n  signal: null,\n  cmd: `powershell -Command \"Set-AudioDevice -ID 'CABLE Input'\"`,\n  stdout: '',\n  stderr: '/bin/sh: powershell: command not found\\n'\n}\nError applying Windows audio routing: Error: Command failed: powershell -Command \"Set-AudioDevice -ID 'CABLE Input'\"\n/bin/sh: powershell: command not found\n\n    at genericNodeError (node:internal/errors:983:15)\n    at wrappedFn (node:internal/errors:537:14)\n    at ChildProcess.exithandler (node:child_process:414:12)\n    at ChildProcess.emit (node:events:518:28)\n    at maybeClose (node:internal/child_process:1101:16)\n    at Socket.<anonymous> (node:internal/child_process:456:11)\n    at Socket.emit (node:events:518:28)\n    at Pipe.<anonymous> (node:net:351:12) {\n  code: 127,\n  killed: false,\n  signal: null,\n  cmd: `powershell -Command \"Set-AudioDevice -ID 'CABLE Input'\"`,\n  stdout: '',\n  stderr: '/bin/sh: powershell: command not found\\n'\n}\nError applying Linux audio routing: Error: Command failed: pactl set-default-sink \"CABLE Output\"\n/bin/sh: pactl: command not found\n\n    at genericNodeError (node:internal/errors:983:15)\n    at wrappedFn (node:internal/errors:537:14)\n    at ChildProcess.exithandler (node:child_process:414:12)\n    at ChildProcess.emit (node:events:518:28)\n    at maybeClose (node:internal/child_process:1101:16)\n    at Socket.<anonymous> (node:internal/child_process:456:11)\n    at Socket.emit (node:events:518:28)\n    at Pipe.<anonymous> (node:net:351:12) {\n  code: 127,\n  killed: false,\n  signal: null,\n  cmd: 'pactl set-default-sink \"CABLE Output\"',\n  stdout: '',\n  stderr: '/bin/sh: pactl: command not found\\n'\n}\nError applying Linux audio routing: Error: Command failed: pactl set-default-sink \"CABLE Output\"\n/bin/sh: pactl: command not found\n\n    at genericNodeError (node:internal/errors:983:15)\n    at wrappedFn (node:internal/errors:537:14)\n    at ChildProcess.exithandler (node:child_process:414:12)\n    at ChildProcess.emit (node:events:518:28)\n    at maybeClose (node:internal/child_process:1101:16)\n    at ChildProcess._handle.onexit (node:internal/child_process:304:5) {\n  code: 127,\n  killed: false,\n  signal: null,\n  cmd: 'pactl set-default-sink \"CABLE Output\"',\n  stdout: '',\n  stderr: '/bin/sh: pactl: command not found\\n'\n}\n(node:29339) [DEP0174] DeprecationWarning: Calling promisify on a function that returns a Promise is likely a mistake.\n(Use `node --trace-deprecation ...` to show where the warning was created)\n(node:29339) [DEP0174] DeprecationWarning: Calling promisify on a function that returns a Promise is likely a mistake.\n",
      "success": false,
      "error": "Test suite failed with exit code null"
    },
    "accessibility": {
      "name": "accessibility",
      "description": "Accessibility Tests",
      "command": "npm run test:accessibility",
      "startTime": "2025-07-04T23:09:15.566Z",
      "endTime": "2025-07-04T23:11:09.624Z",
      "duration": 114058,
      "exitCode": 1,
      "stdout": "\n> universal-translator@1.0.0 test:accessibility\n> cross-env NODE_ENV=test mocha 'tests/accessibility/**/*.test.js' --reporter mochawesome\n\n\n\u001b[0m\u001b[0m\n\u001b[0m  Accessibility Tests\u001b[0m\n\u001b[0m    Main Interface\u001b[0m\n    \u001b[31m  1) \"before each\" hook for \"should have no critical accessibility violations\"\u001b[0m\n\u001b[0m    Translation Form\u001b[0m\n    \u001b[31m  2) \"before each\" hook for \"should have accessible form controls\"\u001b[0m\n\u001b[0m    Results Display\u001b[0m\n    \u001b[31m  3) \"before each\" hook for \"should have screen reader accessible results\"\u001b[0m\n\u001b[0m    Responsive Design\u001b[0m\n    \u001b[31m  4) should be accessible on mobile viewport\u001b[0m\n    \u001b[31m  5) should maintain touch target sizes on mobile\u001b[0m\n\n\u001b[0m  Azure Translator API Tests\u001b[0m\n\u001b[0m    Translation API\u001b[0m\n    \u001b[31m  6) should make correct API calls to translate text\u001b[0m\n    \u001b[31m  7) should handle API errors correctly\u001b[0m\n    \u001b[31m  8) should handle network errors gracefully\u001b[0m\n\u001b[0m    Language Detection API\u001b[0m\n    \u001b[31m  9) should detect language correctly\u001b[0m\n\u001b[0m    Supported Languages API\u001b[0m\nAzure Translator supports 3 languages\n    \u001b[32m  ✔\u001b[0m\u001b[90m should retrieve supported languages\u001b[0m\n\u001b[0m    Authentication\u001b[0m\n    \u001b[31m  10) should include correct authentication headers\u001b[0m\n\n\u001b[0m  End-to-End Tests\u001b[0m\n  \u001b[36m  - should be implemented with Playwright\u001b[0m\n\n\u001b[0m  E2E Test Placeholder\u001b[0m\n  \u001b[32m  ✔\u001b[0m\u001b[90m should pass\u001b[0m\n\n\u001b[0m  Translation App E2E Tests\u001b[0m\n  \u001b[36m  - should perform a complete translation flow\u001b[0m\n  \u001b[36m  - should handle errors gracefully\u001b[0m\n\n\u001b[0m  E2E Test Placeholder\u001b[0m\n  \u001b[32m  ✔\u001b[0m\u001b[90m should pass\u001b[0m\n\n\u001b[0m  Example Test Suite\u001b[0m\n  \u001b[32m  ✔\u001b[0m\u001b[90m should pass a simple test\u001b[0m\n  \u001b[32m  ✔\u001b[0m\u001b[90m should demonstrate sinon stub\u001b[0m\n\n\u001b[0m  Complete Pipeline Integration Tests\u001b[0m\n\u001b[0m    End-to-end audio translation pipeline\u001b[0m\nInitializing translation services...\ndeepl translation service initialized: { success: true }\ngpt4o translation service initialized: { success: true }\ngoogle translation service initialized: { success: true }\nazure translation service initialized: { success: true }\n    \u001b[31m  11) should process audio through the complete pipeline\u001b[0m\n    \u001b[31m  12) should handle service failover in the pipeline\u001b[0m\nInitializing translation services...\ndeepl translation service initialized: { success: true }\ngpt4o translation service initialized: { success: true }\ngoogle translation service initialized: { success: true }\nazure translation service initialized: { success: true }\n    \u001b[31m  13) should maintain conversation context across multiple exchanges\u001b[0m\n\n\u001b[0m  Translation Integration Tests\u001b[0m\n\u001b[0m    End-to-end translation workflow\u001b[0m\nInitializing translation services...\ndeepl translation service initialized: { success: true }\ngpt4o translation service initialized: { success: true }\ngoogle translation service initialized: { success: true }\nazure translation service initialized: { success: true }\n    \u001b[31m  14) should complete the full translation pipeline\u001b[0m\nInitializing translation services...\ndeepl translation service initialized: { success: true }\ngpt4o translation service initialized: { success: true }\ngoogle translation service initialized: { success: true }\nazure translation service initialized: { success: true }\n    \u001b[31m  15) should handle service failover correctly\u001b[0m\nInitializing translation services...\ndeepl translation service initialized: { success: true }\ngpt4o translation service initialized: { success: true }\ngoogle translation service initialized: { success: true }\nazure translation service initialized: { success: true }\n    \u001b[31m  16) should maintain conversation context between translations\u001b[0m\nInitializing translation services...\ndeepl translation service initialized: { success: true }\ngpt4o translation service initialized: { success: true }\ngoogle translation service initialized: { success: true }\nazure translation service initialized: { success: true }\n    \u001b[31m  17) should handle different priority settings\u001b[0m\n\n\u001b[0m  Translation Performance Tests\u001b[0m\n\u001b[0m    Translation Service Latency\u001b[0m\nInitializing translation services...\ndeepl translation service initialized: { success: true }\ngpt4o translation service initialized: { success: true }\ngoogle translation service initialized: { success: true }\nazure translation service initialized: { success: true }\n    \u001b[31m  18) \"before each\" hook for \"should measure individual service latency\"\u001b[0m\n\n\u001b[0m  Translation Cache Performance\u001b[0m\nInitializing translation services...\ndeepl translation service initialized: { success: true }\ngpt4o translation service initialized: { success: true }\ngoogle translation service initialized: { success: true }\nazure translation service initialized: { success: true }\n  \u001b[31m  19) \"before each\" hook for \"should improve performance with caching\"\u001b[0m\n\n\u001b[0m  API Key Security\u001b[0m\n\u001b[0m    API key storage\u001b[0m\n    \u001b[31m  20) should encrypt API keys before storing\u001b[0m\n    \u001b[31m  21) should store API keys in the correct location\u001b[0m\n    \u001b[31m  22) should not store API keys in plain text\u001b[0m\n\u001b[0m    API key retrieval\u001b[0m\n    \u001b[31m  23) should decrypt API keys when retrieving\u001b[0m\n    \u001b[31m  24) should handle missing API keys gracefully\u001b[0m\n    \u001b[31m  25) should handle decryption errors securely\u001b[0m\n\u001b[0m    API key validation\u001b[0m\n    \u001b[31m  26) should validate API key format\u001b[0m\n    \u001b[31m  27) should detect potentially compromised API keys\u001b[0m\n\u001b[0m    API key rotation\u001b[0m\n    \u001b[31m  28) should support API key rotation\u001b[0m\n    \u001b[32m  ✔\u001b[0m\u001b[90m should not store invalid API keys during rotation\u001b[0m\n\n\u001b[0m  App Security\u001b[0m\n\u001b[0m    Input sanitization\u001b[0m\n    \u001b[31m  29) should sanitize user inputs to prevent injection attacks\u001b[0m\n    \u001b[31m  30) should sanitize file paths to prevent path traversal\u001b[0m\n\u001b[0m    Content Security Policy\u001b[0m\n    \u001b[31m  31) should validate CSP headers\u001b[0m\n\u001b[0m    Secure storage\u001b[0m\n    \u001b[31m  32) should use secure storage for sensitive data\u001b[0m\n\n\u001b[0m  Network Security\u001b[0m\n\u001b[0m    HTTPS verification\u001b[0m\n    \u001b[31m  33) should verify HTTPS certificates by default\u001b[0m\n    \u001b[31m  34) should detect and prevent SSL stripping\u001b[0m\n\u001b[0m    Authentication header handling\u001b[0m\n    \u001b[31m  35) should safely handle authentication headers\u001b[0m\n\n\u001b[0m  Complete Translation Pipeline\u001b[0m\n\u001b[0m    Initialization\u001b[0m\n    \u001b[31m  36) \"before each\" hook for \"should initialize pipeline with default settings\"\u001b[0m\n\n\u001b[0m  Translation Error Handling\u001b[0m\n\u001b[0m    Service failure handling\u001b[0m\nInitializing translation services...\ndeepl translation service initialized: { success: true }\ngpt4o translation service initialized: { success: true }\ngoogle translation service initialized: { success: true }\nazure translation service initialized: { success: true }\n    \u001b[31m  37) \"before each\" hook for \"should handle all services failing\"\u001b[0m\n\n\u001b[0m  PlatformDetector\u001b[0m\n\u001b[0m    constructor\u001b[0m\n    \u001b[32m  ✔\u001b[0m\u001b[90m should initialize with supported apps list\u001b[0m\n    \u001b[31m  38) should set platform property\u001b[0m\n\u001b[0m    detectActiveApp\u001b[0m\n    \u001b[31m  39) should detect Discord on Windows\u001b[0m\n    \u001b[31m  40) should detect Zoom on macOS\u001b[0m\n    \u001b[31m  41) should detect Teams on Linux\u001b[0m\n    \u001b[31m  42) should return null when no supported app is detected\u001b[0m\n    \u001b[31m  43) should handle exec errors gracefully\u001b[0m\n    \u001b[31m  44) should handle unsupported platform\u001b[0m\n\u001b[0m    getAppConfig\u001b[0m\n    \u001b[32m  ✔\u001b[0m\u001b[90m should return Discord configuration\u001b[0m\n    \u001b[32m  ✔\u001b[0m\u001b[90m should return Zoom configuration\u001b[0m\n    \u001b[32m  ✔\u001b[0m\u001b[90m should return null for unsupported app\u001b[0m\n\u001b[0m    configureAudioRouting\u001b[0m\nAudio routing configured for Discord\n    \u001b[32m  ✔\u001b[0m\u001b[90m should configure audio routing for Discord\u001b[0m\nNo specific configuration found for Notepad\n    \u001b[32m  ✔\u001b[0m\u001b[90m should handle unsupported app gracefully\u001b[0m\n    \u001b[32m  ✔\u001b[0m\u001b[90m should handle errors gracefully\u001b[0m\n\u001b[0m    applyAudioRouting\u001b[0m\nmacOS audio routing configuration: { inputDevice: 'test', outputDevice: 'test' }\nNote: Full macOS audio routing requires Core Audio integration\n    \u001b[31m  45) should call Windows routing for win32 platform\u001b[0m\n    \u001b[32m  ✔\u001b[0m\u001b[90m should call macOS routing for darwin platform\u001b[0m\nmacOS audio routing configuration: { inputDevice: 'test', outputDevice: 'test' }\nNote: Full macOS audio routing requires Core Audio integration\n    \u001b[31m  46) should call Linux routing for linux platform\u001b[0m\n\u001b[0m    applyWindowsAudioRouting\u001b[0m\n    \u001b[31m  47) should execute PowerShell commands for Windows audio routing\u001b[0m\n    \u001b[32m  ✔\u001b[0m\u001b[90m should handle Windows routing errors\u001b[0m\n\u001b[0m    applyLinuxAudioRouting\u001b[0m\n    \u001b[31m  48) should execute pactl commands for Linux audio routing\u001b[0m\n    \u001b[32m  ✔\u001b[0m\u001b[90m should handle Linux routing errors\u001b[0m\n\u001b[0m    applyMacAudioRouting\u001b[0m\n    \u001b[32m  ✔\u001b[0m\u001b[90m should log configuration for macOS\u001b[0m\n\n\u001b[0m  Setup Automation Service\u001b[0m\n\u001b[0m    Platform Detection\u001b[0m\n    \u001b[31m  49) should detect macOS correctly\u001b[0m\n    \u001b[31m  50) should detect Windows correctly\u001b[0m\n    \u001b[31m  51) should detect Linux correctly\u001b[0m\n    \u001b[31m  52) should throw error for unsupported platform\u001b[0m\n\u001b[0m    Virtual Audio Installation\u001b[0m\n    \u001b[31m  53) should install VB-Audio Cable on Windows\u001b[0m\n    \u001b[31m  54) should install BlackHole on macOS\u001b[0m\n    \u001b[31m  55) should create PulseAudio virtual sinks on Linux\u001b[0m\n    \u001b[31m  56) should handle installation errors\u001b[0m\n\u001b[0m    Audio Device Configuration\u001b[0m\n    \u001b[31m  57) should configure audio devices successfully\u001b[0m\n    \u001b[31m  58) should handle device configuration errors\u001b[0m\n\u001b[0m    Communication App Configuration\u001b[0m\nmacOS audio routing configuration: {\n  inputDevice: 'CABLE Input',\n  outputDevice: 'CABLE Output',\n  sampleRate: 44100,\n  channels: 2,\n  priority: 'medium'\n}\nNote: Full macOS audio routing requires Core Audio integration\nAudio routing configured for Telegram\n    \u001b[31m  59) should configure Discord settings\u001b[0m\nmacOS audio routing configuration: {\n  inputDevice: 'CABLE Input',\n  outputDevice: 'CABLE Output',\n  sampleRate: 44100,\n  channels: 2,\n  priority: 'medium'\n}\nNote: Full macOS audio routing requires Core Audio integration\nAudio routing configured for Telegram\n    \u001b[31m  60) should configure Zoom settings\u001b[0m\nmacOS audio routing configuration: {\n  inputDevice: 'CABLE Input',\n  outputDevice: 'CABLE Output',\n  sampleRate: 44100,\n  channels: 2,\n  priority: 'medium'\n}\nNote: Full macOS audio routing requires Core Audio integration\nAudio routing configured for Telegram\n    \u001b[31m  61) should handle app configuration errors\u001b[0m\n\u001b[0m    Configuration File Creation\u001b[0m\n    \u001b[31m  62) should create configuration files successfully\u001b[0m\n    \u001b[31m  63) should handle configuration file creation errors\u001b[0m\n\u001b[0m    Complete Setup Process\u001b[0m\n    \u001b[31m  64) should run complete setup successfully\u001b[0m\n    \u001b[31m  65) should handle setup step failures gracefully\u001b[0m\n    \u001b[31m  66) should provide detailed step results\u001b[0m\n\u001b[0m    Error Handling\u001b[0m\n    \u001b[31m  67) should handle timeout errors\u001b[0m\n    \u001b[31m  68) should handle permission errors\u001b[0m\n    \u001b[31m  69) should handle network errors\u001b[0m\n\u001b[0m    Validation\u001b[0m\n    \u001b[31m  70) should validate platform support\u001b[0m\n    \u001b[31m  71) should validate app support\u001b[0m\n    \u001b[31m  72) should validate configuration\u001b[0m\n\n\u001b[0m  AzureTranslator\u001b[0m\n\u001b[0m    initialization\u001b[0m\n    \u001b[31m  73) should initialize successfully with valid credentials\u001b[0m\n    \u001b[32m  ✔\u001b[0m\u001b[90m should handle missing API key\u001b[0m\n    \u001b[31m  74) should handle API errors during initialization\u001b[0m\n\u001b[0m    translate\u001b[0m\n    \u001b[31m  75) should translate text successfully\u001b[0m\n    \u001b[32m  ✔\u001b[0m\u001b[90m should detect language when fromLanguage is \"auto\"\u001b[0m\n    \u001b[32m  ✔\u001b[0m\u001b[90m should handle API errors gracefully\u001b[0m\n    \u001b[32m  ✔\u001b[0m\u001b[90m should handle text formatting options\u001b[0m\n    \u001b[32m  ✔\u001b[0m\u001b[90m should respect formality setting when available\u001b[0m\n\u001b[0m    detectLanguage\u001b[0m\n    \u001b[31m  76) should detect language correctly\u001b[0m\n    \u001b[31m  77) should handle empty text in language detection\u001b[0m\n\n\u001b[0m  GPT4oTranslator\u001b[0m\n\u001b[0m    initialization\u001b[0m\n    \u001b[31m  78) should initialize successfully with valid API key\u001b[0m\n    \u001b[31m  79) should handle missing API key\u001b[0m\n\u001b[0m    translate\u001b[0m\n    \u001b[31m  80) should translate text successfully\u001b[0m\n    \u001b[31m  81) should handle API errors gracefully\u001b[0m\n    \u001b[31m  82) should handle malformed API responses\u001b[0m\n    \u001b[31m  83) should update conversation context when provided\u001b[0m\n\u001b[0m    buildTranslationContext\u001b[0m\n    \u001b[32m  ✔\u001b[0m\u001b[90m should build appropriate context for translation\u001b[0m\n    \u001b[32m  ✔\u001b[0m\u001b[90m should handle different profiles correctly\u001b[0m\n\u001b[0m    updateConversationContext\u001b[0m\n    \u001b[32m  ✔\u001b[0m\u001b[90m should add new entries to conversation context\u001b[0m\n    \u001b[31m  84) should limit context size to configured window\u001b[0m\n\n\u001b[0m  TranslationManager\u001b[0m\n\u001b[0m    initialization\u001b[0m\n    \u001b[31m  85) should initialize successfully with all services\u001b[0m\n    \u001b[31m  86) should handle service initialization failures gracefully\u001b[0m\n\u001b[0m    translate\u001b[0m\nUsing deepl for en → es translation\n    \u001b[32m  ✔\u001b[0m\u001b[90m should translate text using the best service\u001b[0m\n    \u001b[31m  87) should use cached translation when available\u001b[0m\nUsing deepl for en → es translation\n    \u001b[32m  ✔\u001b[0m\u001b[90m should try fallback services when primary service fails\u001b[0m\n\u001b[0m    attemptTranslation\u001b[0m\n    \u001b[32m  ✔\u001b[0m\u001b[90m should translate text with the specified service\u001b[0m\n    \u001b[32m  ✔\u001b[0m\u001b[90m should handle service errors gracefully\u001b[0m\n\u001b[0m    fallbackTranslation\u001b[0m\nAttempting fallback translation with gpt4o\n    \u001b[31m  88) should try alternative services when primary fails\u001b[0m\nAttempting fallback translation with gpt4o\nAttempting fallback translation with azure\nAttempting fallback translation with google\n    \u001b[32m  ✔\u001b[0m\u001b[90m should return error when all services fail\u001b[0m\n\n\u001b[0m  TranslationService\u001b[0m\n\u001b[0m    initialization\u001b[0m\n    \u001b[31m  89) should create an instance with the provided config\u001b[0m\n    \u001b[31m  90) should have default values for non-provided config options\u001b[0m\n\u001b[0m    abstract methods\u001b[0m\n    \u001b[31m  91) should throw error for abstract translate method\u001b[0m\n    \u001b[31m  92) should throw error for abstract detectLanguage method\u001b[0m\n\u001b[0m    utility methods\u001b[0m\n    \u001b[31m  93) should format language codes correctly\u001b[0m\n\n\u001b[0m  ContextManager\u001b[0m\n\u001b[0m    initialization\u001b[0m\n    \u001b[31m  94) should initialize with default settings\u001b[0m\n    \u001b[31m  95) should initialize with custom settings\u001b[0m\n    \u001b[31m  96) should initialize empty conversation contexts\u001b[0m\n\u001b[0m    addTranslationEntry\u001b[0m\n    \u001b[31m  97) should add entries to the correct conversation\u001b[0m\n    \u001b[31m  98) should handle missing conversation ID\u001b[0m\n    \u001b[31m  99) should add multiple entries to the same conversation\u001b[0m\n    \u001b[31m  100) should respect maxContextEntries limit\u001b[0m\n\u001b[0m    getConversationContext\u001b[0m\n    \u001b[32m  ✔\u001b[0m\u001b[90m should return empty string for non-existent conversation\u001b[0m\n    \u001b[31m  101) should format context entries correctly\u001b[0m\n    \u001b[31m  102) should handle bidirectional conversation correctly\u001b[0m\n\u001b[0m    pruneOldEntries\u001b[0m\n    \u001b[31m  103) should remove entries older than maxContextAgeMs\u001b[0m\n    \u001b[31m  104) should handle non-existent conversation ID\u001b[0m\n\u001b[0m    clearContext\u001b[0m\n    \u001b[31m  105) should clear a specific conversation\u001b[0m\n    \u001b[31m  106) should clear all conversations when no ID is provided\u001b[0m\n    \u001b[31m  107) should handle non-existent conversation ID\u001b[0m\n\u001b[0m    edge cases\u001b[0m\n    \u001b[31m  108) should handle empty entries\u001b[0m\n    \u001b[31m  109) should handle entries without timestamps\u001b[0m\n    \u001b[31m  110) should handle special characters in context\u001b[0m\n\n\u001b[0m  LanguagePairOptimizer\u001b[0m\n\u001b[0m    initialization\u001b[0m\n    \u001b[31m  111) should initialize language pairs from config\u001b[0m\n    \u001b[31m  112) should load language sets from config\u001b[0m\n    \u001b[31m  113) should load default ranking from config\u001b[0m\n\u001b[0m    getBestServiceForLanguagePair\u001b[0m\n    \u001b[31m  114) should select based on language pair config\u001b[0m\n    \u001b[31m  115) should prioritize based on quality score\u001b[0m\n    \u001b[31m  116) should prioritize based on speed\u001b[0m\n    \u001b[31m  117) should respect service health status\u001b[0m\n    \u001b[31m  118) should handle unconfigured language pairs\u001b[0m\n    \u001b[31m  119) should prefer DeepL for European languages\u001b[0m\n    \u001b[31m  120) should prefer GPT-4o for Asian languages\u001b[0m\n    \u001b[31m  121) should respect user preference\u001b[0m\n    \u001b[31m  122) should ignore unhealthy user preference\u001b[0m\n    \u001b[31m  123) should prioritize context-aware services when context is required\u001b[0m\n    \u001b[31m  124) should return a healthy service when all preferred services are unhealthy\u001b[0m\n\u001b[0m    updateQualityScore\u001b[0m\n    \u001b[31m  125) should update quality score with smoothing\u001b[0m\n    \u001b[32m  ✔\u001b[0m\u001b[90m should handle non-existent language pair\u001b[0m\n    \u001b[32m  ✔\u001b[0m\u001b[90m should handle non-existent service\u001b[0m\n\u001b[0m    edge cases\u001b[0m\n    \u001b[31m  126) should handle all services being unhealthy\u001b[0m\n    \u001b[31m  127) should handle empty serviceHealth object\u001b[0m\n    \u001b[31m  128) should handle missing options\u001b[0m\n\n\u001b[0m  TranslationCache\u001b[0m\n\u001b[0m    initialization\u001b[0m\n    \u001b[31m  129) should initialize with default settings\u001b[0m\n    \u001b[31m  130) should initialize with custom settings\u001b[0m\n    \u001b[31m  131) should initialize stats with zero values\u001b[0m\n\u001b[0m    generateKey\u001b[0m\n    \u001b[32m  ✔\u001b[0m\u001b[90m should generate unique keys for different text\u001b[0m\n    \u001b[32m  ✔\u001b[0m\u001b[90m should generate unique keys for different language pairs\u001b[0m\n    \u001b[32m  ✔\u001b[0m\u001b[90m should generate unique keys for different services\u001b[0m\n    \u001b[32m  ✔\u001b[0m\u001b[90m should include options in key generation\u001b[0m\n\u001b[0m    set and get\u001b[0m\n    \u001b[31m  132) should store and retrieve translations\u001b[0m\n    \u001b[31m  133) should also store service-agnostic entries\u001b[0m\n    \u001b[32m  ✔\u001b[0m\u001b[90m should return null for non-existent entries\u001b[0m\n    \u001b[31m  134) should update stats when retrieving entries\u001b[0m\n    \u001b[31m  135) should respect expiry times\u001b[0m\n\u001b[0m    pruneCache\u001b[0m\n    \u001b[31m  136) should remove expired entries\u001b[0m\n    \u001b[31m  137) should respect maxCacheSize\u001b[0m\n\u001b[0m    getStats\u001b[0m\n    \u001b[31m  138) should return accurate statistics\u001b[0m\n\u001b[0m    clear\u001b[0m\n    \u001b[31m  139) should remove all entries\u001b[0m\n\u001b[0m    edge cases\u001b[0m\n    \u001b[31m  140) should handle empty text\u001b[0m\n    \u001b[31m  141) should handle special characters\u001b[0m\n    \u001b[31m  142) should handle very long text\u001b[0m\n\n\u001b[0m  formatTextForDisplay\u001b[0m\n  \u001b[32m  ✔\u001b[0m\u001b[90m should trim whitespace from text\u001b[0m\n  \u001b[32m  ✔\u001b[0m\u001b[90m should return empty string for non-string input\u001b[0m\n  \u001b[32m  ✔\u001b[0m\u001b[90m should truncate long text with ellipsis\u001b[0m\n  \u001b[32m  ✔\u001b[0m\u001b[90m should not truncate text shorter than max length\u001b[0m\n\n\u001b[0m  String Utils\u001b[0m\n\u001b[0m    capitalize\u001b[0m\n    \u001b[32m  ✔\u001b[0m\u001b[90m should capitalize the first letter of a string\u001b[0m\n    \u001b[32m  ✔\u001b[0m\u001b[90m should handle empty string\u001b[0m\n    \u001b[32m  ✔\u001b[0m\u001b[90m should handle non-string inputs\u001b[0m\n\u001b[0m    truncate\u001b[0m\n    \u001b[32m  ✔\u001b[0m\u001b[90m should truncate strings longer than maxLength\u001b[0m\n    \u001b[32m  ✔\u001b[0m\u001b[90m should not truncate strings shorter than maxLength\u001b[0m\n    \u001b[32m  ✔\u001b[0m\u001b[90m should handle custom ellipsis\u001b[0m\n\u001b[0m    safeJsonParse\u001b[0m\n    \u001b[32m  ✔\u001b[0m\u001b[90m should parse valid JSON strings\u001b[0m\n    \u001b[32m  ✔\u001b[0m\u001b[90m should return default value for invalid JSON\u001b[0m\n    \u001b[32m  ✔\u001b[0m\u001b[90m should return empty object by default when parsing fails\u001b[0m\n\n\u001b[0m  Test Utilities\u001b[0m\n\u001b[0m    mockT\u001b[0m\n    \u001b[32m  ✔\u001b[0m\u001b[90m should return the key as the translation\u001b[0m\n\u001b[0m    createMockAudioContext\u001b[0m\n    \u001b[32m  ✔\u001b[0m\u001b[90m should create a mock AudioContext with expected methods\u001b[0m\n    \u001b[32m  ✔\u001b[0m\u001b[90m should allow calling mocked methods\u001b[0m\n\u001b[0m    createMockMediaStream\u001b[0m\n    \u001b[32m  ✔\u001b[0m\u001b[90m should create a mock MediaStream with expected methods\u001b[0m\n\u001b[0m    MockResizeObserver\u001b[0m\n    \u001b[32m  ✔\u001b[0m\u001b[90m should create a mock ResizeObserver with expected methods\u001b[0m\n\u001b[0m    createComponentMock\u001b[0m\n    \u001b[32m  ✔\u001b[0m\u001b[90m should create a mock React component\u001b[0m\n\u001b[0m    createControllablePromise\u001b[0m\n    \u001b[32m  ✔\u001b[0m\u001b[90m should create a promise with resolve and reject controls\u001b[0m\u001b[31m (101ms)\u001b[0m\n\u001b[0m    waitFor\u001b[0m\n    \u001b[32m  ✔\u001b[0m\u001b[90m should wait for a condition to be true\u001b[0m\u001b[33m (50ms)\u001b[0m\n    \u001b[32m  ✔\u001b[0m\u001b[90m should timeout if condition is not met\u001b[0m\u001b[33m (50ms)\u001b[0m\n\u001b[0m    useFakeTimers\u001b[0m\n    \u001b[32m  ✔\u001b[0m\u001b[90m should mock timers\u001b[0m\n\u001b[0m    mockFetch\u001b[0m\n    \u001b[32m  ✔\u001b[0m\u001b[90m should mock fetch with a successful response\u001b[0m\n    \u001b[32m  ✔\u001b[0m\u001b[90m should mock fetch with an error response\u001b[0m\n\n\u001b[0m  Visual Regression Tests\u001b[0m\n\u001b[0m    Main Interface\u001b[0m\n    \u001b[31m  143) \"before each\" hook for \"should match baseline for initial UI\"\u001b[0m\n\u001b[0m    Translation Process\u001b[0m\n    \u001b[31m  144) \"before each\" hook for \"should match baseline for translation in progress\"\u001b[0m\n\u001b[0m    Responsive Design\u001b[0m\n    \u001b[31m  145) should match baseline on mobile viewport\u001b[0m\n    \u001b[31m  146) should match baseline on tablet viewport\u001b[0m\n    \u001b[31m  147) should match baseline on desktop viewport\u001b[0m\n\u001b[0m    Themes\u001b[0m\n    \u001b[31m  148) should match baseline with light theme\u001b[0m\n    \u001b[31m  149) should match baseline with dark theme\u001b[0m\n    \u001b[31m  150) should match baseline with high-contrast theme\u001b[0m\n\n\n\u001b[92m \u001b[0m\u001b[32m 63 passing\u001b[0m\u001b[90m (2m)\u001b[0m\n\u001b[36m \u001b[0m\u001b[36m 3 pending\u001b[0m\n\u001b[31m  150 failing\u001b[0m\n\n\u001b[0m  1) Accessibility Tests\n       Main Interface\n         \"before each\" hook for \"should have no critical accessibility violations\":\n\u001b[0m\u001b[31m     TimeoutError: Waiting for selector `#app-container` failed: Waiting failed: 5000ms exceeded\u001b[0m\u001b[90m\n      at new WaitTask (node_modules/puppeteer-core/lib/cjs/puppeteer/common/WaitTask.js:48:34)\n      at IsolatedWorld.waitForFunction (node_modules/puppeteer-core/lib/cjs/puppeteer/api/Realm.js:25:26)\n      at CSSQueryHandler.waitFor (node_modules/puppeteer-core/lib/cjs/puppeteer/common/QueryHandler.js:178:95)\n      at async CdpFrame.waitForSelector (node_modules/puppeteer-core/lib/cjs/puppeteer/api/Frame.js:548:21)\n      at async CdpPage.waitForSelector (node_modules/puppeteer-core/lib/cjs/puppeteer/api/Page.js:1377:20)\n      at async Context.<anonymous> (tests/accessibility/ui-accessibility.test.js:68:13)\n\u001b[0m\n\u001b[0m  2) Accessibility Tests\n       Translation Form\n         \"before each\" hook for \"should have accessible form controls\":\n\u001b[0m\u001b[31m     TimeoutError: Waiting for selector `#translation-form` failed: Waiting failed: 5000ms exceeded\u001b[0m\u001b[90m\n      at new WaitTask (node_modules/puppeteer-core/lib/cjs/puppeteer/common/WaitTask.js:48:34)\n      at IsolatedWorld.waitForFunction (node_modules/puppeteer-core/lib/cjs/puppeteer/api/Realm.js:25:26)\n      at CSSQueryHandler.waitFor (node_modules/puppeteer-core/lib/cjs/puppeteer/common/QueryHandler.js:178:95)\n      at async CdpFrame.waitForSelector (node_modules/puppeteer-core/lib/cjs/puppeteer/api/Frame.js:548:21)\n      at async CdpPage.waitForSelector (node_modules/puppeteer-core/lib/cjs/puppeteer/api/Page.js:1377:20)\n      at async Context.<anonymous> (tests/accessibility/ui-accessibility.test.js:125:13)\n\u001b[0m\n\u001b[0m  3) Accessibility Tests\n       Results Display\n         \"before each\" hook for \"should have screen reader accessible results\":\n\u001b[0m\u001b[31m     TimeoutError: Waiting for selector `#translation-form` failed: Waiting failed: 5000ms exceeded\u001b[0m\u001b[90m\n      at new WaitTask (node_modules/puppeteer-core/lib/cjs/puppeteer/common/WaitTask.js:48:34)\n      at IsolatedWorld.waitForFunction (node_modules/puppeteer-core/lib/cjs/puppeteer/api/Realm.js:25:26)\n      at CSSQueryHandler.waitFor (node_modules/puppeteer-core/lib/cjs/puppeteer/common/QueryHandler.js:178:95)\n      at async CdpFrame.waitForSelector (node_modules/puppeteer-core/lib/cjs/puppeteer/api/Frame.js:548:21)\n      at async CdpPage.waitForSelector (node_modules/puppeteer-core/lib/cjs/puppeteer/api/Page.js:1377:20)\n      at async Context.<anonymous> (tests/accessibility/ui-accessibility.test.js:187:13)\n\u001b[0m\n\u001b[0m  4) Accessibility Tests\n       Responsive Design\n         should be accessible on mobile viewport:\n\u001b[0m\u001b[31m     TimeoutError: Waiting for selector `#app-container` failed: Waiting failed: 5000ms exceeded\u001b[0m\u001b[90m\n      at new WaitTask (node_modules/puppeteer-core/lib/cjs/puppeteer/common/WaitTask.js:48:34)\n      at IsolatedWorld.waitForFunction (node_modules/puppeteer-core/lib/cjs/puppeteer/api/Realm.js:25:26)\n      at CSSQueryHandler.waitFor (node_modules/puppeteer-core/lib/cjs/puppeteer/common/QueryHandler.js:178:95)\n      at async CdpFrame.waitForSelector (node_modules/puppeteer-core/lib/cjs/puppeteer/api/Frame.js:548:21)\n      at async CdpPage.waitForSelector (node_modules/puppeteer-core/lib/cjs/puppeteer/api/Page.js:1377:20)\n      at async Context.<anonymous> (tests/accessibility/ui-accessibility.test.js:243:13)\n\u001b[0m\n\u001b[0m  5) Accessibility Tests\n       Responsive Design\n         should maintain touch target sizes on mobile:\n\u001b[0m\u001b[31m     Error: Waiting for selector `#translation-form` failed: waitForFunction failed: frame got detached.\u001b[0m\u001b[90m\n      at IsolatedWorld.dispose (node_modules/puppeteer-core/lib/cjs/puppeteer/api/Realm.js:40:39)\n      at [nodejs.dispose] (node_modules/puppeteer-core/lib/cjs/puppeteer/api/Realm.js:44:14)\n      at [nodejs.dispose] (node_modules/puppeteer-core/lib/cjs/puppeteer/cdp/IsolatedWorld.js:156:45)\n      at [nodejs.dispose] (node_modules/puppeteer-core/lib/cjs/puppeteer/cdp/Frame.js:331:92)\n      at #removeFramesRecursively (node_modules/puppeteer-core/lib/cjs/puppeteer/cdp/FrameManager.js:452:45)\n      at #onClientDisconnect (node_modules/puppeteer-core/lib/cjs/puppeteer/cdp/FrameManager.js:82:42)\n      at /Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/puppeteer-core/lib/cjs/puppeteer/cdp/FrameManager.js:66:37\n      at onceHandler (node_modules/puppeteer-core/lib/cjs/puppeteer/common/EventEmitter.js:94:13)\n      at /Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/puppeteer-core/lib/cjs/third_party/mitt/mitt.js:62:7\n      at Array.map (<anonymous>)\n      at Object.emit (node_modules/puppeteer-core/lib/cjs/third_party/mitt/mitt.js:61:20)\n      at CdpCDPSession.emit (node_modules/puppeteer-core/lib/cjs/puppeteer/common/EventEmitter.js:83:23)\n      at CdpCDPSession.onClosed (node_modules/puppeteer-core/lib/cjs/puppeteer/cdp/CdpSession.js:116:14)\n      at #onClose (node_modules/puppeteer-core/lib/cjs/puppeteer/cdp/Connection.js:181:21)\n      at WebSocket.<anonymous> (node_modules/puppeteer-core/lib/cjs/puppeteer/node/NodeWebSocketTransport.js:48:30)\n      at callListener (node_modules/ws/lib/event-target.js:290:14)\n      at WebSocket.onClose (node_modules/ws/lib/event-target.js:220:9)\n      at WebSocket.emit (node:events:518:28)\n      at WebSocket.emitClose (node_modules/ws/lib/websocket.js:272:10)\n      at Socket.socketOnClose (node_modules/ws/lib/websocket.js:1341:15)\n      at Socket.emit (node:events:518:28)\n      at TCP.<anonymous> (node:net:351:12)\n\u001b[0m\n\u001b[0m  6) Azure Translator API Tests\n       Translation API\n         should make correct API calls to translate text:\n\u001b[0m\u001b[31m     TypeError: Descriptor for property v4 is non-configurable and non-writable\u001b[0m\u001b[90m\n      at assertValidPropertyDescriptor (node_modules/sinon/lib/sinon/stub.js:138:15)\n      at Function.stub (node_modules/sinon/lib/sinon/stub.js:89:5)\n      at Sandbox.stub (node_modules/sinon/lib/sinon/sandbox.js:389:39)\n      at Context.<anonymous> (tests/api/azure-api.test.js:55:21)\n      at process.processImmediate (node:internal/timers:491:21)\n\u001b[0m\n\u001b[0m  7) Azure Translator API Tests\n       Translation API\n         should handle API errors correctly:\n\u001b[0m\u001b[31m     Error: Azure Translator connection test failed: Azure Translator error: The request is not authorized because credentials are missing or invalid.\u001b[0m\u001b[90m\n      at AzureTranslator.testConnection (src/services/translation/azure-translator.js:79:19)\n      at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n      at async AzureTranslator.initialize (src/services/translation/azure-translator.js:51:13)\n      at async Context.<anonymous> (tests/api/azure-api.test.js:84:13)\n\u001b[0m\n\u001b[0m  8) Azure Translator API Tests\n       Translation API\n         should handle network errors gracefully:\n\u001b[0m\u001b[31m     Error: Azure Translator connection test failed: Azure Translator error: Connection refused\u001b[0m\u001b[90m\n      at AzureTranslator.testConnection (src/services/translation/azure-translator.js:79:19)\n      at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n      at async AzureTranslator.initialize (src/services/translation/azure-translator.js:51:13)\n      at async Context.<anonymous> (tests/api/azure-api.test.js:106:13)\n\u001b[0m\n\u001b[0m  9) Azure Translator API Tests\n       Language Detection API\n         should detect language correctly:\n\u001b[0m\u001b[31m     Error: Azure Translator connection test failed: Azure Translator error: Nock: No match for request {\n  \"method\": \"POST\",\n  \"url\": \"https://api.cognitive.microsofttranslator.com/translate?api-version=3.0&to=es&category=general&profanityAction=NoAction&includeAlignment=false&includeSentenceLength=false&textType=plain&from=en\",\n  \"headers\": {\n    \"accept\": \"application/json, text/plain, */*\",\n    \"content-type\": \"application/json\",\n    \"ocp-apim-subscription-key\": \"test-api-key\",\n    \"ocp-apim-subscription-region\": \"eastus\",\n    \"x-clienttraceid\": \"ec942495-6b68-4a73-9d59-04184b7ffbd4\",\n    \"user-agent\": \"axios/1.10.0\",\n    \"content-length\": \"18\",\n    \"accept-encoding\": \"gzip, compress, deflate, br\"\n  },\n  \"body\": \"[{\\\"text\\\":\\\"Hello\\\"}]\"\n}\u001b[0m\u001b[90m\n      at AzureTranslator.testConnection (src/services/translation/azure-translator.js:79:19)\n      at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n      at async AzureTranslator.initialize (src/services/translation/azure-translator.js:51:13)\n      at async Context.<anonymous> (tests/api/azure-api.test.js:137:13)\n\u001b[0m\n\u001b[0m  10) Azure Translator API Tests\n       Authentication\n         should include correct authentication headers:\n\u001b[0m\u001b[31m     Error: Azure Translator error: Nock: No match for request {\n  \"method\": \"POST\",\n  \"url\": \"https://api.cognitive.microsofttranslator.com/translate?api-version=3.0&to=es&category=general&profanityAction=NoAction&includeAlignment=false&includeSentenceLength=false&textType=plain&from=en\",\n  \"headers\": {\n    \"accept\": \"application/json, text/plain, */*\",\n    \"content-type\": \"application/json\",\n    \"ocp-apim-subscription-key\": \"test-api-key\",\n    \"ocp-apim-subscription-region\": \"eastus\",\n    \"x-clienttraceid\": \"38c00927-3d01-48f0-973f-9a59cea65dd0\",\n    \"user-agent\": \"axios/1.10.0\",\n    \"content-length\": \"18\",\n    \"accept-encoding\": \"gzip, compress, deflate, br\"\n  },\n  \"body\": \"[{\\\"text\\\":\\\"Hello\\\"}]\"\n}\u001b[0m\u001b[90m\n      at AzureTranslator.translateText (src/services/translation/azure-translator.js:223:19)\n      at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n      at async AzureTranslator.translate (src/services/translation/azure-translator.js:129:20)\n      at async Context.<anonymous> (tests/api/azure-api.test.js:208:13)\n\u001b[0m\n\u001b[0m  11) Complete Pipeline Integration Tests\n       End-to-end audio translation pipeline\n         should process audio through the complete pipeline:\n\u001b[0m\u001b[31m     TypeError: this.languagePairOptimizer.initialize is not a function\u001b[0m\u001b[90m\n      at TranslationManager.initialize (src/services/translation/translation-manager.js:79:46)\n      at async Context.<anonymous> (tests/integration/complete-pipeline.test.js:61:13)\n\u001b[0m\n\u001b[0m  12) Complete Pipeline Integration Tests\n       End-to-end audio translation pipeline\n         should handle service failover in the pipeline:\n\u001b[0m\u001b[31m     TypeError: Cannot stub non-existent property transcribeAudio\u001b[0m\u001b[90m\n      at Function.stub (node_modules/sinon/lib/sinon/stub.js:82:15)\n      at Sandbox.stub (node_modules/sinon/lib/sinon/sandbox.js:389:39)\n      at Context.<anonymous> (tests/integration/complete-pipeline.test.js:116:21)\n      at process.processImmediate (node:internal/timers:491:21)\n\u001b[0m\n\u001b[0m  13) Complete Pipeline Integration Tests\n       End-to-end audio translation pipeline\n         should maintain conversation context across multiple exchanges:\n\u001b[0m\u001b[31m     TypeError: this.languagePairOptimizer.initialize is not a function\u001b[0m\u001b[90m\n      at TranslationManager.initialize (src/services/translation/translation-manager.js:79:46)\n      at async Context.<anonymous> (tests/integration/complete-pipeline.test.js:178:13)\n\u001b[0m\n\u001b[0m  14) Translation Integration Tests\n       End-to-end translation workflow\n         should complete the full translation pipeline:\n\u001b[0m\u001b[31m     TypeError: this.languagePairOptimizer.initialize is not a function\u001b[0m\u001b[90m\n      at TranslationManager.initialize (src/services/translation/translation-manager.js:79:46)\n      at async Context.<anonymous> (tests/integration/stt-translation.test.js:38:13)\n\u001b[0m\n\u001b[0m  15) Translation Integration Tests\n       End-to-end translation workflow\n         should handle service failover correctly:\n\u001b[0m\u001b[31m     TypeError: this.languagePairOptimizer.initialize is not a function\u001b[0m\u001b[90m\n      at TranslationManager.initialize (src/services/translation/translation-manager.js:79:46)\n      at async Context.<anonymous> (tests/integration/stt-translation.test.js:98:13)\n\u001b[0m\n\u001b[0m  16) Translation Integration Tests\n       End-to-end translation workflow\n         should maintain conversation context between translations:\n\u001b[0m\u001b[31m     TypeError: this.languagePairOptimizer.initialize is not a function\u001b[0m\u001b[90m\n      at TranslationManager.initialize (src/services/translation/translation-manager.js:79:46)\n      at async Context.<anonymous> (tests/integration/stt-translation.test.js:112:13)\n\u001b[0m\n\u001b[0m  17) Translation Integration Tests\n       End-to-end translation workflow\n         should handle different priority settings:\n\u001b[0m\u001b[31m     TypeError: this.languagePairOptimizer.initialize is not a function\u001b[0m\u001b[90m\n      at TranslationManager.initialize (src/services/translation/translation-manager.js:79:46)\n      at async Context.<anonymous> (tests/integration/stt-translation.test.js:147:13)\n\u001b[0m\n\u001b[0m  18) Translation Performance Tests\n       \"before each\" hook for \"should measure individual service latency\":\n\u001b[0m\u001b[31m     TypeError: this.languagePairOptimizer.initialize is not a function\u001b[0m\u001b[90m\n      at TranslationManager.initialize (src/services/translation/translation-manager.js:79:46)\n      at async Context.<anonymous> (tests/performance/translation-performance.test.js:52:9)\n\u001b[0m\n\u001b[0m  19) Translation Cache Performance\n       \"before each\" hook for \"should improve performance with caching\":\n\u001b[0m\u001b[31m     TypeError: this.languagePairOptimizer.initialize is not a function\u001b[0m\u001b[90m\n      at TranslationManager.initialize (src/services/translation/translation-manager.js:79:46)\n      at async Context.<anonymous> (tests/performance/translation-performance.test.js:331:9)\n\u001b[0m\n\u001b[0m  20) API Key Security\n       API key storage\n         should encrypt API keys before storing:\n\u001b[0m\u001b[31m     TypeError: apiKeyManager.storeApiKey is not a function\u001b[0m\u001b[90m\n      at Context.<anonymous> (tests/security/api-key-security.test.js:46:27)\n      at process.processImmediate (node:internal/timers:491:21)\n\u001b[0m\n\u001b[0m  21) API Key Security\n       API key storage\n         should store API keys in the correct location:\n\u001b[0m\u001b[31m     TypeError: apiKeyManager.storeApiKey is not a function\u001b[0m\u001b[90m\n      at Context.<anonymous> (tests/security/api-key-security.test.js:64:27)\n      at process.processImmediate (node:internal/timers:491:21)\n\u001b[0m\n\u001b[0m  22) API Key Security\n       API key storage\n         should not store API keys in plain text:\n\u001b[0m\u001b[31m     TypeError: apiKeyManager.storeApiKey is not a function\u001b[0m\u001b[90m\n      at Context.<anonymous> (tests/security/api-key-security.test.js:80:27)\n      at process.processImmediate (node:internal/timers:491:21)\n\u001b[0m\n\u001b[0m  23) API Key Security\n       API key retrieval\n         should decrypt API keys when retrieving:\n\u001b[0m\u001b[31m     TypeError: apiKeyManager.getApiKey is not a function\u001b[0m\u001b[90m\n      at Context.<anonymous> (tests/security/api-key-security.test.js:101:48)\n      at process.processImmediate (node:internal/timers:491:21)\n\u001b[0m\n\u001b[0m  24) API Key Security\n       API key retrieval\n         should handle missing API keys gracefully:\n\u001b[0m\u001b[31m     TypeError: apiKeyManager.getApiKey is not a function\u001b[0m\u001b[90m\n      at Context.<anonymous> (tests/security/api-key-security.test.js:113:48)\n      at process.processImmediate (node:internal/timers:491:21)\n\u001b[0m\n\u001b[0m  25) API Key Security\n       API key retrieval\n         should handle decryption errors securely:\n\u001b[0m\u001b[31m     AssertionError: expected 'apiKeyManager.getApiKey is not a func…' to include 'retrieve API key'\u001b[0m\u001b[90m\n      at Context.<anonymous> (tests/security/api-key-security.test.js:133:42)\n      at process.processImmediate (node:internal/timers:491:21)\n\u001b[0m\n\u001b[0m  26) API Key Security\n       API key validation\n         should validate API key format:\n\u001b[0m\u001b[31m     TypeError: apiKeyManager.isValidApiKeyFormat is not a function\u001b[0m\u001b[90m\n      at Context.<anonymous> (tests/security/api-key-security.test.js:141:34)\n      at process.processImmediate (node:internal/timers:491:21)\n\u001b[0m\n\u001b[0m  27) API Key Security\n       API key validation\n         should detect potentially compromised API keys:\n\u001b[0m\u001b[31m     TypeError: apiKeyManager.isCompromisedApiKey is not a function\u001b[0m\u001b[90m\n      at Context.<anonymous> (tests/security/api-key-security.test.js:155:34)\n      at process.processImmediate (node:internal/timers:491:21)\n\u001b[0m\n\u001b[0m  28) API Key Security\n       API key rotation\n         should support API key rotation:\n\u001b[0m\u001b[31m     TypeError: apiKeyManager.rotateApiKey is not a function\u001b[0m\u001b[90m\n      at Context.<anonymous> (tests/security/api-key-security.test.js:182:33)\n      at process.processImmediate (node:internal/timers:491:21)\n\u001b[0m\n\u001b[0m  29) App Security\n       Input sanitization\n         should sanitize user inputs to prevent injection attacks:\n\u001b[0m\u001b[31m     Error: Cannot find module '../../src/services/security/input-sanitizer'\nRequire stack:\n- /Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/tests/security/api-key-security.test.js\u001b[0m\u001b[90m\n      at Function._resolveFilename (node:internal/modules/cjs/loader:1225:15)\n      at Function._load (node:internal/modules/cjs/loader:1055:27)\n      at TracingChannel.traceSync (node:diagnostics_channel:322:14)\n      at wrapModuleLoad (node:internal/modules/cjs/loader:220:24)\n      at Module.require (node:internal/modules/cjs/loader:1311:12)\n      at require (node:internal/modules/helpers:136:16)\n      at Context.<anonymous> (tests/security/api-key-security.test.js:232:39)\n      at process.processImmediate (node:internal/timers:491:21)\n\u001b[0m\n\u001b[0m  30) App Security\n       Input sanitization\n         should sanitize file paths to prevent path traversal:\n\u001b[0m\u001b[31m     Error: Cannot find module '../../src/services/security/input-sanitizer'\nRequire stack:\n- /Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/tests/security/api-key-security.test.js\u001b[0m\u001b[90m\n      at Function._resolveFilename (node:internal/modules/cjs/loader:1225:15)\n      at Function._load (node:internal/modules/cjs/loader:1055:27)\n      at TracingChannel.traceSync (node:diagnostics_channel:322:14)\n      at wrapModuleLoad (node:internal/modules/cjs/loader:220:24)\n      at Module.require (node:internal/modules/cjs/loader:1311:12)\n      at require (node:internal/modules/helpers:136:16)\n      at Context.<anonymous> (tests/security/api-key-security.test.js:244:38)\n      at process.processImmediate (node:internal/timers:491:21)\n\u001b[0m\n\u001b[0m  31) App Security\n       Content Security Policy\n         should validate CSP headers:\n\u001b[0m\u001b[31m     Error: Cannot find module '../../src/services/security/content-security'\nRequire stack:\n- /Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/tests/security/api-key-security.test.js\u001b[0m\u001b[90m\n      at Function._resolveFilename (node:internal/modules/cjs/loader:1225:15)\n      at Function._load (node:internal/modules/cjs/loader:1055:27)\n      at TracingChannel.traceSync (node:diagnostics_channel:322:14)\n      at wrapModuleLoad (node:internal/modules/cjs/loader:220:24)\n      at Module.require (node:internal/modules/cjs/loader:1311:12)\n      at require (node:internal/modules/helpers:136:16)\n      at Context.<anonymous> (tests/security/api-key-security.test.js:258:39)\n      at process.processImmediate (node:internal/timers:491:21)\n\u001b[0m\n\u001b[0m  32) App Security\n       Secure storage\n         should use secure storage for sensitive data:\n\u001b[0m\u001b[31m     Error: Cannot find module '../../src/services/security/secure-storage'\nRequire stack:\n- /Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/tests/security/api-key-security.test.js\u001b[0m\u001b[90m\n      at Function._resolveFilename (node:internal/modules/cjs/loader:1225:15)\n      at Function._load (node:internal/modules/cjs/loader:1055:27)\n      at TracingChannel.traceSync (node:diagnostics_channel:322:14)\n      at wrapModuleLoad (node:internal/modules/cjs/loader:220:24)\n      at Module.require (node:internal/modules/cjs/loader:1311:12)\n      at require (node:internal/modules/helpers:136:16)\n      at Context.<anonymous> (tests/security/api-key-security.test.js:271:35)\n      at process.processImmediate (node:internal/timers:491:21)\n\u001b[0m\n\u001b[0m  33) Network Security\n       HTTPS verification\n         should verify HTTPS certificates by default:\n\u001b[0m\u001b[31m     Error: Cannot find module '../../src/services/network/http-client'\nRequire stack:\n- /Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/tests/security/api-key-security.test.js\u001b[0m\u001b[90m\n      at Function._resolveFilename (node:internal/modules/cjs/loader:1225:15)\n      at Function._load (node:internal/modules/cjs/loader:1055:27)\n      at TracingChannel.traceSync (node:diagnostics_channel:322:14)\n      at wrapModuleLoad (node:internal/modules/cjs/loader:220:24)\n      at Module.require (node:internal/modules/cjs/loader:1311:12)\n      at require (node:internal/modules/helpers:136:16)\n      at Context.<anonymous> (tests/security/api-key-security.test.js:305:32)\n      at process.processImmediate (node:internal/timers:491:21)\n\u001b[0m\n\u001b[0m  34) Network Security\n       HTTPS verification\n         should detect and prevent SSL stripping:\n\u001b[0m\u001b[31m     Error: Cannot find module '../../src/services/network/http-client'\nRequire stack:\n- /Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/tests/security/api-key-security.test.js\u001b[0m\u001b[90m\n      at Function._resolveFilename (node:internal/modules/cjs/loader:1225:15)\n      at Function._load (node:internal/modules/cjs/loader:1055:27)\n      at TracingChannel.traceSync (node:diagnostics_channel:322:14)\n      at wrapModuleLoad (node:internal/modules/cjs/loader:220:24)\n      at Module.require (node:internal/modules/cjs/loader:1311:12)\n      at require (node:internal/modules/helpers:136:16)\n      at Context.<anonymous> (tests/security/api-key-security.test.js:316:32)\n      at process.processImmediate (node:internal/timers:491:21)\n\u001b[0m\n\u001b[0m  35) Network Security\n       Authentication header handling\n         should safely handle authentication headers:\n\u001b[0m\u001b[31m     Error: Cannot find module '../../src/services/network/http-client'\nRequire stack:\n- /Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/tests/security/api-key-security.test.js\u001b[0m\u001b[90m\n      at Function._resolveFilename (node:internal/modules/cjs/loader:1225:15)\n      at Function._load (node:internal/modules/cjs/loader:1055:27)\n      at TracingChannel.traceSync (node:diagnostics_channel:322:14)\n      at wrapModuleLoad (node:internal/modules/cjs/loader:220:24)\n      at Module.require (node:internal/modules/cjs/loader:1311:12)\n      at require (node:internal/modules/helpers:136:16)\n      at Context.<anonymous> (tests/security/api-key-security.test.js:334:32)\n      at process.processImmediate (node:internal/timers:491:21)\n\u001b[0m\n\u001b[0m  36) Complete Translation Pipeline\n       \"before each\" hook for \"should initialize pipeline with default settings\":\n\u001b[0m\u001b[31m     Error: Cannot find module '../services/stt/stt-manager' from '/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/src/core'\u001b[0m\u001b[90m\n      at Function.resolveSync [as sync] (node_modules/resolve/lib/sync.js:111:15)\n      at Proxyquire._resolveModule (node_modules/proxyquire/lib/proxyquire.js:137:20)\n      at Proxyquire._require (node_modules/proxyquire/lib/proxyquire.js:179:27)\n      at require (node:internal/modules/helpers:136:16)\n      at Object.<anonymous> (src/core/complete-pipeline.js:6:20)\n      at Module._compile (node:internal/modules/cjs/loader:1554:14)\n      at Object..js (node:internal/modules/cjs/loader:1706:10)\n      at require.extensions.<computed> (node_modules/proxyquire/lib/proxyquire.js:311:43)\n      at Module.load (node:internal/modules/cjs/loader:1289:32)\n      at Function._load (node:internal/modules/cjs/loader:1108:12)\n      at TracingChannel.traceSync (node:diagnostics_channel:322:14)\n      at wrapModuleLoad (node:internal/modules/cjs/loader:220:24)\n      at Module.require (node:internal/modules/cjs/loader:1311:12)\n      at Proxyquire._withoutCache (node_modules/proxyquire/lib/proxyquire.js:222:12)\n      at Proxyquire.load (node_modules/proxyquire/lib/proxyquire.js:129:15)\n      at Context.<anonymous> (tests/unit/core/complete-pipeline.test.js:64:24)\n      at process.processImmediate (node:internal/timers:491:21)\n\u001b[0m\n\u001b[0m  37) Translation Error Handling\n       \"before each\" hook for \"should handle all services failing\":\n\u001b[0m\u001b[31m     TypeError: this.languagePairOptimizer.initialize is not a function\u001b[0m\u001b[90m\n      at TranslationManager.initialize (src/services/translation/translation-manager.js:79:46)\n      at async Context.<anonymous> (tests/unit/services/error-handling/translation-error-handling.test.js:22:9)\n\u001b[0m\n\u001b[0m  38) PlatformDetector\n       constructor\n         should set platform property:\n\n      \u001b[31mAssertionError: expected 'darwin' to equal 'win32'\u001b[0m\n      \u001b[32m+ expected\u001b[0m \u001b[31m- actual\u001b[0m\n\n      \u001b[31m-darwin\u001b[0m\n      \u001b[32m+win32\u001b[0m\n      \u001b[0m\u001b[90m\n      at Context.<anonymous> (tests/unit/services/platform-detector.test.js:35:36)\n      at process.processImmediate (node:internal/timers:491:21)\n\u001b[0m\n\u001b[0m  39) PlatformDetector\n       detectActiveApp\n         should detect Discord on Windows:\n\n      \u001b[31mAssertionError: expected 'Telegram' to equal 'Discord'\u001b[0m\n      \u001b[32m+ expected\u001b[0m \u001b[31m- actual\u001b[0m\n\n      \u001b[31m-Telegram\u001b[0m\n      \u001b[32m+Discord\u001b[0m\n      \u001b[0m\u001b[90m\n      at Context.<anonymous> (tests/unit/services/platform-detector.test.js:45:25)\n\u001b[0m\n\u001b[0m  40) PlatformDetector\n       detectActiveApp\n         should detect Zoom on macOS:\n\n      \u001b[31mAssertionError: expected 'Telegram' to equal 'Zoom'\u001b[0m\n      \u001b[32m+ expected\u001b[0m \u001b[31m- actual\u001b[0m\n\n      \u001b[31m-Telegram\u001b[0m\n      \u001b[32m+Zoom\u001b[0m\n      \u001b[0m\u001b[90m\n      at Context.<anonymous> (tests/unit/services/platform-detector.test.js:53:25)\n\u001b[0m\n\u001b[0m  41) PlatformDetector\n       detectActiveApp\n         should detect Teams on Linux:\n\n      \u001b[31mAssertionError: expected 'Telegram' to equal 'Teams'\u001b[0m\n      \u001b[32m+ expected\u001b[0m \u001b[31m- actual\u001b[0m\n\n      \u001b[31m-Telegram\u001b[0m\n      \u001b[32m+Teams\u001b[0m\n      \u001b[0m\u001b[90m\n      at Context.<anonymous> (tests/unit/services/platform-detector.test.js:61:25)\n\u001b[0m\n\u001b[0m  42) PlatformDetector\n       detectActiveApp\n         should return null when no supported app is detected:\n\u001b[0m\u001b[31m     AssertionError: expected 'Telegram' to be null\u001b[0m\u001b[90m\n      at Context.<anonymous> (tests/unit/services/platform-detector.test.js:69:27)\n\u001b[0m\n\u001b[0m  43) PlatformDetector\n       detectActiveApp\n         should handle exec errors gracefully:\n\u001b[0m\u001b[31m     AssertionError: expected 'Telegram' to be null\u001b[0m\u001b[90m\n      at Context.<anonymous> (tests/unit/services/platform-detector.test.js:77:27)\n\u001b[0m\n\u001b[0m  44) PlatformDetector\n       detectActiveApp\n         should handle unsupported platform:\n\u001b[0m\u001b[31m     AssertionError: expected 'Telegram' to be null\u001b[0m\u001b[90m\n      at Context.<anonymous> (tests/unit/services/platform-detector.test.js:84:27)\n\u001b[0m\n\u001b[0m  45) PlatformDetector\n       applyAudioRouting\n         should call Windows routing for win32 platform:\n\n      \u001b[31mAssertionError: expected false to be true\u001b[0m\n      \u001b[32m+ expected\u001b[0m \u001b[31m- actual\u001b[0m\n\n      \u001b[31m-false\u001b[0m\n      \u001b[32m+true\u001b[0m\n      \u001b[0m\u001b[90m\n      at Context.<anonymous> (tests/unit/services/platform-detector.test.js:153:43)\n      at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n\u001b[0m\n\u001b[0m  46) PlatformDetector\n       applyAudioRouting\n         should call Linux routing for linux platform:\n\n      \u001b[31mAssertionError: expected false to be true\u001b[0m\n      \u001b[32m+ expected\u001b[0m \u001b[31m- actual\u001b[0m\n\n      \u001b[31m-false\u001b[0m\n      \u001b[32m+true\u001b[0m\n      \u001b[0m\u001b[90m\n      at Context.<anonymous> (tests/unit/services/platform-detector.test.js:171:41)\n      at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n\u001b[0m\n\u001b[0m  47) PlatformDetector\n       applyWindowsAudioRouting\n         should execute PowerShell commands for Windows audio routing:\n\n      \u001b[31mAssertionError: expected false to be true\u001b[0m\n      \u001b[32m+ expected\u001b[0m \u001b[31m- actual\u001b[0m\n\n      \u001b[31m-false\u001b[0m\n      \u001b[32m+true\u001b[0m\n      \u001b[0m\u001b[90m\n      at Context.<anonymous> (tests/unit/services/platform-detector.test.js:185:41)\n\u001b[0m\n\u001b[0m  48) PlatformDetector\n       applyLinuxAudioRouting\n         should execute pactl commands for Linux audio routing:\n\n      \u001b[31mAssertionError: expected false to be true\u001b[0m\n      \u001b[32m+ expected\u001b[0m \u001b[31m- actual\u001b[0m\n\n      \u001b[31m-false\u001b[0m\n      \u001b[32m+true\u001b[0m\n      \u001b[0m\u001b[90m\n      at Context.<anonymous> (tests/unit/services/platform-detector.test.js:212:41)\n      at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n\u001b[0m\n\u001b[0m  49) Setup Automation Service\n       Platform Detection\n         should detect macOS correctly:\n\u001b[0m\u001b[31m     TypeError: setupAutomation.detectPlatform is not a function\u001b[0m\u001b[90m\n      at Context.<anonymous> (tests/unit/services/setup-automation.test.js:55:40)\n      at process.processImmediate (node:internal/timers:491:21)\n\u001b[0m\n\u001b[0m  50) Setup Automation Service\n       Platform Detection\n         should detect Windows correctly:\n\u001b[0m\u001b[31m     TypeError: setupAutomation.detectPlatform is not a function\u001b[0m\u001b[90m\n      at Context.<anonymous> (tests/unit/services/setup-automation.test.js:61:40)\n      at process.processImmediate (node:internal/timers:491:21)\n\u001b[0m\n\u001b[0m  51) Setup Automation Service\n       Platform Detection\n         should detect Linux correctly:\n\u001b[0m\u001b[31m     TypeError: setupAutomation.detectPlatform is not a function\u001b[0m\u001b[90m\n      at Context.<anonymous> (tests/unit/services/setup-automation.test.js:67:40)\n      at process.processImmediate (node:internal/timers:491:21)\n\u001b[0m\n\u001b[0m  52) Setup Automation Service\n       Platform Detection\n         should throw error for unsupported platform:\n\n      \u001b[31mAssertionError: expected [Function] to throw error including 'Unsupported platform: freebsd' but got 'setupAutomation.detectPlatform is not…'\u001b[0m\n      \u001b[32m+ expected\u001b[0m \u001b[31m- actual\u001b[0m\n\n      \u001b[31m-setupAutomation.detectPlatform is not a function\u001b[0m\n      \u001b[32m+Unsupported platform: freebsd\u001b[0m\n      \u001b[0m\u001b[90m\n      at Context.<anonymous> (tests/unit/services/setup-automation.test.js:73:62)\n      at process.processImmediate (node:internal/timers:491:21)\n\u001b[0m\n\u001b[0m  53) Setup Automation Service\n       Virtual Audio Installation\n         should install VB-Audio Cable on Windows:\n\u001b[0m\u001b[31m     Error: Timeout of 5000ms exceeded. For async tests and hooks, ensure \"done()\" is called; if returning a Promise, ensure it resolves. (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/tests/unit/services/setup-automation.test.js)\u001b[0m\u001b[90m\n      at listOnTimeout (node:internal/timers:594:17)\n      at process.processTimers (node:internal/timers:529:7)\n\u001b[0m\n\u001b[0m  54) Setup Automation Service\n       Virtual Audio Installation\n         should install BlackHole on macOS:\n\u001b[0m\u001b[31m     Error: Timeout of 5000ms exceeded. For async tests and hooks, ensure \"done()\" is called; if returning a Promise, ensure it resolves. (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/tests/unit/services/setup-automation.test.js)\u001b[0m\u001b[90m\n      at listOnTimeout (node:internal/timers:594:17)\n      at process.processTimers (node:internal/timers:529:7)\n\u001b[0m\n\u001b[0m  55) Setup Automation Service\n       Virtual Audio Installation\n         should create PulseAudio virtual sinks on Linux:\n\u001b[0m\u001b[31m     Error: Timeout of 5000ms exceeded. For async tests and hooks, ensure \"done()\" is called; if returning a Promise, ensure it resolves. (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/tests/unit/services/setup-automation.test.js)\u001b[0m\u001b[90m\n      at listOnTimeout (node:internal/timers:594:17)\n      at process.processTimers (node:internal/timers:529:7)\n\u001b[0m\n\u001b[0m  56) Setup Automation Service\n       Virtual Audio Installation\n         should handle installation errors:\n\u001b[0m\u001b[31m     Error: Timeout of 5000ms exceeded. For async tests and hooks, ensure \"done()\" is called; if returning a Promise, ensure it resolves. (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/tests/unit/services/setup-automation.test.js)\u001b[0m\u001b[90m\n      at listOnTimeout (node:internal/timers:594:17)\n      at process.processTimers (node:internal/timers:529:7)\n\u001b[0m\n\u001b[0m  57) Setup Automation Service\n       Audio Device Configuration\n         should configure audio devices successfully:\n\u001b[0m\u001b[31m     AssertionError: expected undefined to be an object\u001b[0m\u001b[90m\n      at Context.<anonymous> (tests/unit/services/setup-automation.test.js:130:36)\n\u001b[0m\n\u001b[0m  58) Setup Automation Service\n       Audio Device Configuration\n         should handle device configuration errors:\n\n      \u001b[31mAssertionError: expected true to be false\u001b[0m\n      \u001b[32m+ expected\u001b[0m \u001b[31m- actual\u001b[0m\n\n      \u001b[31m-true\u001b[0m\n      \u001b[32m+false\u001b[0m\n      \u001b[0m\u001b[90m\n      at Context.<anonymous> (tests/unit/services/setup-automation.test.js:138:35)\n\u001b[0m\n\u001b[0m  59) Setup Automation Service\n       Communication App Configuration\n         should configure Discord settings:\n\u001b[0m\u001b[31m     AssertionError: the given combination of arguments (undefined and string) is invalid for this assertion. You can use an array, a map, an object, a set, a string, or a weakset instead of a string\u001b[0m\u001b[90m\n      at Context.<anonymous> (tests/unit/services/setup-automation.test.js:152:30)\n\u001b[0m\n\u001b[0m  60) Setup Automation Service\n       Communication App Configuration\n         should configure Zoom settings:\n\u001b[0m\u001b[31m     AssertionError: the given combination of arguments (undefined and string) is invalid for this assertion. You can use an array, a map, an object, a set, a string, or a weakset instead of a string\u001b[0m\u001b[90m\n      at Context.<anonymous> (tests/unit/services/setup-automation.test.js:163:30)\n\u001b[0m\n\u001b[0m  61) Setup Automation Service\n       Communication App Configuration\n         should handle app configuration errors:\n\n      \u001b[31mAssertionError: expected true to be false\u001b[0m\n      \u001b[32m+ expected\u001b[0m \u001b[31m- actual\u001b[0m\n\n      \u001b[31m-true\u001b[0m\n      \u001b[32m+false\u001b[0m\n      \u001b[0m\u001b[90m\n      at Context.<anonymous> (tests/unit/services/setup-automation.test.js:171:35)\n\u001b[0m\n\u001b[0m  62) Setup Automation Service\n       Configuration File Creation\n         should create configuration files successfully:\n\n      \u001b[31mAssertionError: expected false to be true\u001b[0m\n      \u001b[32m+ expected\u001b[0m \u001b[31m- actual\u001b[0m\n\n      \u001b[31m-false\u001b[0m\n      \u001b[32m+true\u001b[0m\n      \u001b[0m\u001b[90m\n      at Context.<anonymous> (tests/unit/services/setup-automation.test.js:188:35)\n\u001b[0m\n\u001b[0m  63) Setup Automation Service\n       Configuration File Creation\n         should handle configuration file creation errors:\n\u001b[0m\u001b[31m     AssertionError: expected 'ENOENT: no such file or directory, mk…' to include 'Write failed'\u001b[0m\u001b[90m\n      at Context.<anonymous> (tests/unit/services/setup-automation.test.js:201:31)\n\u001b[0m\n\u001b[0m  64) Setup Automation Service\n       Complete Setup Process\n         should run complete setup successfully:\n\u001b[0m\u001b[31m     TypeError: setupAutomation.runCompleteSetup is not a function\u001b[0m\u001b[90m\n      at Context.<anonymous> (tests/unit/services/setup-automation.test.js:212:44)\n      at process.processImmediate (node:internal/timers:491:21)\n\u001b[0m\n\u001b[0m  65) Setup Automation Service\n       Complete Setup Process\n         should handle setup step failures gracefully:\n\u001b[0m\u001b[31m     TypeError: setupAutomation.runCompleteSetup is not a function\u001b[0m\u001b[90m\n      at Context.<anonymous> (tests/unit/services/setup-automation.test.js:223:44)\n      at process.processImmediate (node:internal/timers:491:21)\n\u001b[0m\n\u001b[0m  66) Setup Automation Service\n       Complete Setup Process\n         should provide detailed step results:\n\u001b[0m\u001b[31m     TypeError: setupAutomation.runCompleteSetup is not a function\u001b[0m\u001b[90m\n      at Context.<anonymous> (tests/unit/services/setup-automation.test.js:236:44)\n      at process.processImmediate (node:internal/timers:491:21)\n\u001b[0m\n\u001b[0m  67) Setup Automation Service\n       Error Handling\n         should handle timeout errors:\n\u001b[0m\u001b[31m     Error: Timeout of 5000ms exceeded. For async tests and hooks, ensure \"done()\" is called; if returning a Promise, ensure it resolves. (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/tests/unit/services/setup-automation.test.js)\u001b[0m\u001b[90m\n      at listOnTimeout (node:internal/timers:594:17)\n      at process.processTimers (node:internal/timers:529:7)\n\u001b[0m\n\u001b[0m  68) Setup Automation Service\n       Error Handling\n         should handle permission errors:\n\u001b[0m\u001b[31m     Error: Timeout of 5000ms exceeded. For async tests and hooks, ensure \"done()\" is called; if returning a Promise, ensure it resolves. (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/tests/unit/services/setup-automation.test.js)\u001b[0m\u001b[90m\n      at listOnTimeout (node:internal/timers:594:17)\n      at process.processTimers (node:internal/timers:529:7)\n\u001b[0m\n\u001b[0m  69) Setup Automation Service\n       Error Handling\n         should handle network errors:\n\u001b[0m\u001b[31m     Error: Timeout of 5000ms exceeded. For async tests and hooks, ensure \"done()\" is called; if returning a Promise, ensure it resolves. (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/tests/unit/services/setup-automation.test.js)\u001b[0m\u001b[90m\n      at listOnTimeout (node:internal/timers:594:17)\n      at process.processTimers (node:internal/timers:529:7)\n\u001b[0m\n\u001b[0m  70) Setup Automation Service\n       Validation\n         should validate platform support:\n\u001b[0m\u001b[31m     TypeError: setupAutomation.isPlatformSupported is not a function\u001b[0m\u001b[90m\n      at Context.<anonymous> (tests/unit/services/setup-automation.test.js:281:30)\n      at process.processImmediate (node:internal/timers:491:21)\n\u001b[0m\n\u001b[0m  71) Setup Automation Service\n       Validation\n         should validate app support:\n\u001b[0m\u001b[31m     TypeError: setupAutomation.isAppSupported is not a function\u001b[0m\u001b[90m\n      at Context.<anonymous> (tests/unit/services/setup-automation.test.js:288:30)\n      at process.processImmediate (node:internal/timers:491:21)\n\u001b[0m\n\u001b[0m  72) Setup Automation Service\n       Validation\n         should validate configuration:\n\u001b[0m\u001b[31m     TypeError: setupAutomation.validateConfiguration is not a function\u001b[0m\u001b[90m\n      at Context.<anonymous> (tests/unit/services/setup-automation.test.js:304:30)\n      at process.processImmediate (node:internal/timers:491:21)\n\u001b[0m\n\u001b[0m  73) AzureTranslator\n       initialization\n         should initialize successfully with valid credentials:\n\u001b[0m\u001b[31m     Error: Azure Translator connection test failed: Azure Translator error: Cannot read properties of undefined (reading 'data')\u001b[0m\u001b[90m\n      at AzureTranslator.testConnection (src/services/translation/azure-translator.js:79:19)\n      at async AzureTranslator.initialize (src/services/translation/azure-translator.js:51:13)\n      at async Context.<anonymous> (tests/unit/services/translation/azure-translator.test.js:41:28)\n\u001b[0m\n\u001b[0m  74) AzureTranslator\n       initialization\n         should handle API errors during initialization:\n\u001b[0m\u001b[31m     AssertionError: expected 'Azure Translator connection test fail…' to include 'Unable to connect to Azure'\u001b[0m\u001b[90m\n      at Context.<anonymous> (tests/unit/services/translation/azure-translator.test.js:72:42)\n\u001b[0m\n\u001b[0m  75) AzureTranslator\n       translate\n         should translate text successfully:\n\u001b[0m\u001b[31m     TypeError: sandbox.stub(...).returns is not a function\u001b[0m\u001b[90m\n      at Context.<anonymous> (tests/unit/services/translation/azure-translator.test.js:106:34)\n      at process.processImmediate (node:internal/timers:491:21)\n\u001b[0m\n\u001b[0m  76) AzureTranslator\n       detectLanguage\n         should detect language correctly:\n\u001b[0m\u001b[31m     AssertionError: expected undefined to be true\u001b[0m\u001b[90m\n      at Context.<anonymous> (tests/unit/services/translation/azure-translator.test.js:268:56)\n\u001b[0m\n\u001b[0m  77) AzureTranslator\n       detectLanguage\n         should handle empty text in language detection:\n\u001b[0m\u001b[31m     AssertionError: expected 'Cannot read properties of undefined (…' to include 'Text cannot be empty'\u001b[0m\u001b[90m\n      at Context.<anonymous> (tests/unit/services/translation/azure-translator.test.js:282:42)\n\u001b[0m\n\u001b[0m  78) GPT4oTranslator\n       initialization\n         should initialize successfully with valid API key:\n\u001b[0m\u001b[31m     Error: GPT-4o connection test failed: Connection test response was unexpected\u001b[0m\u001b[90m\n      at GPT4oTranslator.testConnection (src/services/translation/gpt4o-translator.js:95:19)\n      at async GPT4oTranslator.initialize (src/services/translation/gpt4o-translator.js:57:13)\n      at async Context.<anonymous> (tests/unit/services/translation/gpt4o-translator.test.js:40:28)\n\u001b[0m\n\u001b[0m  79) GPT4oTranslator\n       initialization\n         should handle missing API key:\n\u001b[0m\u001b[31m     AssertionError: expected 'GPT-4o connection test failed: Connec…' to include 'API key'\u001b[0m\u001b[90m\n      at Context.<anonymous> (tests/unit/services/translation/gpt4o-translator.test.js:54:42)\n\u001b[0m\n\u001b[0m  80) GPT4oTranslator\n       translate\n         should translate text successfully:\n\u001b[0m\u001b[31m     TypeError: Cannot read properties of undefined (reading 'tone')\u001b[0m\u001b[90m\n      at GPT4oTranslator.buildTranslationContext (src/services/translation/gpt4o-translator.js:272:56)\n      at GPT4oTranslator.translate (src/services/translation/gpt4o-translator.js:162:55)\n      at Context.<anonymous> (tests/unit/services/translation/gpt4o-translator.test.js:100:45)\n\u001b[0m\n\u001b[0m  81) GPT4oTranslator\n       translate\n         should handle API errors gracefully:\n\u001b[0m\u001b[31m     AssertionError: expected 'Cannot read properties of undefined (…' to include 'Rate limit exceeded'\u001b[0m\u001b[90m\n      at Context.<anonymous> (tests/unit/services/translation/gpt4o-translator.test.js:119:42)\n\u001b[0m\n\u001b[0m  82) GPT4oTranslator\n       translate\n         should handle malformed API responses:\n\u001b[0m\u001b[31m     AssertionError: expected 'Cannot read properties of undefined (…' to include 'Failed to parse translation response'\u001b[0m\u001b[90m\n      at Context.<anonymous> (tests/unit/services/translation/gpt4o-translator.test.js:145:42)\n\u001b[0m\n\u001b[0m  83) GPT4oTranslator\n       translate\n         should update conversation context when provided:\n\u001b[0m\u001b[31m     TypeError: Cannot read properties of undefined (reading 'tone')\u001b[0m\u001b[90m\n      at GPT4oTranslator.buildTranslationContext (src/services/translation/gpt4o-translator.js:272:56)\n      at GPT4oTranslator.translate (src/services/translation/gpt4o-translator.js:162:55)\n      at Context.<anonymous> (tests/unit/services/translation/gpt4o-translator.test.js:173:30)\n\u001b[0m\n\u001b[0m  84) GPT4oTranslator\n       updateConversationContext\n         should limit context size to configured window:\n\n      \u001b[31mAssertionError: expected 3 to equal 2\u001b[0m\n      \u001b[32m+ expected\u001b[0m \u001b[31m- actual\u001b[0m\n\n      \u001b[31m-3\u001b[0m\n      \u001b[32m+2\u001b[0m\n      \u001b[0m\u001b[90m\n      at Context.<anonymous> (tests/unit/services/translation/gpt4o-translator.test.js:300:39)\n      at process.processImmediate (node:internal/timers:491:21)\n\u001b[0m\n\u001b[0m  85) TranslationManager\n       initialization\n         should initialize successfully with all services:\n\u001b[0m\u001b[31m     TypeError: Cannot stub non-existent property initialize\u001b[0m\u001b[90m\n      at Function.stub (node_modules/sinon/lib/sinon/stub.js:82:15)\n      at Sandbox.stub (node_modules/sinon/lib/sinon/sandbox.js:389:39)\n      at Context.<anonymous> (tests/unit/services/translation/translation-manager.test.js:31:21)\n      at process.processImmediate (node:internal/timers:491:21)\n\u001b[0m\n\u001b[0m  86) TranslationManager\n       initialization\n         should handle service initialization failures gracefully:\n\u001b[0m\u001b[31m     TypeError: Cannot stub non-existent property initialize\u001b[0m\u001b[90m\n      at Function.stub (node_modules/sinon/lib/sinon/stub.js:82:15)\n      at Sandbox.stub (node_modules/sinon/lib/sinon/sandbox.js:389:39)\n      at Context.<anonymous> (tests/unit/services/translation/translation-manager.test.js:54:21)\n      at process.processImmediate (node:internal/timers:491:21)\n\u001b[0m\n\u001b[0m  87) TranslationManager\n       translate\n         should use cached translation when available:\n\u001b[0m\u001b[31m     TypeError: Attempted to wrap get which is already wrapped\u001b[0m\u001b[90m\n      at checkWrappedMethod (node_modules/sinon/lib/sinon/util/core/wrap-method.js:67:21)\n      at wrapMethod (node_modules/sinon/lib/sinon/util/core/wrap-method.js:132:13)\n      at Function.stub (node_modules/sinon/lib/sinon/stub.js:130:44)\n      at Sandbox.stub (node_modules/sinon/lib/sinon/sandbox.js:389:39)\n      at Context.<anonymous> (tests/unit/services/translation/translation-manager.test.js:120:21)\n  --------------\n  Error: Stack Trace for original\n      at extendObjectWithWrappedMethods (node_modules/sinon/lib/sinon/util/core/wrap-method.js:173:34)\n      at wrapMethod (node_modules/sinon/lib/sinon/util/core/wrap-method.js:161:5)\n      at Function.stub (node_modules/sinon/lib/sinon/stub.js:130:44)\n      at Sandbox.stub (node_modules/sinon/lib/sinon/sandbox.js:389:39)\n      at Context.<anonymous> (tests/unit/services/translation/translation-manager.test.js:74:21)\n      at process.processImmediate (node:internal/timers:491:21)\n\u001b[0m\n\u001b[0m  88) TranslationManager\n       fallbackTranslation\n         should try alternative services when primary fails:\n\u001b[0m\u001b[31m     TypeError: Cannot read properties of undefined (reading 'success')\u001b[0m\u001b[90m\n      at TranslationManager.fallbackTranslation (src/services/translation/translation-manager.js:383:24)\n      at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n      at async Context.<anonymous> (tests/unit/services/translation/translation-manager.test.js:247:28)\n\u001b[0m\n\u001b[0m  89) TranslationService\n       initialization\n         should create an instance with the provided config:\n\u001b[0m\u001b[31m     TypeError: Cannot read properties of undefined (reading 'serviceName')\u001b[0m\u001b[90m\n      at Context.<anonymous> (tests/unit/services/translation/translation-service.test.js:24:35)\n      at process.processImmediate (node:internal/timers:491:21)\n\u001b[0m\n\u001b[0m  90) TranslationService\n       initialization\n         should have default values for non-provided config options:\n\u001b[0m\u001b[31m     TypeError: Cannot read properties of undefined (reading 'timeout')\u001b[0m\u001b[90m\n      at Context.<anonymous> (tests/unit/services/translation/translation-service.test.js:29:35)\n      at process.processImmediate (node:internal/timers:491:21)\n\u001b[0m\n\u001b[0m  91) TranslationService\n       abstract methods\n         should throw error for abstract translate method:\n\u001b[0m\u001b[31m     AssertionError: expected 'Should have thrown an error' to include 'Method not implemented'\u001b[0m\u001b[90m\n      at Context.<anonymous> (tests/unit/services/translation/translation-service.test.js:40:40)\n\u001b[0m\n\u001b[0m  92) TranslationService\n       abstract methods\n         should throw error for abstract detectLanguage method:\n\u001b[0m\u001b[31m     AssertionError: expected 'Should have thrown an error' to include 'Method not implemented'\u001b[0m\u001b[90m\n      at Context.<anonymous> (tests/unit/services/translation/translation-service.test.js:49:40)\n\u001b[0m\n\u001b[0m  93) TranslationService\n       utility methods\n         should format language codes correctly:\n\u001b[0m\u001b[31m     TypeError: service.formatLanguageCode is not a function\u001b[0m\u001b[90m\n      at Context.<anonymous> (tests/unit/services/translation/translation-service.test.js:56:28)\n      at process.processImmediate (node:internal/timers:491:21)\n\u001b[0m\n\u001b[0m  94) ContextManager\n       initialization\n         should initialize with default settings:\n\u001b[0m\u001b[31m     TypeError: Cannot read properties of undefined (reading 'maxContextEntries')\u001b[0m\u001b[90m\n      at Context.<anonymous> (tests/unit/services/translation/utils/context-manager.test.js:28:42)\n      at process.processImmediate (node:internal/timers:491:21)\n\u001b[0m\n\u001b[0m  95) ContextManager\n       initialization\n         should initialize with custom settings:\n\u001b[0m\u001b[31m     TypeError: Cannot read properties of undefined (reading 'maxContextEntries')\u001b[0m\u001b[90m\n      at Context.<anonymous> (tests/unit/services/translation/utils/context-manager.test.js:33:42)\n      at process.processImmediate (node:internal/timers:491:21)\n\u001b[0m\n\u001b[0m  96) ContextManager\n       initialization\n         should initialize empty conversation contexts:\n\u001b[0m\u001b[31m     AssertionError: expected undefined to be an instance of Map\u001b[0m\u001b[90m\n      at Context.<anonymous> (tests/unit/services/translation/utils/context-manager.test.js:38:63)\n      at process.processImmediate (node:internal/timers:491:21)\n\u001b[0m\n\u001b[0m  97) ContextManager\n       addTranslationEntry\n         should add entries to the correct conversation:\n\u001b[0m\u001b[31m     TypeError: Cannot read properties of undefined (reading 'has')\u001b[0m\u001b[90m\n      at Context.<anonymous> (tests/unit/services/translation/utils/context-manager.test.js:54:56)\n      at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n\u001b[0m\n\u001b[0m  98) ContextManager\n       addTranslationEntry\n         should handle missing conversation ID:\n\u001b[0m\u001b[31m     TypeError: Cannot read properties of undefined (reading 'size')\u001b[0m\u001b[90m\n      at Context.<anonymous> (tests/unit/services/translation/utils/context-manager.test.js:69:56)\n      at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n\u001b[0m\n\u001b[0m  99) ContextManager\n       addTranslationEntry\n         should add multiple entries to the same conversation:\n\u001b[0m\u001b[31m     TypeError: Cannot read properties of undefined (reading 'get')\u001b[0m\u001b[90m\n      at Context.<anonymous> (tests/unit/services/translation/utils/context-manager.test.js:87:65)\n      at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n\u001b[0m\n\u001b[0m  100) ContextManager\n       addTranslationEntry\n         should respect maxContextEntries limit:\n\u001b[0m\u001b[31m     TypeError: Cannot read properties of undefined (reading 'get')\u001b[0m\u001b[90m\n      at Context.<anonymous> (tests/unit/services/translation/utils/context-manager.test.js:103:65)\n      at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n\u001b[0m\n\u001b[0m  101) ContextManager\n       getConversationContext\n         should format context entries correctly:\n\n      \u001b[31mAssertionError: expected +0 to be above +0\u001b[0m\n      \u001b[32m+ expected\u001b[0m \u001b[31m- actual\u001b[0m\n\n\u001b[0m\u001b[90m\n      at Context.<anonymous> (tests/unit/services/translation/utils/context-manager.test.js:143:42)\n      at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n\u001b[0m\n\u001b[0m  102) ContextManager\n       getConversationContext\n         should handle bidirectional conversation correctly:\n\u001b[0m\u001b[31m     AssertionError: expected '' to include 'Hello -> Hola'\u001b[0m\u001b[90m\n      at Context.<anonymous> (tests/unit/services/translation/utils/context-manager.test.js:169:32)\n      at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n\u001b[0m\n\u001b[0m  103) ContextManager\n       pruneOldEntries\n         should remove entries older than maxContextAgeMs:\n\u001b[0m\u001b[31m     TypeError: contextManager.pruneOldEntries is not a function\u001b[0m\u001b[90m\n      at Context.<anonymous> (tests/unit/services/translation/utils/context-manager.test.js:194:28)\n      at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n\u001b[0m\n\u001b[0m  104) ContextManager\n       pruneOldEntries\n         should handle non-existent conversation ID:\n\u001b[0m\u001b[31m     TypeError: contextManager.pruneOldEntries is not a function\u001b[0m\u001b[90m\n      at Context.<anonymous> (tests/unit/services/translation/utils/context-manager.test.js:203:28)\n      at process.processImmediate (node:internal/timers:491:21)\n\u001b[0m\n\u001b[0m  105) ContextManager\n       clearContext\n         should clear a specific conversation:\n\u001b[0m\u001b[31m     TypeError: contextManager.clearContext is not a function\u001b[0m\u001b[90m\n      at Context.<anonymous> (tests/unit/services/translation/utils/context-manager.test.js:221:34)\n      at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n\u001b[0m\n\u001b[0m  106) ContextManager\n       clearContext\n         should clear all conversations when no ID is provided:\n\u001b[0m\u001b[31m     TypeError: contextManager.clearContext is not a function\u001b[0m\u001b[90m\n      at Context.<anonymous> (tests/unit/services/translation/utils/context-manager.test.js:240:34)\n      at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n\u001b[0m\n\u001b[0m  107) ContextManager\n       clearContext\n         should handle non-existent conversation ID:\n\u001b[0m\u001b[31m     TypeError: contextManager.clearContext is not a function\u001b[0m\u001b[90m\n      at Context.<anonymous> (tests/unit/services/translation/utils/context-manager.test.js:247:34)\n      at process.processImmediate (node:internal/timers:491:21)\n\u001b[0m\n\u001b[0m  108) ContextManager\n       edge cases\n         should handle empty entries:\n\u001b[0m\u001b[31m     AssertionError: expected '' to include ' ->  '\u001b[0m\u001b[90m\n      at Context.<anonymous> (tests/unit/services/translation/utils/context-manager.test.js:262:32)\n      at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n\u001b[0m\n\u001b[0m  109) ContextManager\n       edge cases\n         should handle entries without timestamps:\n\u001b[0m\u001b[31m     TypeError: Cannot read properties of undefined (reading 'get')\u001b[0m\u001b[90m\n      at Context.<anonymous> (tests/unit/services/translation/utils/context-manager.test.js:275:65)\n      at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n\u001b[0m\n\u001b[0m  110) ContextManager\n       edge cases\n         should handle special characters in context:\n\u001b[0m\u001b[31m     AssertionError: expected '' to include 'Special: !@#$%^&*()_+{}[]|\\:;\"\\'<>,.?…'\u001b[0m\u001b[90m\n      at Context.<anonymous> (tests/unit/services/translation/utils/context-manager.test.js:289:32)\n      at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n\u001b[0m\n\u001b[0m  111) LanguagePairOptimizer\n       initialization\n         should initialize language pairs from config:\n\u001b[0m\u001b[31m     AssertionError: expected undefined to be an instance of Map\u001b[0m\u001b[90m\n      at Context.<anonymous> (tests/unit/services/translation/utils/language-pair-optimizer.test.js:37:51)\n      at process.processImmediate (node:internal/timers:491:21)\n\u001b[0m\n\u001b[0m  112) LanguagePairOptimizer\n       initialization\n         should load language sets from config:\n\u001b[0m\u001b[31m     AssertionError: expected undefined to be an instance of Set\u001b[0m\u001b[90m\n      at Context.<anonymous> (tests/unit/services/translation/utils/language-pair-optimizer.test.js:42:55)\n      at process.processImmediate (node:internal/timers:491:21)\n\u001b[0m\n\u001b[0m  113) LanguagePairOptimizer\n       initialization\n         should load default ranking from config:\n\u001b[0m\u001b[31m     AssertionError: expected undefined to be an object\u001b[0m\u001b[90m\n      at Context.<anonymous> (tests/unit/services/translation/utils/language-pair-optimizer.test.js:55:52)\n      at process.processImmediate (node:internal/timers:491:21)\n\u001b[0m\n\u001b[0m  114) LanguagePairOptimizer\n       getBestServiceForLanguagePair\n         should select based on language pair config:\n\u001b[0m\u001b[31m     TypeError: Cannot read properties of undefined (reading 'general')\u001b[0m\u001b[90m\n      at LanguagePairOptimizer.getBestServiceForLanguagePair (src/services/translation/utils/language-pair-optimizer.js:112:57)\n      at Context.<anonymous> (tests/unit/services/translation/utils/language-pair-optimizer.test.js:64:39)\n      at process.processImmediate (node:internal/timers:491:21)\n\u001b[0m\n\u001b[0m  115) LanguagePairOptimizer\n       getBestServiceForLanguagePair\n         should prioritize based on quality score:\n\u001b[0m\u001b[31m     TypeError: Cannot read properties of undefined (reading 'set')\u001b[0m\u001b[90m\n      at Context.<anonymous> (tests/unit/services/translation/utils/language-pair-optimizer.test.js:80:37)\n      at process.processImmediate (node:internal/timers:491:21)\n\u001b[0m\n\u001b[0m  116) LanguagePairOptimizer\n       getBestServiceForLanguagePair\n         should prioritize based on speed:\n\u001b[0m\u001b[31m     TypeError: Cannot read properties of undefined (reading 'set')\u001b[0m\u001b[90m\n      at Context.<anonymous> (tests/unit/services/translation/utils/language-pair-optimizer.test.js:107:37)\n      at process.processImmediate (node:internal/timers:491:21)\n\u001b[0m\n\u001b[0m  117) LanguagePairOptimizer\n       getBestServiceForLanguagePair\n         should respect service health status:\n\u001b[0m\u001b[31m     TypeError: Cannot read properties of undefined (reading 'set')\u001b[0m\u001b[90m\n      at Context.<anonymous> (tests/unit/services/translation/utils/language-pair-optimizer.test.js:134:37)\n      at process.processImmediate (node:internal/timers:491:21)\n\u001b[0m\n\u001b[0m  118) LanguagePairOptimizer\n       getBestServiceForLanguagePair\n         should handle unconfigured language pairs:\n\u001b[0m\u001b[31m     TypeError: Cannot read properties of undefined (reading 'general')\u001b[0m\u001b[90m\n      at LanguagePairOptimizer.getBestServiceForLanguagePair (src/services/translation/utils/language-pair-optimizer.js:112:57)\n      at Context.<anonymous> (tests/unit/services/translation/utils/language-pair-optimizer.test.js:161:39)\n      at process.processImmediate (node:internal/timers:491:21)\n\u001b[0m\n\u001b[0m  119) LanguagePairOptimizer\n       getBestServiceForLanguagePair\n         should prefer DeepL for European languages:\n\u001b[0m\u001b[31m     TypeError: Cannot read properties of undefined (reading 'general')\u001b[0m\u001b[90m\n      at LanguagePairOptimizer.getBestServiceForLanguagePair (src/services/translation/utils/language-pair-optimizer.js:112:57)\n      at Context.<anonymous> (tests/unit/services/translation/utils/language-pair-optimizer.test.js:177:39)\n      at process.processImmediate (node:internal/timers:491:21)\n\u001b[0m\n\u001b[0m  120) LanguagePairOptimizer\n       getBestServiceForLanguagePair\n         should prefer GPT-4o for Asian languages:\n\u001b[0m\u001b[31m     TypeError: Cannot read properties of undefined (reading 'general')\u001b[0m\u001b[90m\n      at LanguagePairOptimizer.getBestServiceForLanguagePair (src/services/translation/utils/language-pair-optimizer.js:112:57)\n      at Context.<anonymous> (tests/unit/services/translation/utils/language-pair-optimizer.test.js:193:39)\n      at process.processImmediate (node:internal/timers:491:21)\n\u001b[0m\n\u001b[0m  121) LanguagePairOptimizer\n       getBestServiceForLanguagePair\n         should respect user preference:\n\u001b[0m\u001b[31m     TypeError: Cannot read properties of undefined (reading 'google')\u001b[0m\u001b[90m\n      at LanguagePairOptimizer.isServiceSupportingLanguagePair (src/services/translation/utils/language-pair-optimizer.js:208:74)\n      at LanguagePairOptimizer.getBestServiceForLanguagePair (src/services/translation/utils/language-pair-optimizer.js:72:36)\n      at Context.<anonymous> (tests/unit/services/translation/utils/language-pair-optimizer.test.js:209:39)\n      at process.processImmediate (node:internal/timers:491:21)\n\u001b[0m\n\u001b[0m  122) LanguagePairOptimizer\n       getBestServiceForLanguagePair\n         should ignore unhealthy user preference:\n\u001b[0m\u001b[31m     TypeError: Cannot read properties of undefined (reading 'google')\u001b[0m\u001b[90m\n      at LanguagePairOptimizer.isServiceSupportingLanguagePair (src/services/translation/utils/language-pair-optimizer.js:208:74)\n      at LanguagePairOptimizer.getBestServiceForLanguagePair (src/services/translation/utils/language-pair-optimizer.js:72:36)\n      at Context.<anonymous> (tests/unit/services/translation/utils/language-pair-optimizer.test.js:226:39)\n      at process.processImmediate (node:internal/timers:491:21)\n\u001b[0m\n\u001b[0m  123) LanguagePairOptimizer\n       getBestServiceForLanguagePair\n         should prioritize context-aware services when context is required:\n\u001b[0m\u001b[31m     TypeError: Cannot read properties of undefined (reading 'gpt4o')\u001b[0m\u001b[90m\n      at LanguagePairOptimizer.isServiceSupportingLanguagePair (src/services/translation/utils/language-pair-optimizer.js:208:74)\n      at LanguagePairOptimizer.getBestServiceForLanguagePair (src/services/translation/utils/language-pair-optimizer.js:80:22)\n      at Context.<anonymous> (tests/unit/services/translation/utils/language-pair-optimizer.test.js:242:39)\n      at process.processImmediate (node:internal/timers:491:21)\n\u001b[0m\n\u001b[0m  124) LanguagePairOptimizer\n       getBestServiceForLanguagePair\n         should return a healthy service when all preferred services are unhealthy:\n\u001b[0m\u001b[31m     TypeError: Cannot read properties of undefined (reading 'general')\u001b[0m\u001b[90m\n      at LanguagePairOptimizer.getBestServiceForLanguagePair (src/services/translation/utils/language-pair-optimizer.js:112:57)\n      at Context.<anonymous> (tests/unit/services/translation/utils/language-pair-optimizer.test.js:259:39)\n      at process.processImmediate (node:internal/timers:491:21)\n\u001b[0m\n\u001b[0m  125) LanguagePairOptimizer\n       updateQualityScore\n         should update quality score with smoothing:\n\u001b[0m\u001b[31m     TypeError: Cannot read properties of undefined (reading 'set')\u001b[0m\u001b[90m\n      at Context.<anonymous> (tests/unit/services/translation/utils/language-pair-optimizer.test.js:277:37)\n      at process.processImmediate (node:internal/timers:491:21)\n\u001b[0m\n\u001b[0m  126) LanguagePairOptimizer\n       edge cases\n         should handle all services being unhealthy:\n\u001b[0m\u001b[31m     TypeError: Cannot read properties of undefined (reading 'general')\u001b[0m\u001b[90m\n      at LanguagePairOptimizer.getBestServiceForLanguagePair (src/services/translation/utils/language-pair-optimizer.js:112:57)\n      at Context.<anonymous> (tests/unit/services/translation/utils/language-pair-optimizer.test.js:308:39)\n      at process.processImmediate (node:internal/timers:491:21)\n\u001b[0m\n\u001b[0m  127) LanguagePairOptimizer\n       edge cases\n         should handle empty serviceHealth object:\n\u001b[0m\u001b[31m     TypeError: Cannot read properties of undefined (reading 'general')\u001b[0m\u001b[90m\n      at LanguagePairOptimizer.getBestServiceForLanguagePair (src/services/translation/utils/language-pair-optimizer.js:112:57)\n      at Context.<anonymous> (tests/unit/services/translation/utils/language-pair-optimizer.test.js:323:39)\n      at process.processImmediate (node:internal/timers:491:21)\n\u001b[0m\n\u001b[0m  128) LanguagePairOptimizer\n       edge cases\n         should handle missing options:\n\u001b[0m\u001b[31m     TypeError: Cannot read properties of undefined (reading 'general')\u001b[0m\u001b[90m\n      at LanguagePairOptimizer.getBestServiceForLanguagePair (src/services/translation/utils/language-pair-optimizer.js:112:57)\n      at Context.<anonymous> (tests/unit/services/translation/utils/language-pair-optimizer.test.js:333:39)\n      at process.processImmediate (node:internal/timers:491:21)\n\u001b[0m\n\u001b[0m  129) TranslationCache\n       initialization\n         should initialize with default settings:\n\u001b[0m\u001b[31m     TypeError: Cannot read properties of undefined (reading 'maxCacheSize')\u001b[0m\u001b[90m\n      at Context.<anonymous> (tests/unit/services/translation/utils/translation-cache.test.js:28:40)\n      at process.processImmediate (node:internal/timers:491:21)\n\u001b[0m\n\u001b[0m  130) TranslationCache\n       initialization\n         should initialize with custom settings:\n\u001b[0m\u001b[31m     TypeError: Cannot read properties of undefined (reading 'maxCacheSize')\u001b[0m\u001b[90m\n      at Context.<anonymous> (tests/unit/services/translation/utils/translation-cache.test.js:33:33)\n      at process.processImmediate (node:internal/timers:491:21)\n\u001b[0m\n\u001b[0m  131) TranslationCache\n       initialization\n         should initialize stats with zero values:\n\u001b[0m\u001b[31m     AssertionError: expected undefined to equal +0\u001b[0m\u001b[90m\n      at Context.<anonymous> (tests/unit/services/translation/utils/translation-cache.test.js:40:50)\n      at process.processImmediate (node:internal/timers:491:21)\n\u001b[0m\n\u001b[0m  132) TranslationCache\n       set and get\n         should store and retrieve translations:\n\n      \u001b[31mAssertionError: expected { translation: 'Hola mundo', …(2) } to deeply equal { translation: 'Hola mundo', …(1) }\u001b[0m\n      \u001b[32m+ expected\u001b[0m \u001b[31m- actual\u001b[0m\n\n       {\n      \u001b[31m-  \"cachedAt\": 1751670625543\u001b[0m\n         \"confidence\": 0.95\n         \"translation\": \"Hola mundo\"\n       }\n      \u001b[0m\u001b[90m\n      at Context.<anonymous> (tests/unit/services/translation/utils/translation-cache.test.js:84:36)\n\u001b[0m\n\u001b[0m  133) TranslationCache\n       set and get\n         should also store service-agnostic entries:\n\u001b[0m\u001b[31m     AssertionError: expected null to deeply equal { translation: 'Hola mundo', …(1) }\u001b[0m\u001b[90m\n      at Context.<anonymous> (tests/unit/services/translation/utils/translation-cache.test.js:101:36)\n\u001b[0m\n\u001b[0m  134) TranslationCache\n       set and get\n         should update stats when retrieving entries:\n\u001b[0m\u001b[31m     AssertionError: expected undefined to equal 1\u001b[0m\u001b[90m\n      at Context.<anonymous> (tests/unit/services/translation/utils/translation-cache.test.js:112:50)\n\u001b[0m\n\u001b[0m  135) TranslationCache\n       set and get\n         should respect expiry times:\n\u001b[0m\u001b[31m     AssertionError: expected { translation: 'Hola', …(1) } to be null\u001b[0m\u001b[90m\n      at Context.<anonymous> (tests/unit/services/translation/utils/translation-cache.test.js:135:33)\n\u001b[0m\n\u001b[0m  136) TranslationCache\n       pruneCache\n         should remove expired entries:\n\u001b[0m\u001b[31m     TypeError: cache.pruneCache is not a function\u001b[0m\u001b[90m\n      at Context.<anonymous> (tests/unit/services/translation/utils/translation-cache.test.js:150:19)\n\u001b[0m\n\u001b[0m  137) TranslationCache\n       pruneCache\n         should respect maxCacheSize:\n\u001b[0m\u001b[31m     AssertionError: expected undefined to be a number or a date\u001b[0m\u001b[90m\n      at Context.<anonymous> (tests/unit/services/translation/utils/translation-cache.test.js:168:47)\n\u001b[0m\n\u001b[0m  138) TranslationCache\n       getStats\n         should return accurate statistics:\n\u001b[0m\u001b[31m     AssertionError: expected undefined to equal 4\u001b[0m\u001b[90m\n      at Context.<anonymous> (tests/unit/services/translation/utils/translation-cache.test.js:188:44)\n\u001b[0m\n\u001b[0m  139) TranslationCache\n       clear\n         should remove all entries:\n\u001b[0m\u001b[31m     TypeError: cache.clear is not a function\u001b[0m\u001b[90m\n      at Context.<anonymous> (tests/unit/services/translation/utils/translation-cache.test.js:205:25)\n\u001b[0m\n\u001b[0m  140) TranslationCache\n       edge cases\n         should handle empty text:\n\n      \u001b[31mAssertionError: expected { translation: '', …(1) } to deeply equal { translation: '' }\u001b[0m\n      \u001b[32m+ expected\u001b[0m \u001b[31m- actual\u001b[0m\n\n       {\n      \u001b[31m-  \"cachedAt\": 1751670625575\u001b[0m\n         \"translation\": \"\"\n       }\n      \u001b[0m\u001b[90m\n      at Context.<anonymous> (tests/unit/services/translation/utils/translation-cache.test.js:218:36)\n\u001b[0m\n\u001b[0m  141) TranslationCache\n       edge cases\n         should handle special characters:\n\n      \u001b[31mAssertionError: expected { …(2) } to deeply equal { Object (translation) }\u001b[0m\n      \u001b[32m+ expected\u001b[0m \u001b[31m- actual\u001b[0m\n\n       {\n      \u001b[31m-  \"cachedAt\": 1751670625577\u001b[0m\n         \"translation\": \"Translated special chars\"\n       }\n      \u001b[0m\u001b[90m\n      at Context.<anonymous> (tests/unit/services/translation/utils/translation-cache.test.js:227:36)\n\u001b[0m\n\u001b[0m  142) TranslationCache\n       edge cases\n         should handle very long text:\n\n      \u001b[31mAssertionError: expected { …(2) } to deeply equal { Object (translation) }\u001b[0m\n      \u001b[32m+ expected\u001b[0m \u001b[31m- actual\u001b[0m\n\n       {\n      \u001b[31m-  \"cachedAt\": 1751670625580\u001b[0m\n         \"translation\": \"Long text translation\"\n       }\n      \u001b[0m\u001b[90m\n      at Context.<anonymous> (tests/unit/services/translation/utils/translation-cache.test.js:237:36)\n\u001b[0m\n\u001b[0m  143) Visual Regression Tests\n       Main Interface\n         \"before each\" hook for \"should match baseline for initial UI\":\n\u001b[0m\u001b[31m     TimeoutError: Waiting for selector `#app-container` failed: Waiting failed: 5000ms exceeded\u001b[0m\u001b[90m\n      at new WaitTask (node_modules/puppeteer-core/lib/cjs/puppeteer/common/WaitTask.js:48:34)\n      at IsolatedWorld.waitForFunction (node_modules/puppeteer-core/lib/cjs/puppeteer/api/Realm.js:25:26)\n      at CSSQueryHandler.waitFor (node_modules/puppeteer-core/lib/cjs/puppeteer/common/QueryHandler.js:178:95)\n      at async CdpFrame.waitForSelector (node_modules/puppeteer-core/lib/cjs/puppeteer/api/Frame.js:548:21)\n      at async CdpPage.waitForSelector (node_modules/puppeteer-core/lib/cjs/puppeteer/api/Page.js:1377:20)\n      at async Context.<anonymous> (tests/visual/visual-regression.test.js:129:13)\n\u001b[0m\n\u001b[0m  144) Visual Regression Tests\n       Translation Process\n         \"before each\" hook for \"should match baseline for translation in progress\":\n\u001b[0m\u001b[31m     TimeoutError: Waiting for selector `#translation-form` failed: Waiting failed: 5000ms exceeded\u001b[0m\u001b[90m\n      at new WaitTask (node_modules/puppeteer-core/lib/cjs/puppeteer/common/WaitTask.js:48:34)\n      at IsolatedWorld.waitForFunction (node_modules/puppeteer-core/lib/cjs/puppeteer/api/Realm.js:25:26)\n      at CSSQueryHandler.waitFor (node_modules/puppeteer-core/lib/cjs/puppeteer/common/QueryHandler.js:178:95)\n      at async CdpFrame.waitForSelector (node_modules/puppeteer-core/lib/cjs/puppeteer/api/Frame.js:548:21)\n      at async CdpPage.waitForSelector (node_modules/puppeteer-core/lib/cjs/puppeteer/api/Page.js:1377:20)\n      at async Context.<anonymous> (tests/visual/visual-regression.test.js:164:13)\n\u001b[0m\n\u001b[0m  145) Visual Regression Tests\n       Responsive Design\n         should match baseline on mobile viewport:\n\u001b[0m\u001b[31m     TimeoutError: Waiting for selector `#app-container` failed: Waiting failed: 5000ms exceeded\u001b[0m\u001b[90m\n      at new WaitTask (node_modules/puppeteer-core/lib/cjs/puppeteer/common/WaitTask.js:48:34)\n      at IsolatedWorld.waitForFunction (node_modules/puppeteer-core/lib/cjs/puppeteer/api/Realm.js:25:26)\n      at CSSQueryHandler.waitFor (node_modules/puppeteer-core/lib/cjs/puppeteer/common/QueryHandler.js:178:95)\n      at async CdpFrame.waitForSelector (node_modules/puppeteer-core/lib/cjs/puppeteer/api/Frame.js:548:21)\n      at async CdpPage.waitForSelector (node_modules/puppeteer-core/lib/cjs/puppeteer/api/Page.js:1377:20)\n      at async Context.<anonymous> (tests/visual/visual-regression.test.js:243:17)\n\u001b[0m\n\u001b[0m  146) Visual Regression Tests\n       Responsive Design\n         should match baseline on tablet viewport:\n\u001b[0m\u001b[31m     TimeoutError: Waiting for selector `#app-container` failed: Waiting failed: 5000ms exceeded\u001b[0m\u001b[90m\n      at new WaitTask (node_modules/puppeteer-core/lib/cjs/puppeteer/common/WaitTask.js:48:34)\n      at IsolatedWorld.waitForFunction (node_modules/puppeteer-core/lib/cjs/puppeteer/api/Realm.js:25:26)\n      at CSSQueryHandler.waitFor (node_modules/puppeteer-core/lib/cjs/puppeteer/common/QueryHandler.js:178:95)\n      at async CdpFrame.waitForSelector (node_modules/puppeteer-core/lib/cjs/puppeteer/api/Frame.js:548:21)\n      at async CdpPage.waitForSelector (node_modules/puppeteer-core/lib/cjs/puppeteer/api/Page.js:1377:20)\n      at async Context.<anonymous> (tests/visual/visual-regression.test.js:243:17)\n\u001b[0m\n\u001b[0m  147) Visual Regression Tests\n       Responsive Design\n         should match baseline on desktop viewport:\n\u001b[0m\u001b[31m     TimeoutError: Waiting for selector `#app-container` failed: Waiting failed: 5000ms exceeded\u001b[0m\u001b[90m\n      at new WaitTask (node_modules/puppeteer-core/lib/cjs/puppeteer/common/WaitTask.js:48:34)\n      at IsolatedWorld.waitForFunction (node_modules/puppeteer-core/lib/cjs/puppeteer/api/Realm.js:25:26)\n      at CSSQueryHandler.waitFor (node_modules/puppeteer-core/lib/cjs/puppeteer/common/QueryHandler.js:178:95)\n      at async CdpFrame.waitForSelector (node_modules/puppeteer-core/lib/cjs/puppeteer/api/Frame.js:548:21)\n      at async CdpPage.waitForSelector (node_modules/puppeteer-core/lib/cjs/puppeteer/api/Page.js:1377:20)\n      at async Context.<anonymous> (tests/visual/visual-regression.test.js:243:17)\n\u001b[0m\n\u001b[0m  148) Visual Regression Tests\n       Themes\n         should match baseline with light theme:\n\u001b[0m\u001b[31m     TimeoutError: Waiting for selector `#app-container` failed: Waiting failed: 5000ms exceeded\u001b[0m\u001b[90m\n      at new WaitTask (node_modules/puppeteer-core/lib/cjs/puppeteer/common/WaitTask.js:48:34)\n      at IsolatedWorld.waitForFunction (node_modules/puppeteer-core/lib/cjs/puppeteer/api/Realm.js:25:26)\n      at CSSQueryHandler.waitFor (node_modules/puppeteer-core/lib/cjs/puppeteer/common/QueryHandler.js:178:95)\n      at async CdpFrame.waitForSelector (node_modules/puppeteer-core/lib/cjs/puppeteer/api/Frame.js:548:21)\n      at async CdpPage.waitForSelector (node_modules/puppeteer-core/lib/cjs/puppeteer/api/Page.js:1377:20)\n      at async Context.<anonymous> (tests/visual/visual-regression.test.js:265:17)\n\u001b[0m\n\u001b[0m  149) Visual Regression Tests\n       Themes\n         should match baseline with dark theme:\n\u001b[0m\u001b[31m     TimeoutError: Waiting for selector `#app-container` failed: Waiting failed: 5000ms exceeded\u001b[0m\u001b[90m\n      at new WaitTask (node_modules/puppeteer-core/lib/cjs/puppeteer/common/WaitTask.js:48:34)\n      at IsolatedWorld.waitForFunction (node_modules/puppeteer-core/lib/cjs/puppeteer/api/Realm.js:25:26)\n      at CSSQueryHandler.waitFor (node_modules/puppeteer-core/lib/cjs/puppeteer/common/QueryHandler.js:178:95)\n      at async CdpFrame.waitForSelector (node_modules/puppeteer-core/lib/cjs/puppeteer/api/Frame.js:548:21)\n      at async CdpPage.waitForSelector (node_modules/puppeteer-core/lib/cjs/puppeteer/api/Page.js:1377:20)\n      at async Context.<anonymous> (tests/visual/visual-regression.test.js:265:17)\n\u001b[0m\n\u001b[0m  150) Visual Regression Tests\n       Themes\n         should match baseline with high-contrast theme:\n\u001b[0m\u001b[31m     TimeoutError: Waiting for selector `#app-container` failed: Waiting failed: 5000ms exceeded\u001b[0m\u001b[90m\n      at new WaitTask (node_modules/puppeteer-core/lib/cjs/puppeteer/common/WaitTask.js:48:34)\n      at IsolatedWorld.waitForFunction (node_modules/puppeteer-core/lib/cjs/puppeteer/api/Realm.js:25:26)\n      at CSSQueryHandler.waitFor (node_modules/puppeteer-core/lib/cjs/puppeteer/common/QueryHandler.js:178:95)\n      at async CdpFrame.waitForSelector (node_modules/puppeteer-core/lib/cjs/puppeteer/api/Frame.js:548:21)\n      at async CdpPage.waitForSelector (node_modules/puppeteer-core/lib/cjs/puppeteer/api/Page.js:1377:20)\n      at async Context.<anonymous> (tests/visual/visual-regression.test.js:265:17)\n\u001b[0m\n\n\n[mochawesome] Report JSON saved to /Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/mochawesome-report/mochawesome.json\n\n[mochawesome] Report HTML saved to /Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/mochawesome-report/mochawesome.html\n\n",
      "stderr": "Azure translation error: The request is not authorized because credentials are missing or invalid.\nAzure Translator initialization failed: Error: Azure Translator connection test failed: Azure Translator error: The request is not authorized because credentials are missing or invalid.\n    at AzureTranslator.testConnection (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/src/services/translation/azure-translator.js:79:19)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async AzureTranslator.initialize (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/src/services/translation/azure-translator.js:51:13)\n    at async Context.<anonymous> (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/tests/api/azure-api.test.js:84:13)\nAzure translation error: Connection refused\nAzure Translator initialization failed: Error: Azure Translator connection test failed: Azure Translator error: Connection refused\n    at AzureTranslator.testConnection (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/src/services/translation/azure-translator.js:79:19)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async AzureTranslator.initialize (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/src/services/translation/azure-translator.js:51:13)\n    at async Context.<anonymous> (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/tests/api/azure-api.test.js:106:13)\nAzure translation error: Nock: No match for request {\n  \"method\": \"POST\",\n  \"url\": \"https://api.cognitive.microsofttranslator.com/translate?api-version=3.0&to=es&category=general&profanityAction=NoAction&includeAlignment=false&includeSentenceLength=false&textType=plain&from=en\",\n  \"headers\": {\n    \"accept\": \"application/json, text/plain, */*\",\n    \"content-type\": \"application/json\",\n    \"ocp-apim-subscription-key\": \"test-api-key\",\n    \"ocp-apim-subscription-region\": \"eastus\",\n    \"x-clienttraceid\": \"ec942495-6b68-4a73-9d59-04184b7ffbd4\",\n    \"user-agent\": \"axios/1.10.0\",\n    \"content-length\": \"18\",\n    \"accept-encoding\": \"gzip, compress, deflate, br\"\n  },\n  \"body\": \"[{\\\"text\\\":\\\"Hello\\\"}]\"\n}\nAzure Translator initialization failed: Error: Azure Translator connection test failed: Azure Translator error: Nock: No match for request {\n  \"method\": \"POST\",\n  \"url\": \"https://api.cognitive.microsofttranslator.com/translate?api-version=3.0&to=es&category=general&profanityAction=NoAction&includeAlignment=false&includeSentenceLength=false&textType=plain&from=en\",\n  \"headers\": {\n    \"accept\": \"application/json, text/plain, */*\",\n    \"content-type\": \"application/json\",\n    \"ocp-apim-subscription-key\": \"test-api-key\",\n    \"ocp-apim-subscription-region\": \"eastus\",\n    \"x-clienttraceid\": \"ec942495-6b68-4a73-9d59-04184b7ffbd4\",\n    \"user-agent\": \"axios/1.10.0\",\n    \"content-length\": \"18\",\n    \"accept-encoding\": \"gzip, compress, deflate, br\"\n  },\n  \"body\": \"[{\\\"text\\\":\\\"Hello\\\"}]\"\n}\n    at AzureTranslator.testConnection (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/src/services/translation/azure-translator.js:79:19)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async AzureTranslator.initialize (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/src/services/translation/azure-translator.js:51:13)\n    at async Context.<anonymous> (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/tests/api/azure-api.test.js:137:13)\nFailed to load Azure Translator languages: AxiosError: Nock: No match for request {\n  \"method\": \"GET\",\n  \"url\": \"https://api.cognitive.microsofttranslator.com/languages?api-version=3.0&scope=translation\",\n  \"headers\": {\n    \"accept\": \"application/json, text/plain, */*\",\n    \"content-type\": \"application/json\",\n    \"user-agent\": \"axios/1.10.0\",\n    \"accept-encoding\": \"gzip, compress, deflate, br\"\n  }\n}\n    at AxiosError.from (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/axios/dist/node/axios.cjs:863:14)\n    at RedirectableRequest.handleRequestError (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/axios/dist/node/axios.cjs:3191:25)\n    at RedirectableRequest.emit (node:events:530:35)\n    at eventHandlers.<computed> (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/follow-redirects/index.js:49:24)\n    at OverriddenClientRequest.emit (node:events:518:28)\n    at Socket.<anonymous> (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/propagate/index.js:64:17)\n    at Socket.emit (node:events:518:28)\n    at /Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/nock/lib/socket.js:101:14\n    at process.processTicksAndRejections (node:internal/process/task_queues:85:11)\n    at Axios.request (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/axios/dist/node/axios.cjs:4280:41)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async AzureTranslator.loadSupportedLanguages (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/src/services/translation/azure-translator.js:90:30)\n    at async AzureTranslator.initialize (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/src/services/translation/azure-translator.js:52:13)\n    at async Context.<anonymous> (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/tests/api/azure-api.test.js:205:13) {\n  statusCode: 404,\n  status: 404,\n  code: 'ERR_NOCK_NO_MATCH',\n  config: {\n    transitional: {\n      silentJSONParsing: true,\n      forcedJSONParsing: true,\n      clarifyTimeoutError: false\n    },\n    adapter: [ 'xhr', 'http', 'fetch' ],\n    transformRequest: [ [Function: transformRequest] ],\n    transformResponse: [ [Function: transformResponse] ],\n    timeout: 10000,\n    xsrfCookieName: 'XSRF-TOKEN',\n    xsrfHeaderName: 'X-XSRF-TOKEN',\n    maxContentLength: -1,\n    maxBodyLength: -1,\n    env: { FormData: [Function [FormData]], Blob: [class Blob] },\n    validateStatus: [Function: validateStatus],\n    headers: Object [AxiosHeaders] {\n      Accept: 'application/json, text/plain, */*',\n      'Content-Type': 'application/json',\n      'User-Agent': 'axios/1.10.0',\n      'Accept-Encoding': 'gzip, compress, deflate, br'\n    },\n    method: 'get',\n    url: 'https://api.cognitive.microsofttranslator.com/languages?api-version=3.0&scope=translation',\n    allowAbsoluteUrls: true,\n    data: undefined\n  },\n  request: <ref *2> Writable {\n    _events: {\n      close: undefined,\n      error: [Function: handleRequestError],\n      prefinish: undefined,\n      finish: undefined,\n      drain: undefined,\n      response: [Function: handleResponse],\n      socket: [Array],\n      timeout: undefined,\n      abort: undefined\n    },\n    _writableState: WritableState {\n      highWaterMark: 65536,\n      length: 0,\n      corked: 0,\n      onwrite: [Function: bound onwrite],\n      writelen: 0,\n      bufferedIndex: 0,\n      pendingcb: 0,\n      [Symbol(kState)]: 17580812,\n      [Symbol(kBufferedValue)]: null\n    },\n    _maxListeners: undefined,\n    _options: {\n      maxRedirects: 21,\n      maxBodyLength: Infinity,\n      protocol: 'https:',\n      path: '/languages?api-version=3.0&scope=translation',\n      method: 'GET',\n      headers: [Object: null prototype],\n      agents: [Object],\n      auth: undefined,\n      family: undefined,\n      beforeRedirect: [Function: dispatchBeforeRedirect],\n      beforeRedirects: [Object],\n      hostname: 'api.cognitive.microsofttranslator.com',\n      port: '',\n      agent: undefined,\n      nativeProtocols: [Object],\n      pathname: '/languages',\n      search: '?api-version=3.0&scope=translation'\n    },\n    _ended: true,\n    _ending: true,\n    _redirectCount: 0,\n    _redirects: [],\n    _requestBodyLength: 0,\n    _requestBodyBuffers: [],\n    _eventsCount: 3,\n    _onNativeResponse: [Function (anonymous)],\n    _currentRequest: <ref *1> OverriddenClientRequest {\n      _events: [Object: null prototype],\n      _eventsCount: 7,\n      _maxListeners: undefined,\n      outputData: [],\n      outputSize: 0,\n      writable: true,\n      destroyed: true,\n      _last: false,\n      chunkedEncoding: false,\n      shouldKeepAlive: true,\n      maxRequestsOnConnectionReached: false,\n      _defaultKeepAlive: true,\n      useChunkedEncodingByDefault: true,\n      sendDate: false,\n      _removedConnection: false,\n      _removedContLen: false,\n      _removedTE: false,\n      strictContentLength: false,\n      _contentLength: null,\n      _hasBody: true,\n      _trailer: '',\n      finished: true,\n      _headerSent: false,\n      _closed: false,\n      _header: null,\n      _keepAliveTimeout: 0,\n      _onPendingData: [Function: nop],\n      path: '/languages?api-version=3.0&scope=translation',\n      method: 'GET',\n      write: [Function (anonymous)],\n      end: [Function (anonymous)],\n      flushHeaders: [Function (anonymous)],\n      req: [Circular *1],\n      options: [Object],\n      interceptors: [],\n      response: [IncomingMessage],\n      requestBodyBuffers: [],\n      playbackStarted: false,\n      readyToStartPlaybackOnSocketEvent: false,\n      _redirectable: [Circular *2],\n      [Symbol(shapeMode)]: false,\n      [Symbol(kCapture)]: false,\n      [Symbol(kBytesWritten)]: 0,\n      [Symbol(kNeedDrain)]: false,\n      [Symbol(corked)]: 0,\n      [Symbol(kChunkedBuffer)]: [],\n      [Symbol(kChunkedLength)]: 0,\n      [Symbol(kSocket)]: [Socket],\n      [Symbol(kOutHeaders)]: [Object: null prototype],\n      [Symbol(errored)]: null,\n      [Symbol(kHighWaterMark)]: 65536,\n      [Symbol(kRejectNonStandardBodyWrites)]: false,\n      [Symbol(kError)]: [Error]\n    },\n    _currentUrl: 'https://api.cognitive.microsofttranslator.com/languages?api-version=3.0&scope=translation',\n    _timeout: null,\n    [Symbol(shapeMode)]: true,\n    [Symbol(kCapture)]: false\n  },\n  cause: Error: Nock: No match for request {\n    \"method\": \"GET\",\n    \"url\": \"https://api.cognitive.microsofttranslator.com/languages?api-version=3.0&scope=translation\",\n    \"headers\": {\n      \"accept\": \"application/json, text/plain, */*\",\n      \"content-type\": \"application/json\",\n      \"user-agent\": \"axios/1.10.0\",\n      \"accept-encoding\": \"gzip, compress, deflate, br\"\n    }\n  }\n      at InterceptedRequestRouter.startPlayback (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/nock/lib/intercepted_request_router.js:346:21)\n      at InterceptedRequestRouter.maybeStartPlayback (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/nock/lib/intercepted_request_router.js:268:12)\n      at InterceptedRequestRouter.connectSocket (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/nock/lib/intercepted_request_router.js:140:12)\n      at /Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/nock/lib/intercepted_request_router.js:78:33\n      at process.processTicksAndRejections (node:internal/process/task_queues:85:11) {\n    code: 'ERR_NOCK_NO_MATCH',\n    status: 404,\n    statusCode: 404\n  }\n}\nAzure translation error: Nock: No match for request {\n  \"method\": \"POST\",\n  \"url\": \"https://api.cognitive.microsofttranslator.com/translate?api-version=3.0&to=es&category=general&profanityAction=NoAction&includeAlignment=false&includeSentenceLength=false&textType=plain&from=en\",\n  \"headers\": {\n    \"accept\": \"application/json, text/plain, */*\",\n    \"content-type\": \"application/json\",\n    \"ocp-apim-subscription-key\": \"test-api-key\",\n    \"ocp-apim-subscription-region\": \"eastus\",\n    \"x-clienttraceid\": \"38c00927-3d01-48f0-973f-9a59cea65dd0\",\n    \"user-agent\": \"axios/1.10.0\",\n    \"content-length\": \"18\",\n    \"accept-encoding\": \"gzip, compress, deflate, br\"\n  },\n  \"body\": \"[{\\\"text\\\":\\\"Hello\\\"}]\"\n}\nAzure Translator translation failed: Error: Azure Translator error: Nock: No match for request {\n  \"method\": \"POST\",\n  \"url\": \"https://api.cognitive.microsofttranslator.com/translate?api-version=3.0&to=es&category=general&profanityAction=NoAction&includeAlignment=false&includeSentenceLength=false&textType=plain&from=en\",\n  \"headers\": {\n    \"accept\": \"application/json, text/plain, */*\",\n    \"content-type\": \"application/json\",\n    \"ocp-apim-subscription-key\": \"test-api-key\",\n    \"ocp-apim-subscription-region\": \"eastus\",\n    \"x-clienttraceid\": \"38c00927-3d01-48f0-973f-9a59cea65dd0\",\n    \"user-agent\": \"axios/1.10.0\",\n    \"content-length\": \"18\",\n    \"accept-encoding\": \"gzip, compress, deflate, br\"\n  },\n  \"body\": \"[{\\\"text\\\":\\\"Hello\\\"}]\"\n}\n    at AzureTranslator.translateText (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/src/services/translation/azure-translator.js:223:19)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async AzureTranslator.translate (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/src/services/translation/azure-translator.js:129:20)\n    at async Context.<anonymous> (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/tests/api/azure-api.test.js:208:13)\nTranslation Manager initialization failed: TypeError: this.languagePairOptimizer.initialize is not a function\n    at TranslationManager.initialize (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/src/services/translation/translation-manager.js:79:46)\n    at async Context.<anonymous> (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/tests/integration/complete-pipeline.test.js:61:13)\nTranslation Manager initialization failed: TypeError: this.languagePairOptimizer.initialize is not a function\n    at TranslationManager.initialize (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/src/services/translation/translation-manager.js:79:46)\n    at async Context.<anonymous> (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/tests/integration/complete-pipeline.test.js:178:13)\nTranslation Manager initialization failed: TypeError: this.languagePairOptimizer.initialize is not a function\n    at TranslationManager.initialize (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/src/services/translation/translation-manager.js:79:46)\n    at async Context.<anonymous> (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/tests/integration/stt-translation.test.js:38:13)\nTranslation Manager initialization failed: TypeError: this.languagePairOptimizer.initialize is not a function\n    at TranslationManager.initialize (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/src/services/translation/translation-manager.js:79:46)\n    at async Context.<anonymous> (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/tests/integration/stt-translation.test.js:98:13)\nTranslation Manager initialization failed: TypeError: this.languagePairOptimizer.initialize is not a function\n    at TranslationManager.initialize (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/src/services/translation/translation-manager.js:79:46)\n    at async Context.<anonymous> (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/tests/integration/stt-translation.test.js:112:13)\nTranslation Manager initialization failed: TypeError: this.languagePairOptimizer.initialize is not a function\n    at TranslationManager.initialize (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/src/services/translation/translation-manager.js:79:46)\n    at async Context.<anonymous> (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/tests/integration/stt-translation.test.js:147:13)\nTranslation Manager initialization failed: TypeError: this.languagePairOptimizer.initialize is not a function\n    at TranslationManager.initialize (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/src/services/translation/translation-manager.js:79:46)\n    at async Context.<anonymous> (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/tests/performance/translation-performance.test.js:52:9)\nTranslation Manager initialization failed: TypeError: this.languagePairOptimizer.initialize is not a function\n    at TranslationManager.initialize (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/src/services/translation/translation-manager.js:79:46)\n    at async Context.<anonymous> (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/tests/performance/translation-performance.test.js:331:9)\nFailed to load API keys: \"undefined\" is not valid JSON\nFailed to load API keys: \"undefined\" is not valid JSON\nFailed to load API keys: \"undefined\" is not valid JSON\nFailed to load API keys: \"undefined\" is not valid JSON\nFailed to load API keys: \"undefined\" is not valid JSON\nFailed to load API keys: \"undefined\" is not valid JSON\nFailed to load API keys: \"undefined\" is not valid JSON\nFailed to load API keys: \"undefined\" is not valid JSON\nFailed to load API keys: \"undefined\" is not valid JSON\nFailed to load API keys: \"undefined\" is not valid JSON\nTranslation Manager initialization failed: TypeError: this.languagePairOptimizer.initialize is not a function\n    at TranslationManager.initialize (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/src/services/translation/translation-manager.js:79:46)\n    at async Context.<anonymous> (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/tests/unit/services/error-handling/translation-error-handling.test.js:22:9)\nError configuring audio routing for Discord: Error: Config error\n    at Context.<anonymous> (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/tests/unit/services/platform-detector.test.js:139:61)\n    at callFn (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/mocha/lib/runnable.js:364:21)\n    at Runnable.run (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/mocha/lib/runnable.js:352:5)\n    at Runner.runTest (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/mocha/lib/runner.js:677:10)\n    at /Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/mocha/lib/runner.js:800:12\n    at next (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/mocha/lib/runner.js:592:14)\n    at /Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/mocha/lib/runner.js:602:7\n    at next (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/mocha/lib/runner.js:485:14)\n    at Immediate._onImmediate (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/mocha/lib/runner.js:570:5)\n    at process.processImmediate (node:internal/timers:491:21)\nError applying Windows audio routing: Error: Command failed: powershell -Command \"Set-AudioDevice -ID 'CABLE Input'\"\n/bin/sh: powershell: command not found\n\n    at genericNodeError (node:internal/errors:983:15)\n    at wrappedFn (node:internal/errors:537:14)\n    at ChildProcess.exithandler (node:child_process:414:12)\n    at ChildProcess.emit (node:events:518:28)\n    at maybeClose (node:internal/child_process:1101:16)\n    at Socket.<anonymous> (node:internal/child_process:456:11)\n    at Socket.emit (node:events:518:28)\n    at Pipe.<anonymous> (node:net:351:12) {\n  code: 127,\n  killed: false,\n  signal: null,\n  cmd: `powershell -Command \"Set-AudioDevice -ID 'CABLE Input'\"`,\n  stdout: '',\n  stderr: '/bin/sh: powershell: command not found\\n'\n}\nError applying Windows audio routing: Error: Command failed: powershell -Command \"Set-AudioDevice -ID 'CABLE Input'\"\n/bin/sh: powershell: command not found\n\n    at genericNodeError (node:internal/errors:983:15)\n    at wrappedFn (node:internal/errors:537:14)\n    at ChildProcess.exithandler (node:child_process:414:12)\n    at ChildProcess.emit (node:events:518:28)\n    at maybeClose (node:internal/child_process:1101:16)\n    at Socket.<anonymous> (node:internal/child_process:456:11)\n    at Socket.emit (node:events:518:28)\n    at Pipe.<anonymous> (node:net:351:12) {\n  code: 127,\n  killed: false,\n  signal: null,\n  cmd: `powershell -Command \"Set-AudioDevice -ID 'CABLE Input'\"`,\n  stdout: '',\n  stderr: '/bin/sh: powershell: command not found\\n'\n}\nError applying Linux audio routing: Error: Command failed: pactl set-default-sink \"CABLE Output\"\n/bin/sh: pactl: command not found\n\n    at genericNodeError (node:internal/errors:983:15)\n    at wrappedFn (node:internal/errors:537:14)\n    at ChildProcess.exithandler (node:child_process:414:12)\n    at ChildProcess.emit (node:events:518:28)\n    at maybeClose (node:internal/child_process:1101:16)\n    at ChildProcess._handle.onexit (node:internal/child_process:304:5) {\n  code: 127,\n  killed: false,\n  signal: null,\n  cmd: 'pactl set-default-sink \"CABLE Output\"',\n  stdout: '',\n  stderr: '/bin/sh: pactl: command not found\\n'\n}\nError applying Linux audio routing: Error: Command failed: pactl set-default-sink \"CABLE Output\"\n/bin/sh: pactl: command not found\n\n    at genericNodeError (node:internal/errors:983:15)\n    at wrappedFn (node:internal/errors:537:14)\n    at ChildProcess.exithandler (node:child_process:414:12)\n    at ChildProcess.emit (node:events:518:28)\n    at maybeClose (node:internal/child_process:1101:16)\n    at ChildProcess._handle.onexit (node:internal/child_process:304:5) {\n  code: 127,\n  killed: false,\n  signal: null,\n  cmd: 'pactl set-default-sink \"CABLE Output\"',\n  stdout: '',\n  stderr: '/bin/sh: pactl: command not found\\n'\n}\n(node:31249) [DEP0174] DeprecationWarning: Calling promisify on a function that returns a Promise is likely a mistake.\n(Use `node --trace-deprecation ...` to show where the warning was created)\n(node:31249) [DEP0174] DeprecationWarning: Calling promisify on a function that returns a Promise is likely a mistake.\n(node:31249) [DEP0174] DeprecationWarning: Calling promisify on a function that returns a Promise is likely a mistake.\n(node:31249) [DEP0174] DeprecationWarning: Calling promisify on a function that returns a Promise is likely a mistake.\n(node:31249) [DEP0174] DeprecationWarning: Calling promisify on a function that returns a Promise is likely a mistake.\n(node:31249) [DEP0174] DeprecationWarning: Calling promisify on a function that returns a Promise is likely a mistake.\n(node:31249) [DEP0174] DeprecationWarning: Calling promisify on a function that returns a Promise is likely a mistake.\nAzure translation error: Cannot read properties of undefined (reading 'data')\nAzure Translator initialization failed: Error: Azure Translator connection test failed: Azure Translator error: Cannot read properties of undefined (reading 'data')\n    at AzureTranslator.testConnection (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/src/services/translation/azure-translator.js:79:19)\n    at async AzureTranslator.initialize (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/src/services/translation/azure-translator.js:51:13)\n    at async Context.<anonymous> (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/tests/unit/services/translation/azure-translator.test.js:41:28)\nAzure Translator initialization failed: Error: Azure Translator API key not found\n    at AzureTranslator.initialize (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/src/services/translation/azure-translator.js:47:23)\n    at Context.<anonymous> (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/tests/unit/services/translation/azure-translator.test.js:57:34)\n    at callFn (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/mocha/lib/runnable.js:364:21)\n    at Runnable.run (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/mocha/lib/runnable.js:352:5)\n    at Runner.runTest (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/mocha/lib/runner.js:677:10)\n    at /Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/mocha/lib/runner.js:800:12\n    at next (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/mocha/lib/runner.js:592:14)\n    at /Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/mocha/lib/runner.js:602:7\n    at next (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/mocha/lib/runner.js:485:14)\n    at Immediate._onImmediate (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/mocha/lib/runner.js:570:5)\n    at process.processImmediate (node:internal/timers:491:21)\nAzure translation error: Cannot read properties of undefined (reading 'data')\nAzure Translator initialization failed: Error: Azure Translator connection test failed: Azure Translator error: Cannot read properties of undefined (reading 'data')\n    at AzureTranslator.testConnection (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/src/services/translation/azure-translator.js:79:19)\n    at async AzureTranslator.initialize (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/src/services/translation/azure-translator.js:51:13)\n    at async Context.<anonymous> (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/tests/unit/services/translation/azure-translator.test.js:69:17)\nAzure translation error: Access denied due to invalid subscription key\nAzure Translator translation failed: Error: Azure Translator error: Access denied due to invalid subscription key\n    at AzureTranslator.translateText (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/src/services/translation/azure-translator.js:223:19)\n    at async AzureTranslator.translate (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/src/services/translation/azure-translator.js:129:20)\n    at async Context.<anonymous> (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/tests/unit/services/translation/azure-translator.test.js:177:17)\nLanguage detection failed: TypeError: Cannot read properties of undefined (reading 'data')\n    at AzureTranslator.detectLanguage (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/src/services/translation/azure-translator.js:253:40)\n    at async Context.<anonymous> (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/tests/unit/services/translation/azure-translator.test.js:279:17)\nGPT-4o initialization failed: Error: GPT-4o connection test failed: Connection test response was unexpected\n    at GPT4oTranslator.testConnection (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/src/services/translation/gpt4o-translator.js:95:19)\n    at async GPT4oTranslator.initialize (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/src/services/translation/gpt4o-translator.js:57:13)\n    at async Context.<anonymous> (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/tests/unit/services/translation/gpt4o-translator.test.js:40:28)\nGPT-4o initialization failed: Error: GPT-4o connection test failed: Connection test response was unexpected\n    at GPT4oTranslator.testConnection (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/src/services/translation/gpt4o-translator.js:95:19)\n    at async GPT4oTranslator.initialize (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/src/services/translation/gpt4o-translator.js:57:13)\n    at async Context.<anonymous> (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/tests/unit/services/translation/gpt4o-translator.test.js:51:17)\nGPT-4o translation failed: TypeError: Cannot read properties of undefined (reading 'tone')\n    at GPT4oTranslator.buildTranslationContext (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/src/services/translation/gpt4o-translator.js:272:56)\n    at GPT4oTranslator.translate (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/src/services/translation/gpt4o-translator.js:162:55)\n    at Context.<anonymous> (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/tests/unit/services/translation/gpt4o-translator.test.js:100:45)\n    at callFn (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/mocha/lib/runnable.js:364:21)\n    at Runnable.run (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/mocha/lib/runnable.js:352:5)\n    at Runner.runTest (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/mocha/lib/runner.js:677:10)\n    at /Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/mocha/lib/runner.js:800:12\n    at next (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/mocha/lib/runner.js:592:14)\n    at /Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/mocha/lib/runner.js:602:7\n    at next (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/mocha/lib/runner.js:485:14)\n    at cbHookRun (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/mocha/lib/runner.js:550:7)\n    at done (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/mocha/lib/runnable.js:308:5)\n    at /Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/mocha/lib/runnable.js:369:11\nGPT-4o translation failed: TypeError: Cannot read properties of undefined (reading 'tone')\n    at GPT4oTranslator.buildTranslationContext (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/src/services/translation/gpt4o-translator.js:272:56)\n    at GPT4oTranslator.translate (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/src/services/translation/gpt4o-translator.js:162:55)\n    at Context.<anonymous> (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/tests/unit/services/translation/gpt4o-translator.test.js:116:34)\n    at callFn (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/mocha/lib/runnable.js:364:21)\n    at Runnable.run (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/mocha/lib/runnable.js:352:5)\n    at Runner.runTest (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/mocha/lib/runner.js:677:10)\n    at /Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/mocha/lib/runner.js:800:12\n    at next (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/mocha/lib/runner.js:592:14)\n    at /Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/mocha/lib/runner.js:602:7\n    at next (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/mocha/lib/runner.js:485:14)\n    at cbHookRun (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/mocha/lib/runner.js:550:7)\n    at done (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/mocha/lib/runnable.js:308:5)\n    at /Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/mocha/lib/runnable.js:369:11\nGPT-4o translation failed: TypeError: Cannot read properties of undefined (reading 'tone')\n    at GPT4oTranslator.buildTranslationContext (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/src/services/translation/gpt4o-translator.js:272:56)\n    at GPT4oTranslator.translate (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/src/services/translation/gpt4o-translator.js:162:55)\n    at Context.<anonymous> (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/tests/unit/services/translation/gpt4o-translator.test.js:142:34)\n    at callFn (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/mocha/lib/runnable.js:364:21)\n    at Runnable.run (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/mocha/lib/runnable.js:352:5)\n    at Runner.runTest (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/mocha/lib/runner.js:677:10)\n    at /Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/mocha/lib/runner.js:800:12\n    at next (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/mocha/lib/runner.js:592:14)\n    at /Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/mocha/lib/runner.js:602:7\n    at next (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/mocha/lib/runner.js:485:14)\n    at cbHookRun (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/mocha/lib/runner.js:550:7)\n    at done (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/mocha/lib/runnable.js:308:5)\n    at /Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/mocha/lib/runnable.js:369:11\nGPT-4o translation failed: TypeError: Cannot read properties of undefined (reading 'tone')\n    at GPT4oTranslator.buildTranslationContext (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/src/services/translation/gpt4o-translator.js:272:56)\n    at GPT4oTranslator.translate (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/src/services/translation/gpt4o-translator.js:162:55)\n    at Context.<anonymous> (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/tests/unit/services/translation/gpt4o-translator.test.js:173:30)\n    at callFn (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/mocha/lib/runnable.js:364:21)\n    at Runnable.run (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/mocha/lib/runnable.js:352:5)\n    at Runner.runTest (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/mocha/lib/runner.js:677:10)\n    at /Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/mocha/lib/runner.js:800:12\n    at next (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/mocha/lib/runner.js:592:14)\n    at /Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/mocha/lib/runner.js:602:7\n    at next (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/mocha/lib/runner.js:485:14)\n    at cbHookRun (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/mocha/lib/runner.js:550:7)\n    at done (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/mocha/lib/runnable.js:308:5)\n    at /Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/mocha/lib/runnable.js:369:11\ndeepl translation failed: Error: API rate limit exceeded\n    at Context.<anonymous> (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/tests/unit/services/translation/translation-manager.test.js:202:26)\n    at callFn (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/mocha/lib/runnable.js:364:21)\n    at Runnable.run (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/mocha/lib/runnable.js:352:5)\n    at Runner.runTest (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/mocha/lib/runner.js:677:10)\n    at /Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/mocha/lib/runner.js:800:12\n    at next (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/mocha/lib/runner.js:592:14)\n    at /Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/mocha/lib/runner.js:602:7\n    at next (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/mocha/lib/runner.js:485:14)\n    at cbHookRun (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/mocha/lib/runner.js:550:7)\n    at done (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/mocha/lib/runnable.js:308:5)\n    at callFn (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/mocha/lib/runnable.js:387:7)\n    at Runnable.run (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/mocha/lib/runnable.js:352:5)\n    at next (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/mocha/lib/runner.js:509:10)\n    at Immediate.<anonymous> (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/mocha/lib/runner.js:570:5)\n    at process.processImmediate (node:internal/timers:491:21)\nConversation conversation1 not found\nConversation null not found\nConversation conversation1 not found\nConversation conversation1 not found\nConversation conversation1 not found\nConversation conversation1 not found\nConversation conversation1 not found\nConversation conversation1 not found\nConversation conversation1 not found\nConversation conversation1 not found\nConversation conversation1 not found\nConversation conversation1 not found\nConversation conversation1 not found\nConversation conversation1 not found\nConversation conversation1 not found\nConversation conversation1 not found\nConversation conversation1 not found\nConversation conversation1 not found\nConversation conversation2 not found\nConversation conversation1 not found\nConversation conversation2 not found\nConversation conversation1 not found\nConversation conversation1 not found\nConversation conversation1 not found\n",
      "success": false,
      "error": "Test suite failed with exit code 1"
    },
    "visual": {
      "name": "visual",
      "description": "Visual Regression Tests",
      "command": "npm run test:visual",
      "startTime": "2025-07-04T23:11:09.624Z",
      "endTime": "2025-07-04T23:12:47.480Z",
      "duration": 97856,
      "exitCode": 1,
      "stdout": "\n> universal-translator@1.0.0 test:visual\n> cross-env NODE_ENV=test mocha 'tests/visual/**/*.test.js' --reporter mochawesome\n\n\n\u001b[0m\u001b[0m\n\u001b[0m  Visual Regression Tests\u001b[0m\n\u001b[0m    Main Interface\u001b[0m\n    \u001b[31m  1) \"before each\" hook for \"should match baseline for initial UI\"\u001b[0m\n\u001b[0m    Translation Process\u001b[0m\n    \u001b[31m  2) \"before each\" hook for \"should match baseline for translation in progress\"\u001b[0m\n\u001b[0m    Responsive Design\u001b[0m\n    \u001b[31m  3) should match baseline on mobile viewport\u001b[0m\n    \u001b[31m  4) should match baseline on tablet viewport\u001b[0m\n    \u001b[31m  5) should match baseline on desktop viewport\u001b[0m\n\u001b[0m    Themes\u001b[0m\n    \u001b[31m  6) should match baseline with light theme\u001b[0m\n    \u001b[31m  7) should match baseline with dark theme\u001b[0m\n    \u001b[31m  8) should match baseline with high-contrast theme\u001b[0m\n\n\u001b[0m  Accessibility Tests\u001b[0m\n\u001b[0m    Main Interface\u001b[0m\n    \u001b[31m  9) \"before each\" hook for \"should have no critical accessibility violations\"\u001b[0m\n\u001b[0m    Translation Form\u001b[0m\n    \u001b[31m  10) \"before each\" hook for \"should have accessible form controls\"\u001b[0m\n\u001b[0m    Results Display\u001b[0m\n    \u001b[31m  11) \"before each\" hook for \"should have screen reader accessible results\"\u001b[0m\n\u001b[0m    Responsive Design\u001b[0m\n    \u001b[31m  12) should be accessible on mobile viewport\u001b[0m\n    \u001b[31m  13) should maintain touch target sizes on mobile\u001b[0m\n\n\u001b[0m  Azure Translator API Tests\u001b[0m\n\u001b[0m    Translation API\u001b[0m\n    \u001b[31m  14) should make correct API calls to translate text\u001b[0m\n    \u001b[31m  15) should handle API errors correctly\u001b[0m\n    \u001b[31m  16) should handle network errors gracefully\u001b[0m\n\u001b[0m    Language Detection API\u001b[0m\n    \u001b[31m  17) should detect language correctly\u001b[0m\n\u001b[0m    Supported Languages API\u001b[0m\nAzure Translator supports 3 languages\n    \u001b[32m  ✔\u001b[0m\u001b[90m should retrieve supported languages\u001b[0m\n\u001b[0m    Authentication\u001b[0m\n    \u001b[31m  18) should include correct authentication headers\u001b[0m\n\n\u001b[0m  End-to-End Tests\u001b[0m\n  \u001b[36m  - should be implemented with Playwright\u001b[0m\n\n\u001b[0m  E2E Test Placeholder\u001b[0m\n  \u001b[32m  ✔\u001b[0m\u001b[90m should pass\u001b[0m\n\n\u001b[0m  Translation App E2E Tests\u001b[0m\n  \u001b[36m  - should perform a complete translation flow\u001b[0m\n  \u001b[36m  - should handle errors gracefully\u001b[0m\n\n\u001b[0m  E2E Test Placeholder\u001b[0m\n  \u001b[32m  ✔\u001b[0m\u001b[90m should pass\u001b[0m\n\n\u001b[0m  Example Test Suite\u001b[0m\n  \u001b[32m  ✔\u001b[0m\u001b[90m should pass a simple test\u001b[0m\n  \u001b[32m  ✔\u001b[0m\u001b[90m should demonstrate sinon stub\u001b[0m\n\n\u001b[0m  Complete Pipeline Integration Tests\u001b[0m\n\u001b[0m    End-to-end audio translation pipeline\u001b[0m\nInitializing translation services...\ndeepl translation service initialized: { success: true }\ngpt4o translation service initialized: { success: true }\ngoogle translation service initialized: { success: true }\nazure translation service initialized: { success: true }\n    \u001b[31m  19) should process audio through the complete pipeline\u001b[0m\n    \u001b[31m  20) should handle service failover in the pipeline\u001b[0m\nInitializing translation services...\ndeepl translation service initialized: { success: true }\ngpt4o translation service initialized: { success: true }\ngoogle translation service initialized: { success: true }\nazure translation service initialized: { success: true }\n    \u001b[31m  21) should maintain conversation context across multiple exchanges\u001b[0m\n\n\u001b[0m  Translation Integration Tests\u001b[0m\n\u001b[0m    End-to-end translation workflow\u001b[0m\nInitializing translation services...\ndeepl translation service initialized: { success: true }\ngpt4o translation service initialized: { success: true }\ngoogle translation service initialized: { success: true }\nazure translation service initialized: { success: true }\n    \u001b[31m  22) should complete the full translation pipeline\u001b[0m\nInitializing translation services...\ndeepl translation service initialized: { success: true }\ngpt4o translation service initialized: { success: true }\ngoogle translation service initialized: { success: true }\nazure translation service initialized: { success: true }\n    \u001b[31m  23) should handle service failover correctly\u001b[0m\nInitializing translation services...\ndeepl translation service initialized: { success: true }\ngpt4o translation service initialized: { success: true }\ngoogle translation service initialized: { success: true }\nazure translation service initialized: { success: true }\n    \u001b[31m  24) should maintain conversation context between translations\u001b[0m\nInitializing translation services...\ndeepl translation service initialized: { success: true }\ngpt4o translation service initialized: { success: true }\ngoogle translation service initialized: { success: true }\nazure translation service initialized: { success: true }\n    \u001b[31m  25) should handle different priority settings\u001b[0m\n\n\u001b[0m  Translation Performance Tests\u001b[0m\n\u001b[0m    Translation Service Latency\u001b[0m\nInitializing translation services...\ndeepl translation service initialized: { success: true }\ngpt4o translation service initialized: { success: true }\ngoogle translation service initialized: { success: true }\nazure translation service initialized: { success: true }\n    \u001b[31m  26) \"before each\" hook for \"should measure individual service latency\"\u001b[0m\n\n\u001b[0m  Translation Cache Performance\u001b[0m\nInitializing translation services...\ndeepl translation service initialized: { success: true }\ngpt4o translation service initialized: { success: true }\ngoogle translation service initialized: { success: true }\nazure translation service initialized: { success: true }\n  \u001b[31m  27) \"before each\" hook for \"should improve performance with caching\"\u001b[0m\n\n\u001b[0m  API Key Security\u001b[0m\n\u001b[0m    API key storage\u001b[0m\n    \u001b[31m  28) should encrypt API keys before storing\u001b[0m\n    \u001b[31m  29) should store API keys in the correct location\u001b[0m\n    \u001b[31m  30) should not store API keys in plain text\u001b[0m\n\u001b[0m    API key retrieval\u001b[0m\n    \u001b[31m  31) should decrypt API keys when retrieving\u001b[0m\n    \u001b[31m  32) should handle missing API keys gracefully\u001b[0m\n    \u001b[31m  33) should handle decryption errors securely\u001b[0m\n\u001b[0m    API key validation\u001b[0m\n    \u001b[31m  34) should validate API key format\u001b[0m\n    \u001b[31m  35) should detect potentially compromised API keys\u001b[0m\n\u001b[0m    API key rotation\u001b[0m\n    \u001b[31m  36) should support API key rotation\u001b[0m\n    \u001b[32m  ✔\u001b[0m\u001b[90m should not store invalid API keys during rotation\u001b[0m\n\n\u001b[0m  App Security\u001b[0m\n\u001b[0m    Input sanitization\u001b[0m\n    \u001b[31m  37) should sanitize user inputs to prevent injection attacks\u001b[0m\n    \u001b[31m  38) should sanitize file paths to prevent path traversal\u001b[0m\n\u001b[0m    Content Security Policy\u001b[0m\n    \u001b[31m  39) should validate CSP headers\u001b[0m\n\u001b[0m    Secure storage\u001b[0m\n    \u001b[31m  40) should use secure storage for sensitive data\u001b[0m\n\n\u001b[0m  Network Security\u001b[0m\n\u001b[0m    HTTPS verification\u001b[0m\n    \u001b[31m  41) should verify HTTPS certificates by default\u001b[0m\n    \u001b[31m  42) should detect and prevent SSL stripping\u001b[0m\n\u001b[0m    Authentication header handling\u001b[0m\n    \u001b[31m  43) should safely handle authentication headers\u001b[0m\n\n\u001b[0m  Complete Translation Pipeline\u001b[0m\n\u001b[0m    Initialization\u001b[0m\n    \u001b[31m  44) \"before each\" hook for \"should initialize pipeline with default settings\"\u001b[0m\n\n\u001b[0m  Translation Error Handling\u001b[0m\n\u001b[0m    Service failure handling\u001b[0m\nInitializing translation services...\ndeepl translation service initialized: { success: true }\ngpt4o translation service initialized: { success: true }\ngoogle translation service initialized: { success: true }\nazure translation service initialized: { success: true }\n    \u001b[31m  45) \"before each\" hook for \"should handle all services failing\"\u001b[0m\n\n\u001b[0m  PlatformDetector\u001b[0m\n\u001b[0m    constructor\u001b[0m\n    \u001b[32m  ✔\u001b[0m\u001b[90m should initialize with supported apps list\u001b[0m\n    \u001b[31m  46) should set platform property\u001b[0m\n\u001b[0m    detectActiveApp\u001b[0m\n    \u001b[31m  47) should detect Discord on Windows\u001b[0m\n    \u001b[31m  48) should detect Zoom on macOS\u001b[0m\n    \u001b[31m  49) should detect Teams on Linux\u001b[0m\n    \u001b[31m  50) should return null when no supported app is detected\u001b[0m\n    \u001b[31m  51) should handle exec errors gracefully\u001b[0m\n    \u001b[31m  52) should handle unsupported platform\u001b[0m\n\u001b[0m    getAppConfig\u001b[0m\n    \u001b[32m  ✔\u001b[0m\u001b[90m should return Discord configuration\u001b[0m\n    \u001b[32m  ✔\u001b[0m\u001b[90m should return Zoom configuration\u001b[0m\n    \u001b[32m  ✔\u001b[0m\u001b[90m should return null for unsupported app\u001b[0m\n\u001b[0m    configureAudioRouting\u001b[0m\nAudio routing configured for Discord\n    \u001b[32m  ✔\u001b[0m\u001b[90m should configure audio routing for Discord\u001b[0m\nNo specific configuration found for Notepad\n    \u001b[32m  ✔\u001b[0m\u001b[90m should handle unsupported app gracefully\u001b[0m\n    \u001b[32m  ✔\u001b[0m\u001b[90m should handle errors gracefully\u001b[0m\n\u001b[0m    applyAudioRouting\u001b[0m\nmacOS audio routing configuration: { inputDevice: 'test', outputDevice: 'test' }\nNote: Full macOS audio routing requires Core Audio integration\n    \u001b[31m  53) should call Windows routing for win32 platform\u001b[0m\n    \u001b[32m  ✔\u001b[0m\u001b[90m should call macOS routing for darwin platform\u001b[0m\nmacOS audio routing configuration: { inputDevice: 'test', outputDevice: 'test' }\nNote: Full macOS audio routing requires Core Audio integration\n    \u001b[31m  54) should call Linux routing for linux platform\u001b[0m\n\u001b[0m    applyWindowsAudioRouting\u001b[0m\n    \u001b[31m  55) should execute PowerShell commands for Windows audio routing\u001b[0m\n    \u001b[32m  ✔\u001b[0m\u001b[90m should handle Windows routing errors\u001b[0m\n\u001b[0m    applyLinuxAudioRouting\u001b[0m\n    \u001b[31m  56) should execute pactl commands for Linux audio routing\u001b[0m\n    \u001b[32m  ✔\u001b[0m\u001b[90m should handle Linux routing errors\u001b[0m\n\u001b[0m    applyMacAudioRouting\u001b[0m\n    \u001b[32m  ✔\u001b[0m\u001b[90m should log configuration for macOS\u001b[0m\n\n\u001b[0m  Setup Automation Service\u001b[0m\n\u001b[0m    Platform Detection\u001b[0m\n    \u001b[31m  57) should detect macOS correctly\u001b[0m\n    \u001b[31m  58) should detect Windows correctly\u001b[0m\n    \u001b[31m  59) should detect Linux correctly\u001b[0m\n    \u001b[31m  60) should throw error for unsupported platform\u001b[0m\n\u001b[0m    Virtual Audio Installation\u001b[0m\n    \u001b[31m  61) should install VB-Audio Cable on Windows\u001b[0m\n    \u001b[31m  62) should install BlackHole on macOS\u001b[0m\n    \u001b[31m  63) should create PulseAudio virtual sinks on Linux\u001b[0m\n    \u001b[31m  64) should handle installation errors\u001b[0m\n\u001b[0m    Audio Device Configuration\u001b[0m\n    \u001b[31m  65) should configure audio devices successfully\u001b[0m\n    \u001b[31m  66) should handle device configuration errors\u001b[0m\n\u001b[0m    Communication App Configuration\u001b[0m\nmacOS audio routing configuration: {\n  inputDevice: 'CABLE Input',\n  outputDevice: 'CABLE Output',\n  sampleRate: 44100,\n  channels: 2,\n  priority: 'medium'\n}\nNote: Full macOS audio routing requires Core Audio integration\nAudio routing configured for Telegram\n    \u001b[31m  67) should configure Discord settings\u001b[0m\nmacOS audio routing configuration: {\n  inputDevice: 'CABLE Input',\n  outputDevice: 'CABLE Output',\n  sampleRate: 44100,\n  channels: 2,\n  priority: 'medium'\n}\nNote: Full macOS audio routing requires Core Audio integration\nAudio routing configured for Telegram\n    \u001b[31m  68) should configure Zoom settings\u001b[0m\nmacOS audio routing configuration: {\n  inputDevice: 'CABLE Input',\n  outputDevice: 'CABLE Output',\n  sampleRate: 44100,\n  channels: 2,\n  priority: 'medium'\n}\nNote: Full macOS audio routing requires Core Audio integration\nAudio routing configured for Telegram\n    \u001b[31m  69) should handle app configuration errors\u001b[0m\n\u001b[0m    Configuration File Creation\u001b[0m\n    \u001b[31m  70) should create configuration files successfully\u001b[0m\n    \u001b[31m  71) should handle configuration file creation errors\u001b[0m\n\u001b[0m    Complete Setup Process\u001b[0m\n    \u001b[31m  72) should run complete setup successfully\u001b[0m\n    \u001b[31m  73) should handle setup step failures gracefully\u001b[0m\n    \u001b[31m  74) should provide detailed step results\u001b[0m\n\u001b[0m    Error Handling\u001b[0m\n    \u001b[31m  75) should handle timeout errors\u001b[0m\n    \u001b[31m  76) should handle permission errors\u001b[0m\n    \u001b[31m  77) should handle network errors\u001b[0m\n\u001b[0m    Validation\u001b[0m\n    \u001b[31m  78) should validate platform support\u001b[0m\n    \u001b[31m  79) should validate app support\u001b[0m\n    \u001b[31m  80) should validate configuration\u001b[0m\n\n\u001b[0m  AzureTranslator\u001b[0m\n\u001b[0m    initialization\u001b[0m\n    \u001b[31m  81) should initialize successfully with valid credentials\u001b[0m\n    \u001b[32m  ✔\u001b[0m\u001b[90m should handle missing API key\u001b[0m\n    \u001b[31m  82) should handle API errors during initialization\u001b[0m\n\u001b[0m    translate\u001b[0m\n    \u001b[31m  83) should translate text successfully\u001b[0m\n    \u001b[32m  ✔\u001b[0m\u001b[90m should detect language when fromLanguage is \"auto\"\u001b[0m\n    \u001b[32m  ✔\u001b[0m\u001b[90m should handle API errors gracefully\u001b[0m\n    \u001b[32m  ✔\u001b[0m\u001b[90m should handle text formatting options\u001b[0m\n    \u001b[32m  ✔\u001b[0m\u001b[90m should respect formality setting when available\u001b[0m\n\u001b[0m    detectLanguage\u001b[0m\n    \u001b[31m  84) should detect language correctly\u001b[0m\n    \u001b[31m  85) should handle empty text in language detection\u001b[0m\n\n\u001b[0m  GPT4oTranslator\u001b[0m\n\u001b[0m    initialization\u001b[0m\n    \u001b[31m  86) should initialize successfully with valid API key\u001b[0m\n    \u001b[31m  87) should handle missing API key\u001b[0m\n\u001b[0m    translate\u001b[0m\n    \u001b[31m  88) should translate text successfully\u001b[0m\n    \u001b[31m  89) should handle API errors gracefully\u001b[0m\n    \u001b[31m  90) should handle malformed API responses\u001b[0m\n    \u001b[31m  91) should update conversation context when provided\u001b[0m\n\u001b[0m    buildTranslationContext\u001b[0m\n    \u001b[32m  ✔\u001b[0m\u001b[90m should build appropriate context for translation\u001b[0m\n    \u001b[32m  ✔\u001b[0m\u001b[90m should handle different profiles correctly\u001b[0m\n\u001b[0m    updateConversationContext\u001b[0m\n    \u001b[32m  ✔\u001b[0m\u001b[90m should add new entries to conversation context\u001b[0m\n    \u001b[31m  92) should limit context size to configured window\u001b[0m\n\n\u001b[0m  TranslationManager\u001b[0m\n\u001b[0m    initialization\u001b[0m\n    \u001b[31m  93) should initialize successfully with all services\u001b[0m\n    \u001b[31m  94) should handle service initialization failures gracefully\u001b[0m\n\u001b[0m    translate\u001b[0m\nUsing deepl for en → es translation\n    \u001b[32m  ✔\u001b[0m\u001b[90m should translate text using the best service\u001b[0m\n    \u001b[31m  95) should use cached translation when available\u001b[0m\nUsing deepl for en → es translation\n    \u001b[32m  ✔\u001b[0m\u001b[90m should try fallback services when primary service fails\u001b[0m\n\u001b[0m    attemptTranslation\u001b[0m\n    \u001b[32m  ✔\u001b[0m\u001b[90m should translate text with the specified service\u001b[0m\n    \u001b[32m  ✔\u001b[0m\u001b[90m should handle service errors gracefully\u001b[0m\n\u001b[0m    fallbackTranslation\u001b[0m\nAttempting fallback translation with gpt4o\n    \u001b[31m  96) should try alternative services when primary fails\u001b[0m\nAttempting fallback translation with gpt4o\nAttempting fallback translation with azure\nAttempting fallback translation with google\n    \u001b[32m  ✔\u001b[0m\u001b[90m should return error when all services fail\u001b[0m\n\n\u001b[0m  TranslationService\u001b[0m\n\u001b[0m    initialization\u001b[0m\n    \u001b[31m  97) should create an instance with the provided config\u001b[0m\n    \u001b[31m  98) should have default values for non-provided config options\u001b[0m\n\u001b[0m    abstract methods\u001b[0m\n    \u001b[31m  99) should throw error for abstract translate method\u001b[0m\n    \u001b[31m  100) should throw error for abstract detectLanguage method\u001b[0m\n\u001b[0m    utility methods\u001b[0m\n    \u001b[31m  101) should format language codes correctly\u001b[0m\n\n\u001b[0m  ContextManager\u001b[0m\n\u001b[0m    initialization\u001b[0m\n    \u001b[31m  102) should initialize with default settings\u001b[0m\n    \u001b[31m  103) should initialize with custom settings\u001b[0m\n    \u001b[31m  104) should initialize empty conversation contexts\u001b[0m\n\u001b[0m    addTranslationEntry\u001b[0m\n    \u001b[31m  105) should add entries to the correct conversation\u001b[0m\n    \u001b[31m  106) should handle missing conversation ID\u001b[0m\n    \u001b[31m  107) should add multiple entries to the same conversation\u001b[0m\n    \u001b[31m  108) should respect maxContextEntries limit\u001b[0m\n\u001b[0m    getConversationContext\u001b[0m\n    \u001b[32m  ✔\u001b[0m\u001b[90m should return empty string for non-existent conversation\u001b[0m\n    \u001b[31m  109) should format context entries correctly\u001b[0m\n    \u001b[31m  110) should handle bidirectional conversation correctly\u001b[0m\n\u001b[0m    pruneOldEntries\u001b[0m\n    \u001b[31m  111) should remove entries older than maxContextAgeMs\u001b[0m\n    \u001b[31m  112) should handle non-existent conversation ID\u001b[0m\n\u001b[0m    clearContext\u001b[0m\n    \u001b[31m  113) should clear a specific conversation\u001b[0m\n    \u001b[31m  114) should clear all conversations when no ID is provided\u001b[0m\n    \u001b[31m  115) should handle non-existent conversation ID\u001b[0m\n\u001b[0m    edge cases\u001b[0m\n    \u001b[31m  116) should handle empty entries\u001b[0m\n    \u001b[31m  117) should handle entries without timestamps\u001b[0m\n    \u001b[31m  118) should handle special characters in context\u001b[0m\n\n\u001b[0m  LanguagePairOptimizer\u001b[0m\n\u001b[0m    initialization\u001b[0m\n    \u001b[31m  119) should initialize language pairs from config\u001b[0m\n    \u001b[31m  120) should load language sets from config\u001b[0m\n    \u001b[31m  121) should load default ranking from config\u001b[0m\n\u001b[0m    getBestServiceForLanguagePair\u001b[0m\n    \u001b[31m  122) should select based on language pair config\u001b[0m\n    \u001b[31m  123) should prioritize based on quality score\u001b[0m\n    \u001b[31m  124) should prioritize based on speed\u001b[0m\n    \u001b[31m  125) should respect service health status\u001b[0m\n    \u001b[31m  126) should handle unconfigured language pairs\u001b[0m\n    \u001b[31m  127) should prefer DeepL for European languages\u001b[0m\n    \u001b[31m  128) should prefer GPT-4o for Asian languages\u001b[0m\n    \u001b[31m  129) should respect user preference\u001b[0m\n    \u001b[31m  130) should ignore unhealthy user preference\u001b[0m\n    \u001b[31m  131) should prioritize context-aware services when context is required\u001b[0m\n    \u001b[31m  132) should return a healthy service when all preferred services are unhealthy\u001b[0m\n\u001b[0m    updateQualityScore\u001b[0m\n    \u001b[31m  133) should update quality score with smoothing\u001b[0m\n    \u001b[32m  ✔\u001b[0m\u001b[90m should handle non-existent language pair\u001b[0m\n    \u001b[32m  ✔\u001b[0m\u001b[90m should handle non-existent service\u001b[0m\n\u001b[0m    edge cases\u001b[0m\n    \u001b[31m  134) should handle all services being unhealthy\u001b[0m\n    \u001b[31m  135) should handle empty serviceHealth object\u001b[0m\n    \u001b[31m  136) should handle missing options\u001b[0m\n\n\u001b[0m  TranslationCache\u001b[0m\n\u001b[0m    initialization\u001b[0m\n    \u001b[31m  137) should initialize with default settings\u001b[0m\n    \u001b[31m  138) should initialize with custom settings\u001b[0m\n    \u001b[31m  139) should initialize stats with zero values\u001b[0m\n\u001b[0m    generateKey\u001b[0m\n    \u001b[32m  ✔\u001b[0m\u001b[90m should generate unique keys for different text\u001b[0m\n    \u001b[32m  ✔\u001b[0m\u001b[90m should generate unique keys for different language pairs\u001b[0m\n    \u001b[32m  ✔\u001b[0m\u001b[90m should generate unique keys for different services\u001b[0m\n    \u001b[32m  ✔\u001b[0m\u001b[90m should include options in key generation\u001b[0m\n\u001b[0m    set and get\u001b[0m\n    \u001b[31m  140) should store and retrieve translations\u001b[0m\n    \u001b[31m  141) should also store service-agnostic entries\u001b[0m\n    \u001b[32m  ✔\u001b[0m\u001b[90m should return null for non-existent entries\u001b[0m\n    \u001b[31m  142) should update stats when retrieving entries\u001b[0m\n    \u001b[31m  143) should respect expiry times\u001b[0m\n\u001b[0m    pruneCache\u001b[0m\n    \u001b[31m  144) should remove expired entries\u001b[0m\n    \u001b[31m  145) should respect maxCacheSize\u001b[0m\n\u001b[0m    getStats\u001b[0m\n    \u001b[31m  146) should return accurate statistics\u001b[0m\n\u001b[0m    clear\u001b[0m\n    \u001b[31m  147) should remove all entries\u001b[0m\n\u001b[0m    edge cases\u001b[0m\n    \u001b[31m  148) should handle empty text\u001b[0m\n    \u001b[31m  149) should handle special characters\u001b[0m\n    \u001b[31m  150) should handle very long text\u001b[0m\n\n\u001b[0m  formatTextForDisplay\u001b[0m\n  \u001b[32m  ✔\u001b[0m\u001b[90m should trim whitespace from text\u001b[0m\n  \u001b[32m  ✔\u001b[0m\u001b[90m should return empty string for non-string input\u001b[0m\n  \u001b[32m  ✔\u001b[0m\u001b[90m should truncate long text with ellipsis\u001b[0m\n  \u001b[32m  ✔\u001b[0m\u001b[90m should not truncate text shorter than max length\u001b[0m\n\n\u001b[0m  String Utils\u001b[0m\n\u001b[0m    capitalize\u001b[0m\n    \u001b[32m  ✔\u001b[0m\u001b[90m should capitalize the first letter of a string\u001b[0m\n    \u001b[32m  ✔\u001b[0m\u001b[90m should handle empty string\u001b[0m\n    \u001b[32m  ✔\u001b[0m\u001b[90m should handle non-string inputs\u001b[0m\n\u001b[0m    truncate\u001b[0m\n    \u001b[32m  ✔\u001b[0m\u001b[90m should truncate strings longer than maxLength\u001b[0m\n    \u001b[32m  ✔\u001b[0m\u001b[90m should not truncate strings shorter than maxLength\u001b[0m\n    \u001b[32m  ✔\u001b[0m\u001b[90m should handle custom ellipsis\u001b[0m\n\u001b[0m    safeJsonParse\u001b[0m\n    \u001b[32m  ✔\u001b[0m\u001b[90m should parse valid JSON strings\u001b[0m\n    \u001b[32m  ✔\u001b[0m\u001b[90m should return default value for invalid JSON\u001b[0m\n    \u001b[32m  ✔\u001b[0m\u001b[90m should return empty object by default when parsing fails\u001b[0m\n\n\u001b[0m  Test Utilities\u001b[0m\n\u001b[0m    mockT\u001b[0m\n    \u001b[32m  ✔\u001b[0m\u001b[90m should return the key as the translation\u001b[0m\n\u001b[0m    createMockAudioContext\u001b[0m\n    \u001b[32m  ✔\u001b[0m\u001b[90m should create a mock AudioContext with expected methods\u001b[0m\n    \u001b[32m  ✔\u001b[0m\u001b[90m should allow calling mocked methods\u001b[0m\n\u001b[0m    createMockMediaStream\u001b[0m\n    \u001b[32m  ✔\u001b[0m\u001b[90m should create a mock MediaStream with expected methods\u001b[0m\n\u001b[0m    MockResizeObserver\u001b[0m\n    \u001b[32m  ✔\u001b[0m\u001b[90m should create a mock ResizeObserver with expected methods\u001b[0m\n\u001b[0m    createComponentMock\u001b[0m\n    \u001b[32m  ✔\u001b[0m\u001b[90m should create a mock React component\u001b[0m\n\u001b[0m    createControllablePromise\u001b[0m\n    \u001b[32m  ✔\u001b[0m\u001b[90m should create a promise with resolve and reject controls\u001b[0m\u001b[31m (102ms)\u001b[0m\n\u001b[0m    waitFor\u001b[0m\n    \u001b[32m  ✔\u001b[0m\u001b[90m should wait for a condition to be true\u001b[0m\u001b[33m (51ms)\u001b[0m\n    \u001b[32m  ✔\u001b[0m\u001b[90m should timeout if condition is not met\u001b[0m\u001b[33m (52ms)\u001b[0m\n\u001b[0m    useFakeTimers\u001b[0m\n    \u001b[32m  ✔\u001b[0m\u001b[90m should mock timers\u001b[0m\n\u001b[0m    mockFetch\u001b[0m\n    \u001b[32m  ✔\u001b[0m\u001b[90m should mock fetch with a successful response\u001b[0m\n    \u001b[32m  ✔\u001b[0m\u001b[90m should mock fetch with an error response\u001b[0m\n\n\n\u001b[92m \u001b[0m\u001b[32m 63 passing\u001b[0m\u001b[90m (2m)\u001b[0m\n\u001b[36m \u001b[0m\u001b[36m 3 pending\u001b[0m\n\u001b[31m  150 failing\u001b[0m\n\n\u001b[0m  1) Visual Regression Tests\n       Main Interface\n         \"before each\" hook for \"should match baseline for initial UI\":\n\u001b[0m\u001b[31m     TimeoutError: Waiting for selector `#app-container` failed: Waiting failed: 5000ms exceeded\u001b[0m\u001b[90m\n      at new WaitTask (node_modules/puppeteer-core/lib/cjs/puppeteer/common/WaitTask.js:48:34)\n      at IsolatedWorld.waitForFunction (node_modules/puppeteer-core/lib/cjs/puppeteer/api/Realm.js:25:26)\n      at CSSQueryHandler.waitFor (node_modules/puppeteer-core/lib/cjs/puppeteer/common/QueryHandler.js:178:95)\n      at async CdpFrame.waitForSelector (node_modules/puppeteer-core/lib/cjs/puppeteer/api/Frame.js:548:21)\n      at async CdpPage.waitForSelector (node_modules/puppeteer-core/lib/cjs/puppeteer/api/Page.js:1377:20)\n      at async Context.<anonymous> (tests/visual/visual-regression.test.js:129:13)\n\u001b[0m\n\u001b[0m  2) Visual Regression Tests\n       Translation Process\n         \"before each\" hook for \"should match baseline for translation in progress\":\n\u001b[0m\u001b[31m     TimeoutError: Waiting for selector `#translation-form` failed: Waiting failed: 5000ms exceeded\u001b[0m\u001b[90m\n      at new WaitTask (node_modules/puppeteer-core/lib/cjs/puppeteer/common/WaitTask.js:48:34)\n      at IsolatedWorld.waitForFunction (node_modules/puppeteer-core/lib/cjs/puppeteer/api/Realm.js:25:26)\n      at CSSQueryHandler.waitFor (node_modules/puppeteer-core/lib/cjs/puppeteer/common/QueryHandler.js:178:95)\n      at async CdpFrame.waitForSelector (node_modules/puppeteer-core/lib/cjs/puppeteer/api/Frame.js:548:21)\n      at async CdpPage.waitForSelector (node_modules/puppeteer-core/lib/cjs/puppeteer/api/Page.js:1377:20)\n      at async Context.<anonymous> (tests/visual/visual-regression.test.js:164:13)\n\u001b[0m\n\u001b[0m  3) Visual Regression Tests\n       Responsive Design\n         should match baseline on mobile viewport:\n\u001b[0m\u001b[31m     TimeoutError: Waiting for selector `#app-container` failed: Waiting failed: 5000ms exceeded\u001b[0m\u001b[90m\n      at new WaitTask (node_modules/puppeteer-core/lib/cjs/puppeteer/common/WaitTask.js:48:34)\n      at IsolatedWorld.waitForFunction (node_modules/puppeteer-core/lib/cjs/puppeteer/api/Realm.js:25:26)\n      at CSSQueryHandler.waitFor (node_modules/puppeteer-core/lib/cjs/puppeteer/common/QueryHandler.js:178:95)\n      at async CdpFrame.waitForSelector (node_modules/puppeteer-core/lib/cjs/puppeteer/api/Frame.js:548:21)\n      at async CdpPage.waitForSelector (node_modules/puppeteer-core/lib/cjs/puppeteer/api/Page.js:1377:20)\n      at async Context.<anonymous> (tests/visual/visual-regression.test.js:243:17)\n\u001b[0m\n\u001b[0m  4) Visual Regression Tests\n       Responsive Design\n         should match baseline on tablet viewport:\n\u001b[0m\u001b[31m     TimeoutError: Waiting for selector `#app-container` failed: Waiting failed: 5000ms exceeded\u001b[0m\u001b[90m\n      at new WaitTask (node_modules/puppeteer-core/lib/cjs/puppeteer/common/WaitTask.js:48:34)\n      at IsolatedWorld.waitForFunction (node_modules/puppeteer-core/lib/cjs/puppeteer/api/Realm.js:25:26)\n      at CSSQueryHandler.waitFor (node_modules/puppeteer-core/lib/cjs/puppeteer/common/QueryHandler.js:178:95)\n      at async CdpFrame.waitForSelector (node_modules/puppeteer-core/lib/cjs/puppeteer/api/Frame.js:548:21)\n      at async CdpPage.waitForSelector (node_modules/puppeteer-core/lib/cjs/puppeteer/api/Page.js:1377:20)\n      at async Context.<anonymous> (tests/visual/visual-regression.test.js:243:17)\n\u001b[0m\n\u001b[0m  5) Visual Regression Tests\n       Responsive Design\n         should match baseline on desktop viewport:\n\u001b[0m\u001b[31m     TimeoutError: Waiting for selector `#app-container` failed: Waiting failed: 5000ms exceeded\u001b[0m\u001b[90m\n      at new WaitTask (node_modules/puppeteer-core/lib/cjs/puppeteer/common/WaitTask.js:48:34)\n      at IsolatedWorld.waitForFunction (node_modules/puppeteer-core/lib/cjs/puppeteer/api/Realm.js:25:26)\n      at CSSQueryHandler.waitFor (node_modules/puppeteer-core/lib/cjs/puppeteer/common/QueryHandler.js:178:95)\n      at async CdpFrame.waitForSelector (node_modules/puppeteer-core/lib/cjs/puppeteer/api/Frame.js:548:21)\n      at async CdpPage.waitForSelector (node_modules/puppeteer-core/lib/cjs/puppeteer/api/Page.js:1377:20)\n      at async Context.<anonymous> (tests/visual/visual-regression.test.js:243:17)\n\u001b[0m\n\u001b[0m  6) Visual Regression Tests\n       Themes\n         should match baseline with light theme:\n\u001b[0m\u001b[31m     Error: Waiting for selector `#app-container` failed: waitForFunction failed: frame got detached.\u001b[0m\u001b[90m\n      at IsolatedWorld.dispose (node_modules/puppeteer-core/lib/cjs/puppeteer/api/Realm.js:40:39)\n      at [nodejs.dispose] (node_modules/puppeteer-core/lib/cjs/puppeteer/api/Realm.js:44:14)\n      at [nodejs.dispose] (node_modules/puppeteer-core/lib/cjs/puppeteer/cdp/IsolatedWorld.js:156:45)\n      at [nodejs.dispose] (node_modules/puppeteer-core/lib/cjs/puppeteer/cdp/Frame.js:331:92)\n      at #removeFramesRecursively (node_modules/puppeteer-core/lib/cjs/puppeteer/cdp/FrameManager.js:452:45)\n      at #onClientDisconnect (node_modules/puppeteer-core/lib/cjs/puppeteer/cdp/FrameManager.js:82:42)\n      at /Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/puppeteer-core/lib/cjs/puppeteer/cdp/FrameManager.js:66:37\n      at onceHandler (node_modules/puppeteer-core/lib/cjs/puppeteer/common/EventEmitter.js:94:13)\n      at /Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/puppeteer-core/lib/cjs/third_party/mitt/mitt.js:62:7\n      at Array.map (<anonymous>)\n      at Object.emit (node_modules/puppeteer-core/lib/cjs/third_party/mitt/mitt.js:61:20)\n      at CdpCDPSession.emit (node_modules/puppeteer-core/lib/cjs/puppeteer/common/EventEmitter.js:83:23)\n      at CdpCDPSession.onClosed (node_modules/puppeteer-core/lib/cjs/puppeteer/cdp/CdpSession.js:116:14)\n      at #onClose (node_modules/puppeteer-core/lib/cjs/puppeteer/cdp/Connection.js:181:21)\n      at WebSocket.<anonymous> (node_modules/puppeteer-core/lib/cjs/puppeteer/node/NodeWebSocketTransport.js:48:30)\n      at callListener (node_modules/ws/lib/event-target.js:290:14)\n      at WebSocket.onClose (node_modules/ws/lib/event-target.js:220:9)\n      at WebSocket.emit (node:events:518:28)\n      at WebSocket.emitClose (node_modules/ws/lib/websocket.js:272:10)\n      at Socket.socketOnClose (node_modules/ws/lib/websocket.js:1341:15)\n      at Socket.emit (node:events:518:28)\n      at TCP.<anonymous> (node:net:351:12)\n\u001b[0m\n\u001b[0m  7) Visual Regression Tests\n       Themes\n         should match baseline with dark theme:\n\u001b[0m\u001b[31m     Error: Attempted to use detached Frame '79B6A68E9402EF901EBD86A412EEC698'.\u001b[0m\u001b[90m\n      at CdpFrame.<anonymous> (node_modules/puppeteer-core/lib/cjs/puppeteer/util/decorators.js:107:23)\n      at CdpPage.goto (node_modules/puppeteer-core/lib/cjs/puppeteer/api/Page.js:574:43)\n      at Context.<anonymous> (tests/visual/visual-regression.test.js:262:28)\n      at process.processImmediate (node:internal/timers:491:21)\n\u001b[0m\n\u001b[0m  8) Visual Regression Tests\n       Themes\n         should match baseline with high-contrast theme:\n\u001b[0m\u001b[31m     Error: Attempted to use detached Frame '79B6A68E9402EF901EBD86A412EEC698'.\u001b[0m\u001b[90m\n      at CdpFrame.<anonymous> (node_modules/puppeteer-core/lib/cjs/puppeteer/util/decorators.js:107:23)\n      at CdpPage.goto (node_modules/puppeteer-core/lib/cjs/puppeteer/api/Page.js:574:43)\n      at Context.<anonymous> (tests/visual/visual-regression.test.js:262:28)\n      at process.processImmediate (node:internal/timers:491:21)\n\u001b[0m\n\u001b[0m  9) Accessibility Tests\n       Main Interface\n         \"before each\" hook for \"should have no critical accessibility violations\":\n\u001b[0m\u001b[31m     TimeoutError: Waiting for selector `#app-container` failed: Waiting failed: 5000ms exceeded\u001b[0m\u001b[90m\n      at new WaitTask (node_modules/puppeteer-core/lib/cjs/puppeteer/common/WaitTask.js:48:34)\n      at IsolatedWorld.waitForFunction (node_modules/puppeteer-core/lib/cjs/puppeteer/api/Realm.js:25:26)\n      at CSSQueryHandler.waitFor (node_modules/puppeteer-core/lib/cjs/puppeteer/common/QueryHandler.js:178:95)\n      at async CdpFrame.waitForSelector (node_modules/puppeteer-core/lib/cjs/puppeteer/api/Frame.js:548:21)\n      at async CdpPage.waitForSelector (node_modules/puppeteer-core/lib/cjs/puppeteer/api/Page.js:1377:20)\n      at async Context.<anonymous> (tests/accessibility/ui-accessibility.test.js:68:13)\n\u001b[0m\n\u001b[0m  10) Accessibility Tests\n       Translation Form\n         \"before each\" hook for \"should have accessible form controls\":\n\u001b[0m\u001b[31m     TimeoutError: Waiting for selector `#translation-form` failed: Waiting failed: 5000ms exceeded\u001b[0m\u001b[90m\n      at new WaitTask (node_modules/puppeteer-core/lib/cjs/puppeteer/common/WaitTask.js:48:34)\n      at IsolatedWorld.waitForFunction (node_modules/puppeteer-core/lib/cjs/puppeteer/api/Realm.js:25:26)\n      at CSSQueryHandler.waitFor (node_modules/puppeteer-core/lib/cjs/puppeteer/common/QueryHandler.js:178:95)\n      at async CdpFrame.waitForSelector (node_modules/puppeteer-core/lib/cjs/puppeteer/api/Frame.js:548:21)\n      at async CdpPage.waitForSelector (node_modules/puppeteer-core/lib/cjs/puppeteer/api/Page.js:1377:20)\n      at async Context.<anonymous> (tests/accessibility/ui-accessibility.test.js:125:13)\n\u001b[0m\n\u001b[0m  11) Accessibility Tests\n       Results Display\n         \"before each\" hook for \"should have screen reader accessible results\":\n\u001b[0m\u001b[31m     TimeoutError: Waiting for selector `#translation-form` failed: Waiting failed: 5000ms exceeded\u001b[0m\u001b[90m\n      at new WaitTask (node_modules/puppeteer-core/lib/cjs/puppeteer/common/WaitTask.js:48:34)\n      at IsolatedWorld.waitForFunction (node_modules/puppeteer-core/lib/cjs/puppeteer/api/Realm.js:25:26)\n      at CSSQueryHandler.waitFor (node_modules/puppeteer-core/lib/cjs/puppeteer/common/QueryHandler.js:178:95)\n      at async CdpFrame.waitForSelector (node_modules/puppeteer-core/lib/cjs/puppeteer/api/Frame.js:548:21)\n      at async CdpPage.waitForSelector (node_modules/puppeteer-core/lib/cjs/puppeteer/api/Page.js:1377:20)\n      at async Context.<anonymous> (tests/accessibility/ui-accessibility.test.js:187:13)\n\u001b[0m\n\u001b[0m  12) Accessibility Tests\n       Responsive Design\n         should be accessible on mobile viewport:\n\u001b[0m\u001b[31m     TimeoutError: Waiting for selector `#app-container` failed: Waiting failed: 5000ms exceeded\u001b[0m\u001b[90m\n      at new WaitTask (node_modules/puppeteer-core/lib/cjs/puppeteer/common/WaitTask.js:48:34)\n      at IsolatedWorld.waitForFunction (node_modules/puppeteer-core/lib/cjs/puppeteer/api/Realm.js:25:26)\n      at CSSQueryHandler.waitFor (node_modules/puppeteer-core/lib/cjs/puppeteer/common/QueryHandler.js:178:95)\n      at async CdpFrame.waitForSelector (node_modules/puppeteer-core/lib/cjs/puppeteer/api/Frame.js:548:21)\n      at async CdpPage.waitForSelector (node_modules/puppeteer-core/lib/cjs/puppeteer/api/Page.js:1377:20)\n      at async Context.<anonymous> (tests/accessibility/ui-accessibility.test.js:243:13)\n\u001b[0m\n\u001b[0m  13) Accessibility Tests\n       Responsive Design\n         should maintain touch target sizes on mobile:\n\u001b[0m\u001b[31m     TimeoutError: Waiting for selector `#translation-form` failed: Waiting failed: 5000ms exceeded\u001b[0m\u001b[90m\n      at new WaitTask (node_modules/puppeteer-core/lib/cjs/puppeteer/common/WaitTask.js:48:34)\n      at IsolatedWorld.waitForFunction (node_modules/puppeteer-core/lib/cjs/puppeteer/api/Realm.js:25:26)\n      at CSSQueryHandler.waitFor (node_modules/puppeteer-core/lib/cjs/puppeteer/common/QueryHandler.js:178:95)\n      at async CdpFrame.waitForSelector (node_modules/puppeteer-core/lib/cjs/puppeteer/api/Frame.js:548:21)\n      at async CdpPage.waitForSelector (node_modules/puppeteer-core/lib/cjs/puppeteer/api/Page.js:1377:20)\n      at async Context.<anonymous> (tests/accessibility/ui-accessibility.test.js:266:13)\n\u001b[0m\n\u001b[0m  14) Azure Translator API Tests\n       Translation API\n         should make correct API calls to translate text:\n\u001b[0m\u001b[31m     TypeError: Descriptor for property v4 is non-configurable and non-writable\u001b[0m\u001b[90m\n      at assertValidPropertyDescriptor (node_modules/sinon/lib/sinon/stub.js:138:15)\n      at Function.stub (node_modules/sinon/lib/sinon/stub.js:89:5)\n      at Sandbox.stub (node_modules/sinon/lib/sinon/sandbox.js:389:39)\n      at Context.<anonymous> (tests/api/azure-api.test.js:55:21)\n      at process.processImmediate (node:internal/timers:491:21)\n\u001b[0m\n\u001b[0m  15) Azure Translator API Tests\n       Translation API\n         should handle API errors correctly:\n\u001b[0m\u001b[31m     Error: Azure Translator connection test failed: Azure Translator error: The request is not authorized because credentials are missing or invalid.\u001b[0m\u001b[90m\n      at AzureTranslator.testConnection (src/services/translation/azure-translator.js:79:19)\n      at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n      at async AzureTranslator.initialize (src/services/translation/azure-translator.js:51:13)\n      at async Context.<anonymous> (tests/api/azure-api.test.js:84:13)\n\u001b[0m\n\u001b[0m  16) Azure Translator API Tests\n       Translation API\n         should handle network errors gracefully:\n\u001b[0m\u001b[31m     Error: Azure Translator connection test failed: Azure Translator error: Connection refused\u001b[0m\u001b[90m\n      at AzureTranslator.testConnection (src/services/translation/azure-translator.js:79:19)\n      at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n      at async AzureTranslator.initialize (src/services/translation/azure-translator.js:51:13)\n      at async Context.<anonymous> (tests/api/azure-api.test.js:106:13)\n\u001b[0m\n\u001b[0m  17) Azure Translator API Tests\n       Language Detection API\n         should detect language correctly:\n\u001b[0m\u001b[31m     Error: Azure Translator connection test failed: Azure Translator error: Nock: No match for request {\n  \"method\": \"POST\",\n  \"url\": \"https://api.cognitive.microsofttranslator.com/translate?api-version=3.0&to=es&category=general&profanityAction=NoAction&includeAlignment=false&includeSentenceLength=false&textType=plain&from=en\",\n  \"headers\": {\n    \"accept\": \"application/json, text/plain, */*\",\n    \"content-type\": \"application/json\",\n    \"ocp-apim-subscription-key\": \"test-api-key\",\n    \"ocp-apim-subscription-region\": \"eastus\",\n    \"x-clienttraceid\": \"0bc08047-8852-4f8e-a2d1-8760f4c392d8\",\n    \"user-agent\": \"axios/1.10.0\",\n    \"content-length\": \"18\",\n    \"accept-encoding\": \"gzip, compress, deflate, br\"\n  },\n  \"body\": \"[{\\\"text\\\":\\\"Hello\\\"}]\"\n}\u001b[0m\u001b[90m\n      at AzureTranslator.testConnection (src/services/translation/azure-translator.js:79:19)\n      at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n      at async AzureTranslator.initialize (src/services/translation/azure-translator.js:51:13)\n      at async Context.<anonymous> (tests/api/azure-api.test.js:137:13)\n\u001b[0m\n\u001b[0m  18) Azure Translator API Tests\n       Authentication\n         should include correct authentication headers:\n\u001b[0m\u001b[31m     Error: Azure Translator error: Nock: No match for request {\n  \"method\": \"POST\",\n  \"url\": \"https://api.cognitive.microsofttranslator.com/translate?api-version=3.0&to=es&category=general&profanityAction=NoAction&includeAlignment=false&includeSentenceLength=false&textType=plain&from=en\",\n  \"headers\": {\n    \"accept\": \"application/json, text/plain, */*\",\n    \"content-type\": \"application/json\",\n    \"ocp-apim-subscription-key\": \"test-api-key\",\n    \"ocp-apim-subscription-region\": \"eastus\",\n    \"x-clienttraceid\": \"126db50b-b966-4060-aa56-c38c44fb6248\",\n    \"user-agent\": \"axios/1.10.0\",\n    \"content-length\": \"18\",\n    \"accept-encoding\": \"gzip, compress, deflate, br\"\n  },\n  \"body\": \"[{\\\"text\\\":\\\"Hello\\\"}]\"\n}\u001b[0m\u001b[90m\n      at AzureTranslator.translateText (src/services/translation/azure-translator.js:223:19)\n      at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n      at async AzureTranslator.translate (src/services/translation/azure-translator.js:129:20)\n      at async Context.<anonymous> (tests/api/azure-api.test.js:208:13)\n\u001b[0m\n\u001b[0m  19) Complete Pipeline Integration Tests\n       End-to-end audio translation pipeline\n         should process audio through the complete pipeline:\n\u001b[0m\u001b[31m     TypeError: this.languagePairOptimizer.initialize is not a function\u001b[0m\u001b[90m\n      at TranslationManager.initialize (src/services/translation/translation-manager.js:79:46)\n      at async Context.<anonymous> (tests/integration/complete-pipeline.test.js:61:13)\n\u001b[0m\n\u001b[0m  20) Complete Pipeline Integration Tests\n       End-to-end audio translation pipeline\n         should handle service failover in the pipeline:\n\u001b[0m\u001b[31m     TypeError: Cannot stub non-existent property transcribeAudio\u001b[0m\u001b[90m\n      at Function.stub (node_modules/sinon/lib/sinon/stub.js:82:15)\n      at Sandbox.stub (node_modules/sinon/lib/sinon/sandbox.js:389:39)\n      at Context.<anonymous> (tests/integration/complete-pipeline.test.js:116:21)\n      at process.processImmediate (node:internal/timers:491:21)\n\u001b[0m\n\u001b[0m  21) Complete Pipeline Integration Tests\n       End-to-end audio translation pipeline\n         should maintain conversation context across multiple exchanges:\n\u001b[0m\u001b[31m     TypeError: this.languagePairOptimizer.initialize is not a function\u001b[0m\u001b[90m\n      at TranslationManager.initialize (src/services/translation/translation-manager.js:79:46)\n      at async Context.<anonymous> (tests/integration/complete-pipeline.test.js:178:13)\n\u001b[0m\n\u001b[0m  22) Translation Integration Tests\n       End-to-end translation workflow\n         should complete the full translation pipeline:\n\u001b[0m\u001b[31m     TypeError: this.languagePairOptimizer.initialize is not a function\u001b[0m\u001b[90m\n      at TranslationManager.initialize (src/services/translation/translation-manager.js:79:46)\n      at async Context.<anonymous> (tests/integration/stt-translation.test.js:38:13)\n\u001b[0m\n\u001b[0m  23) Translation Integration Tests\n       End-to-end translation workflow\n         should handle service failover correctly:\n\u001b[0m\u001b[31m     TypeError: this.languagePairOptimizer.initialize is not a function\u001b[0m\u001b[90m\n      at TranslationManager.initialize (src/services/translation/translation-manager.js:79:46)\n      at async Context.<anonymous> (tests/integration/stt-translation.test.js:98:13)\n\u001b[0m\n\u001b[0m  24) Translation Integration Tests\n       End-to-end translation workflow\n         should maintain conversation context between translations:\n\u001b[0m\u001b[31m     TypeError: this.languagePairOptimizer.initialize is not a function\u001b[0m\u001b[90m\n      at TranslationManager.initialize (src/services/translation/translation-manager.js:79:46)\n      at async Context.<anonymous> (tests/integration/stt-translation.test.js:112:13)\n\u001b[0m\n\u001b[0m  25) Translation Integration Tests\n       End-to-end translation workflow\n         should handle different priority settings:\n\u001b[0m\u001b[31m     TypeError: this.languagePairOptimizer.initialize is not a function\u001b[0m\u001b[90m\n      at TranslationManager.initialize (src/services/translation/translation-manager.js:79:46)\n      at async Context.<anonymous> (tests/integration/stt-translation.test.js:147:13)\n\u001b[0m\n\u001b[0m  26) Translation Performance Tests\n       \"before each\" hook for \"should measure individual service latency\":\n\u001b[0m\u001b[31m     TypeError: this.languagePairOptimizer.initialize is not a function\u001b[0m\u001b[90m\n      at TranslationManager.initialize (src/services/translation/translation-manager.js:79:46)\n      at async Context.<anonymous> (tests/performance/translation-performance.test.js:52:9)\n\u001b[0m\n\u001b[0m  27) Translation Cache Performance\n       \"before each\" hook for \"should improve performance with caching\":\n\u001b[0m\u001b[31m     TypeError: this.languagePairOptimizer.initialize is not a function\u001b[0m\u001b[90m\n      at TranslationManager.initialize (src/services/translation/translation-manager.js:79:46)\n      at async Context.<anonymous> (tests/performance/translation-performance.test.js:331:9)\n\u001b[0m\n\u001b[0m  28) API Key Security\n       API key storage\n         should encrypt API keys before storing:\n\u001b[0m\u001b[31m     TypeError: apiKeyManager.storeApiKey is not a function\u001b[0m\u001b[90m\n      at Context.<anonymous> (tests/security/api-key-security.test.js:46:27)\n      at process.processImmediate (node:internal/timers:491:21)\n\u001b[0m\n\u001b[0m  29) API Key Security\n       API key storage\n         should store API keys in the correct location:\n\u001b[0m\u001b[31m     TypeError: apiKeyManager.storeApiKey is not a function\u001b[0m\u001b[90m\n      at Context.<anonymous> (tests/security/api-key-security.test.js:64:27)\n      at process.processImmediate (node:internal/timers:491:21)\n\u001b[0m\n\u001b[0m  30) API Key Security\n       API key storage\n         should not store API keys in plain text:\n\u001b[0m\u001b[31m     TypeError: apiKeyManager.storeApiKey is not a function\u001b[0m\u001b[90m\n      at Context.<anonymous> (tests/security/api-key-security.test.js:80:27)\n      at process.processImmediate (node:internal/timers:491:21)\n\u001b[0m\n\u001b[0m  31) API Key Security\n       API key retrieval\n         should decrypt API keys when retrieving:\n\u001b[0m\u001b[31m     TypeError: apiKeyManager.getApiKey is not a function\u001b[0m\u001b[90m\n      at Context.<anonymous> (tests/security/api-key-security.test.js:101:48)\n      at process.processImmediate (node:internal/timers:491:21)\n\u001b[0m\n\u001b[0m  32) API Key Security\n       API key retrieval\n         should handle missing API keys gracefully:\n\u001b[0m\u001b[31m     TypeError: apiKeyManager.getApiKey is not a function\u001b[0m\u001b[90m\n      at Context.<anonymous> (tests/security/api-key-security.test.js:113:48)\n      at process.processImmediate (node:internal/timers:491:21)\n\u001b[0m\n\u001b[0m  33) API Key Security\n       API key retrieval\n         should handle decryption errors securely:\n\u001b[0m\u001b[31m     AssertionError: expected 'apiKeyManager.getApiKey is not a func…' to include 'retrieve API key'\u001b[0m\u001b[90m\n      at Context.<anonymous> (tests/security/api-key-security.test.js:133:42)\n      at process.processImmediate (node:internal/timers:491:21)\n\u001b[0m\n\u001b[0m  34) API Key Security\n       API key validation\n         should validate API key format:\n\u001b[0m\u001b[31m     TypeError: apiKeyManager.isValidApiKeyFormat is not a function\u001b[0m\u001b[90m\n      at Context.<anonymous> (tests/security/api-key-security.test.js:141:34)\n      at process.processImmediate (node:internal/timers:491:21)\n\u001b[0m\n\u001b[0m  35) API Key Security\n       API key validation\n         should detect potentially compromised API keys:\n\u001b[0m\u001b[31m     TypeError: apiKeyManager.isCompromisedApiKey is not a function\u001b[0m\u001b[90m\n      at Context.<anonymous> (tests/security/api-key-security.test.js:155:34)\n      at process.processImmediate (node:internal/timers:491:21)\n\u001b[0m\n\u001b[0m  36) API Key Security\n       API key rotation\n         should support API key rotation:\n\u001b[0m\u001b[31m     TypeError: apiKeyManager.rotateApiKey is not a function\u001b[0m\u001b[90m\n      at Context.<anonymous> (tests/security/api-key-security.test.js:182:33)\n      at process.processImmediate (node:internal/timers:491:21)\n\u001b[0m\n\u001b[0m  37) App Security\n       Input sanitization\n         should sanitize user inputs to prevent injection attacks:\n\u001b[0m\u001b[31m     Error: Cannot find module '../../src/services/security/input-sanitizer'\nRequire stack:\n- /Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/tests/security/api-key-security.test.js\u001b[0m\u001b[90m\n      at Function._resolveFilename (node:internal/modules/cjs/loader:1225:15)\n      at Function._load (node:internal/modules/cjs/loader:1055:27)\n      at TracingChannel.traceSync (node:diagnostics_channel:322:14)\n      at wrapModuleLoad (node:internal/modules/cjs/loader:220:24)\n      at Module.require (node:internal/modules/cjs/loader:1311:12)\n      at require (node:internal/modules/helpers:136:16)\n      at Context.<anonymous> (tests/security/api-key-security.test.js:232:39)\n      at process.processImmediate (node:internal/timers:491:21)\n\u001b[0m\n\u001b[0m  38) App Security\n       Input sanitization\n         should sanitize file paths to prevent path traversal:\n\u001b[0m\u001b[31m     Error: Cannot find module '../../src/services/security/input-sanitizer'\nRequire stack:\n- /Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/tests/security/api-key-security.test.js\u001b[0m\u001b[90m\n      at Function._resolveFilename (node:internal/modules/cjs/loader:1225:15)\n      at Function._load (node:internal/modules/cjs/loader:1055:27)\n      at TracingChannel.traceSync (node:diagnostics_channel:322:14)\n      at wrapModuleLoad (node:internal/modules/cjs/loader:220:24)\n      at Module.require (node:internal/modules/cjs/loader:1311:12)\n      at require (node:internal/modules/helpers:136:16)\n      at Context.<anonymous> (tests/security/api-key-security.test.js:244:38)\n      at process.processImmediate (node:internal/timers:491:21)\n\u001b[0m\n\u001b[0m  39) App Security\n       Content Security Policy\n         should validate CSP headers:\n\u001b[0m\u001b[31m     Error: Cannot find module '../../src/services/security/content-security'\nRequire stack:\n- /Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/tests/security/api-key-security.test.js\u001b[0m\u001b[90m\n      at Function._resolveFilename (node:internal/modules/cjs/loader:1225:15)\n      at Function._load (node:internal/modules/cjs/loader:1055:27)\n      at TracingChannel.traceSync (node:diagnostics_channel:322:14)\n      at wrapModuleLoad (node:internal/modules/cjs/loader:220:24)\n      at Module.require (node:internal/modules/cjs/loader:1311:12)\n      at require (node:internal/modules/helpers:136:16)\n      at Context.<anonymous> (tests/security/api-key-security.test.js:258:39)\n      at process.processImmediate (node:internal/timers:491:21)\n\u001b[0m\n\u001b[0m  40) App Security\n       Secure storage\n         should use secure storage for sensitive data:\n\u001b[0m\u001b[31m     Error: Cannot find module '../../src/services/security/secure-storage'\nRequire stack:\n- /Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/tests/security/api-key-security.test.js\u001b[0m\u001b[90m\n      at Function._resolveFilename (node:internal/modules/cjs/loader:1225:15)\n      at Function._load (node:internal/modules/cjs/loader:1055:27)\n      at TracingChannel.traceSync (node:diagnostics_channel:322:14)\n      at wrapModuleLoad (node:internal/modules/cjs/loader:220:24)\n      at Module.require (node:internal/modules/cjs/loader:1311:12)\n      at require (node:internal/modules/helpers:136:16)\n      at Context.<anonymous> (tests/security/api-key-security.test.js:271:35)\n      at process.processImmediate (node:internal/timers:491:21)\n\u001b[0m\n\u001b[0m  41) Network Security\n       HTTPS verification\n         should verify HTTPS certificates by default:\n\u001b[0m\u001b[31m     Error: Cannot find module '../../src/services/network/http-client'\nRequire stack:\n- /Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/tests/security/api-key-security.test.js\u001b[0m\u001b[90m\n      at Function._resolveFilename (node:internal/modules/cjs/loader:1225:15)\n      at Function._load (node:internal/modules/cjs/loader:1055:27)\n      at TracingChannel.traceSync (node:diagnostics_channel:322:14)\n      at wrapModuleLoad (node:internal/modules/cjs/loader:220:24)\n      at Module.require (node:internal/modules/cjs/loader:1311:12)\n      at require (node:internal/modules/helpers:136:16)\n      at Context.<anonymous> (tests/security/api-key-security.test.js:305:32)\n      at process.processImmediate (node:internal/timers:491:21)\n\u001b[0m\n\u001b[0m  42) Network Security\n       HTTPS verification\n         should detect and prevent SSL stripping:\n\u001b[0m\u001b[31m     Error: Cannot find module '../../src/services/network/http-client'\nRequire stack:\n- /Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/tests/security/api-key-security.test.js\u001b[0m\u001b[90m\n      at Function._resolveFilename (node:internal/modules/cjs/loader:1225:15)\n      at Function._load (node:internal/modules/cjs/loader:1055:27)\n      at TracingChannel.traceSync (node:diagnostics_channel:322:14)\n      at wrapModuleLoad (node:internal/modules/cjs/loader:220:24)\n      at Module.require (node:internal/modules/cjs/loader:1311:12)\n      at require (node:internal/modules/helpers:136:16)\n      at Context.<anonymous> (tests/security/api-key-security.test.js:316:32)\n      at process.processImmediate (node:internal/timers:491:21)\n\u001b[0m\n\u001b[0m  43) Network Security\n       Authentication header handling\n         should safely handle authentication headers:\n\u001b[0m\u001b[31m     Error: Cannot find module '../../src/services/network/http-client'\nRequire stack:\n- /Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/tests/security/api-key-security.test.js\u001b[0m\u001b[90m\n      at Function._resolveFilename (node:internal/modules/cjs/loader:1225:15)\n      at Function._load (node:internal/modules/cjs/loader:1055:27)\n      at TracingChannel.traceSync (node:diagnostics_channel:322:14)\n      at wrapModuleLoad (node:internal/modules/cjs/loader:220:24)\n      at Module.require (node:internal/modules/cjs/loader:1311:12)\n      at require (node:internal/modules/helpers:136:16)\n      at Context.<anonymous> (tests/security/api-key-security.test.js:334:32)\n      at process.processImmediate (node:internal/timers:491:21)\n\u001b[0m\n\u001b[0m  44) Complete Translation Pipeline\n       \"before each\" hook for \"should initialize pipeline with default settings\":\n\u001b[0m\u001b[31m     Error: Cannot find module '../services/stt/stt-manager' from '/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/src/core'\u001b[0m\u001b[90m\n      at Function.resolveSync [as sync] (node_modules/resolve/lib/sync.js:111:15)\n      at Proxyquire._resolveModule (node_modules/proxyquire/lib/proxyquire.js:137:20)\n      at Proxyquire._require (node_modules/proxyquire/lib/proxyquire.js:179:27)\n      at require (node:internal/modules/helpers:136:16)\n      at Object.<anonymous> (src/core/complete-pipeline.js:6:20)\n      at Module._compile (node:internal/modules/cjs/loader:1554:14)\n      at Object..js (node:internal/modules/cjs/loader:1706:10)\n      at require.extensions.<computed> (node_modules/proxyquire/lib/proxyquire.js:311:43)\n      at Module.load (node:internal/modules/cjs/loader:1289:32)\n      at Function._load (node:internal/modules/cjs/loader:1108:12)\n      at TracingChannel.traceSync (node:diagnostics_channel:322:14)\n      at wrapModuleLoad (node:internal/modules/cjs/loader:220:24)\n      at Module.require (node:internal/modules/cjs/loader:1311:12)\n      at Proxyquire._withoutCache (node_modules/proxyquire/lib/proxyquire.js:222:12)\n      at Proxyquire.load (node_modules/proxyquire/lib/proxyquire.js:129:15)\n      at Context.<anonymous> (tests/unit/core/complete-pipeline.test.js:64:24)\n      at process.processImmediate (node:internal/timers:491:21)\n\u001b[0m\n\u001b[0m  45) Translation Error Handling\n       \"before each\" hook for \"should handle all services failing\":\n\u001b[0m\u001b[31m     TypeError: this.languagePairOptimizer.initialize is not a function\u001b[0m\u001b[90m\n      at TranslationManager.initialize (src/services/translation/translation-manager.js:79:46)\n      at async Context.<anonymous> (tests/unit/services/error-handling/translation-error-handling.test.js:22:9)\n\u001b[0m\n\u001b[0m  46) PlatformDetector\n       constructor\n         should set platform property:\n\n      \u001b[31mAssertionError: expected 'darwin' to equal 'win32'\u001b[0m\n      \u001b[32m+ expected\u001b[0m \u001b[31m- actual\u001b[0m\n\n      \u001b[31m-darwin\u001b[0m\n      \u001b[32m+win32\u001b[0m\n      \u001b[0m\u001b[90m\n      at Context.<anonymous> (tests/unit/services/platform-detector.test.js:35:36)\n      at process.processImmediate (node:internal/timers:491:21)\n\u001b[0m\n\u001b[0m  47) PlatformDetector\n       detectActiveApp\n         should detect Discord on Windows:\n\n      \u001b[31mAssertionError: expected 'Telegram' to equal 'Discord'\u001b[0m\n      \u001b[32m+ expected\u001b[0m \u001b[31m- actual\u001b[0m\n\n      \u001b[31m-Telegram\u001b[0m\n      \u001b[32m+Discord\u001b[0m\n      \u001b[0m\u001b[90m\n      at Context.<anonymous> (tests/unit/services/platform-detector.test.js:45:25)\n\u001b[0m\n\u001b[0m  48) PlatformDetector\n       detectActiveApp\n         should detect Zoom on macOS:\n\n      \u001b[31mAssertionError: expected 'Telegram' to equal 'Zoom'\u001b[0m\n      \u001b[32m+ expected\u001b[0m \u001b[31m- actual\u001b[0m\n\n      \u001b[31m-Telegram\u001b[0m\n      \u001b[32m+Zoom\u001b[0m\n      \u001b[0m\u001b[90m\n      at Context.<anonymous> (tests/unit/services/platform-detector.test.js:53:25)\n\u001b[0m\n\u001b[0m  49) PlatformDetector\n       detectActiveApp\n         should detect Teams on Linux:\n\n      \u001b[31mAssertionError: expected 'Telegram' to equal 'Teams'\u001b[0m\n      \u001b[32m+ expected\u001b[0m \u001b[31m- actual\u001b[0m\n\n      \u001b[31m-Telegram\u001b[0m\n      \u001b[32m+Teams\u001b[0m\n      \u001b[0m\u001b[90m\n      at Context.<anonymous> (tests/unit/services/platform-detector.test.js:61:25)\n\u001b[0m\n\u001b[0m  50) PlatformDetector\n       detectActiveApp\n         should return null when no supported app is detected:\n\u001b[0m\u001b[31m     AssertionError: expected 'Telegram' to be null\u001b[0m\u001b[90m\n      at Context.<anonymous> (tests/unit/services/platform-detector.test.js:69:27)\n\u001b[0m\n\u001b[0m  51) PlatformDetector\n       detectActiveApp\n         should handle exec errors gracefully:\n\u001b[0m\u001b[31m     AssertionError: expected 'Telegram' to be null\u001b[0m\u001b[90m\n      at Context.<anonymous> (tests/unit/services/platform-detector.test.js:77:27)\n\u001b[0m\n\u001b[0m  52) PlatformDetector\n       detectActiveApp\n         should handle unsupported platform:\n\u001b[0m\u001b[31m     AssertionError: expected 'Telegram' to be null\u001b[0m\u001b[90m\n      at Context.<anonymous> (tests/unit/services/platform-detector.test.js:84:27)\n\u001b[0m\n\u001b[0m  53) PlatformDetector\n       applyAudioRouting\n         should call Windows routing for win32 platform:\n\n      \u001b[31mAssertionError: expected false to be true\u001b[0m\n      \u001b[32m+ expected\u001b[0m \u001b[31m- actual\u001b[0m\n\n      \u001b[31m-false\u001b[0m\n      \u001b[32m+true\u001b[0m\n      \u001b[0m\u001b[90m\n      at Context.<anonymous> (tests/unit/services/platform-detector.test.js:153:43)\n      at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n\u001b[0m\n\u001b[0m  54) PlatformDetector\n       applyAudioRouting\n         should call Linux routing for linux platform:\n\n      \u001b[31mAssertionError: expected false to be true\u001b[0m\n      \u001b[32m+ expected\u001b[0m \u001b[31m- actual\u001b[0m\n\n      \u001b[31m-false\u001b[0m\n      \u001b[32m+true\u001b[0m\n      \u001b[0m\u001b[90m\n      at Context.<anonymous> (tests/unit/services/platform-detector.test.js:171:41)\n      at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n\u001b[0m\n\u001b[0m  55) PlatformDetector\n       applyWindowsAudioRouting\n         should execute PowerShell commands for Windows audio routing:\n\n      \u001b[31mAssertionError: expected false to be true\u001b[0m\n      \u001b[32m+ expected\u001b[0m \u001b[31m- actual\u001b[0m\n\n      \u001b[31m-false\u001b[0m\n      \u001b[32m+true\u001b[0m\n      \u001b[0m\u001b[90m\n      at Context.<anonymous> (tests/unit/services/platform-detector.test.js:185:41)\n      at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n\u001b[0m\n\u001b[0m  56) PlatformDetector\n       applyLinuxAudioRouting\n         should execute pactl commands for Linux audio routing:\n\n      \u001b[31mAssertionError: expected false to be true\u001b[0m\n      \u001b[32m+ expected\u001b[0m \u001b[31m- actual\u001b[0m\n\n      \u001b[31m-false\u001b[0m\n      \u001b[32m+true\u001b[0m\n      \u001b[0m\u001b[90m\n      at Context.<anonymous> (tests/unit/services/platform-detector.test.js:212:41)\n\u001b[0m\n\u001b[0m  57) Setup Automation Service\n       Platform Detection\n         should detect macOS correctly:\n\u001b[0m\u001b[31m     TypeError: setupAutomation.detectPlatform is not a function\u001b[0m\u001b[90m\n      at Context.<anonymous> (tests/unit/services/setup-automation.test.js:55:40)\n      at process.processImmediate (node:internal/timers:491:21)\n\u001b[0m\n\u001b[0m  58) Setup Automation Service\n       Platform Detection\n         should detect Windows correctly:\n\u001b[0m\u001b[31m     TypeError: setupAutomation.detectPlatform is not a function\u001b[0m\u001b[90m\n      at Context.<anonymous> (tests/unit/services/setup-automation.test.js:61:40)\n      at process.processImmediate (node:internal/timers:491:21)\n\u001b[0m\n\u001b[0m  59) Setup Automation Service\n       Platform Detection\n         should detect Linux correctly:\n\u001b[0m\u001b[31m     TypeError: setupAutomation.detectPlatform is not a function\u001b[0m\u001b[90m\n      at Context.<anonymous> (tests/unit/services/setup-automation.test.js:67:40)\n      at process.processImmediate (node:internal/timers:491:21)\n\u001b[0m\n\u001b[0m  60) Setup Automation Service\n       Platform Detection\n         should throw error for unsupported platform:\n\n      \u001b[31mAssertionError: expected [Function] to throw error including 'Unsupported platform: freebsd' but got 'setupAutomation.detectPlatform is not…'\u001b[0m\n      \u001b[32m+ expected\u001b[0m \u001b[31m- actual\u001b[0m\n\n      \u001b[31m-setupAutomation.detectPlatform is not a function\u001b[0m\n      \u001b[32m+Unsupported platform: freebsd\u001b[0m\n      \u001b[0m\u001b[90m\n      at Context.<anonymous> (tests/unit/services/setup-automation.test.js:73:62)\n      at process.processImmediate (node:internal/timers:491:21)\n\u001b[0m\n\u001b[0m  61) Setup Automation Service\n       Virtual Audio Installation\n         should install VB-Audio Cable on Windows:\n\u001b[0m\u001b[31m     Error: Timeout of 5000ms exceeded. For async tests and hooks, ensure \"done()\" is called; if returning a Promise, ensure it resolves. (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/tests/unit/services/setup-automation.test.js)\u001b[0m\u001b[90m\n      at listOnTimeout (node:internal/timers:594:17)\n      at process.processTimers (node:internal/timers:529:7)\n\u001b[0m\n\u001b[0m  62) Setup Automation Service\n       Virtual Audio Installation\n         should install BlackHole on macOS:\n\u001b[0m\u001b[31m     Error: Timeout of 5000ms exceeded. For async tests and hooks, ensure \"done()\" is called; if returning a Promise, ensure it resolves. (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/tests/unit/services/setup-automation.test.js)\u001b[0m\u001b[90m\n      at listOnTimeout (node:internal/timers:594:17)\n      at process.processTimers (node:internal/timers:529:7)\n\u001b[0m\n\u001b[0m  63) Setup Automation Service\n       Virtual Audio Installation\n         should create PulseAudio virtual sinks on Linux:\n\u001b[0m\u001b[31m     Error: Timeout of 5000ms exceeded. For async tests and hooks, ensure \"done()\" is called; if returning a Promise, ensure it resolves. (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/tests/unit/services/setup-automation.test.js)\u001b[0m\u001b[90m\n      at listOnTimeout (node:internal/timers:594:17)\n      at process.processTimers (node:internal/timers:529:7)\n\u001b[0m\n\u001b[0m  64) Setup Automation Service\n       Virtual Audio Installation\n         should handle installation errors:\n\u001b[0m\u001b[31m     Error: Timeout of 5000ms exceeded. For async tests and hooks, ensure \"done()\" is called; if returning a Promise, ensure it resolves. (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/tests/unit/services/setup-automation.test.js)\u001b[0m\u001b[90m\n      at listOnTimeout (node:internal/timers:594:17)\n      at process.processTimers (node:internal/timers:529:7)\n\u001b[0m\n\u001b[0m  65) Setup Automation Service\n       Audio Device Configuration\n         should configure audio devices successfully:\n\u001b[0m\u001b[31m     AssertionError: expected undefined to be an object\u001b[0m\u001b[90m\n      at Context.<anonymous> (tests/unit/services/setup-automation.test.js:130:36)\n\u001b[0m\n\u001b[0m  66) Setup Automation Service\n       Audio Device Configuration\n         should handle device configuration errors:\n\n      \u001b[31mAssertionError: expected true to be false\u001b[0m\n      \u001b[32m+ expected\u001b[0m \u001b[31m- actual\u001b[0m\n\n      \u001b[31m-true\u001b[0m\n      \u001b[32m+false\u001b[0m\n      \u001b[0m\u001b[90m\n      at Context.<anonymous> (tests/unit/services/setup-automation.test.js:138:35)\n\u001b[0m\n\u001b[0m  67) Setup Automation Service\n       Communication App Configuration\n         should configure Discord settings:\n\u001b[0m\u001b[31m     AssertionError: the given combination of arguments (undefined and string) is invalid for this assertion. You can use an array, a map, an object, a set, a string, or a weakset instead of a string\u001b[0m\u001b[90m\n      at Context.<anonymous> (tests/unit/services/setup-automation.test.js:152:30)\n\u001b[0m\n\u001b[0m  68) Setup Automation Service\n       Communication App Configuration\n         should configure Zoom settings:\n\u001b[0m\u001b[31m     AssertionError: the given combination of arguments (undefined and string) is invalid for this assertion. You can use an array, a map, an object, a set, a string, or a weakset instead of a string\u001b[0m\u001b[90m\n      at Context.<anonymous> (tests/unit/services/setup-automation.test.js:163:30)\n\u001b[0m\n\u001b[0m  69) Setup Automation Service\n       Communication App Configuration\n         should handle app configuration errors:\n\n      \u001b[31mAssertionError: expected true to be false\u001b[0m\n      \u001b[32m+ expected\u001b[0m \u001b[31m- actual\u001b[0m\n\n      \u001b[31m-true\u001b[0m\n      \u001b[32m+false\u001b[0m\n      \u001b[0m\u001b[90m\n      at Context.<anonymous> (tests/unit/services/setup-automation.test.js:171:35)\n\u001b[0m\n\u001b[0m  70) Setup Automation Service\n       Configuration File Creation\n         should create configuration files successfully:\n\n      \u001b[31mAssertionError: expected false to be true\u001b[0m\n      \u001b[32m+ expected\u001b[0m \u001b[31m- actual\u001b[0m\n\n      \u001b[31m-false\u001b[0m\n      \u001b[32m+true\u001b[0m\n      \u001b[0m\u001b[90m\n      at Context.<anonymous> (tests/unit/services/setup-automation.test.js:188:35)\n\u001b[0m\n\u001b[0m  71) Setup Automation Service\n       Configuration File Creation\n         should handle configuration file creation errors:\n\u001b[0m\u001b[31m     AssertionError: expected 'ENOENT: no such file or directory, mk…' to include 'Write failed'\u001b[0m\u001b[90m\n      at Context.<anonymous> (tests/unit/services/setup-automation.test.js:201:31)\n\u001b[0m\n\u001b[0m  72) Setup Automation Service\n       Complete Setup Process\n         should run complete setup successfully:\n\u001b[0m\u001b[31m     TypeError: setupAutomation.runCompleteSetup is not a function\u001b[0m\u001b[90m\n      at Context.<anonymous> (tests/unit/services/setup-automation.test.js:212:44)\n      at process.processImmediate (node:internal/timers:491:21)\n\u001b[0m\n\u001b[0m  73) Setup Automation Service\n       Complete Setup Process\n         should handle setup step failures gracefully:\n\u001b[0m\u001b[31m     TypeError: setupAutomation.runCompleteSetup is not a function\u001b[0m\u001b[90m\n      at Context.<anonymous> (tests/unit/services/setup-automation.test.js:223:44)\n      at process.processImmediate (node:internal/timers:491:21)\n\u001b[0m\n\u001b[0m  74) Setup Automation Service\n       Complete Setup Process\n         should provide detailed step results:\n\u001b[0m\u001b[31m     TypeError: setupAutomation.runCompleteSetup is not a function\u001b[0m\u001b[90m\n      at Context.<anonymous> (tests/unit/services/setup-automation.test.js:236:44)\n      at process.processImmediate (node:internal/timers:491:21)\n\u001b[0m\n\u001b[0m  75) Setup Automation Service\n       Error Handling\n         should handle timeout errors:\n\u001b[0m\u001b[31m     Error: Timeout of 5000ms exceeded. For async tests and hooks, ensure \"done()\" is called; if returning a Promise, ensure it resolves. (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/tests/unit/services/setup-automation.test.js)\u001b[0m\u001b[90m\n      at listOnTimeout (node:internal/timers:594:17)\n      at process.processTimers (node:internal/timers:529:7)\n\u001b[0m\n\u001b[0m  76) Setup Automation Service\n       Error Handling\n         should handle permission errors:\n\u001b[0m\u001b[31m     Error: Timeout of 5000ms exceeded. For async tests and hooks, ensure \"done()\" is called; if returning a Promise, ensure it resolves. (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/tests/unit/services/setup-automation.test.js)\u001b[0m\u001b[90m\n      at listOnTimeout (node:internal/timers:594:17)\n      at process.processTimers (node:internal/timers:529:7)\n\u001b[0m\n\u001b[0m  77) Setup Automation Service\n       Error Handling\n         should handle network errors:\n\u001b[0m\u001b[31m     Error: Timeout of 5000ms exceeded. For async tests and hooks, ensure \"done()\" is called; if returning a Promise, ensure it resolves. (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/tests/unit/services/setup-automation.test.js)\u001b[0m\u001b[90m\n      at listOnTimeout (node:internal/timers:594:17)\n      at process.processTimers (node:internal/timers:529:7)\n\u001b[0m\n\u001b[0m  78) Setup Automation Service\n       Validation\n         should validate platform support:\n\u001b[0m\u001b[31m     TypeError: setupAutomation.isPlatformSupported is not a function\u001b[0m\u001b[90m\n      at Context.<anonymous> (tests/unit/services/setup-automation.test.js:281:30)\n      at process.processImmediate (node:internal/timers:491:21)\n\u001b[0m\n\u001b[0m  79) Setup Automation Service\n       Validation\n         should validate app support:\n\u001b[0m\u001b[31m     TypeError: setupAutomation.isAppSupported is not a function\u001b[0m\u001b[90m\n      at Context.<anonymous> (tests/unit/services/setup-automation.test.js:288:30)\n      at process.processImmediate (node:internal/timers:491:21)\n\u001b[0m\n\u001b[0m  80) Setup Automation Service\n       Validation\n         should validate configuration:\n\u001b[0m\u001b[31m     TypeError: setupAutomation.validateConfiguration is not a function\u001b[0m\u001b[90m\n      at Context.<anonymous> (tests/unit/services/setup-automation.test.js:304:30)\n      at process.processImmediate (node:internal/timers:491:21)\n\u001b[0m\n\u001b[0m  81) AzureTranslator\n       initialization\n         should initialize successfully with valid credentials:\n\u001b[0m\u001b[31m     Error: Azure Translator connection test failed: Azure Translator error: Cannot read properties of undefined (reading 'data')\u001b[0m\u001b[90m\n      at AzureTranslator.testConnection (src/services/translation/azure-translator.js:79:19)\n      at async AzureTranslator.initialize (src/services/translation/azure-translator.js:51:13)\n      at async Context.<anonymous> (tests/unit/services/translation/azure-translator.test.js:41:28)\n\u001b[0m\n\u001b[0m  82) AzureTranslator\n       initialization\n         should handle API errors during initialization:\n\u001b[0m\u001b[31m     AssertionError: expected 'Azure Translator connection test fail…' to include 'Unable to connect to Azure'\u001b[0m\u001b[90m\n      at Context.<anonymous> (tests/unit/services/translation/azure-translator.test.js:72:42)\n\u001b[0m\n\u001b[0m  83) AzureTranslator\n       translate\n         should translate text successfully:\n\u001b[0m\u001b[31m     TypeError: sandbox.stub(...).returns is not a function\u001b[0m\u001b[90m\n      at Context.<anonymous> (tests/unit/services/translation/azure-translator.test.js:106:34)\n      at process.processImmediate (node:internal/timers:491:21)\n\u001b[0m\n\u001b[0m  84) AzureTranslator\n       detectLanguage\n         should detect language correctly:\n\u001b[0m\u001b[31m     AssertionError: expected undefined to be true\u001b[0m\u001b[90m\n      at Context.<anonymous> (tests/unit/services/translation/azure-translator.test.js:268:56)\n\u001b[0m\n\u001b[0m  85) AzureTranslator\n       detectLanguage\n         should handle empty text in language detection:\n\u001b[0m\u001b[31m     AssertionError: expected 'Cannot read properties of undefined (…' to include 'Text cannot be empty'\u001b[0m\u001b[90m\n      at Context.<anonymous> (tests/unit/services/translation/azure-translator.test.js:282:42)\n\u001b[0m\n\u001b[0m  86) GPT4oTranslator\n       initialization\n         should initialize successfully with valid API key:\n\u001b[0m\u001b[31m     Error: GPT-4o connection test failed: Connection test response was unexpected\u001b[0m\u001b[90m\n      at GPT4oTranslator.testConnection (src/services/translation/gpt4o-translator.js:95:19)\n      at async GPT4oTranslator.initialize (src/services/translation/gpt4o-translator.js:57:13)\n      at async Context.<anonymous> (tests/unit/services/translation/gpt4o-translator.test.js:40:28)\n\u001b[0m\n\u001b[0m  87) GPT4oTranslator\n       initialization\n         should handle missing API key:\n\u001b[0m\u001b[31m     AssertionError: expected 'GPT-4o connection test failed: Connec…' to include 'API key'\u001b[0m\u001b[90m\n      at Context.<anonymous> (tests/unit/services/translation/gpt4o-translator.test.js:54:42)\n\u001b[0m\n\u001b[0m  88) GPT4oTranslator\n       translate\n         should translate text successfully:\n\u001b[0m\u001b[31m     TypeError: Cannot read properties of undefined (reading 'tone')\u001b[0m\u001b[90m\n      at GPT4oTranslator.buildTranslationContext (src/services/translation/gpt4o-translator.js:272:56)\n      at GPT4oTranslator.translate (src/services/translation/gpt4o-translator.js:162:55)\n      at Context.<anonymous> (tests/unit/services/translation/gpt4o-translator.test.js:100:45)\n\u001b[0m\n\u001b[0m  89) GPT4oTranslator\n       translate\n         should handle API errors gracefully:\n\u001b[0m\u001b[31m     AssertionError: expected 'Cannot read properties of undefined (…' to include 'Rate limit exceeded'\u001b[0m\u001b[90m\n      at Context.<anonymous> (tests/unit/services/translation/gpt4o-translator.test.js:119:42)\n\u001b[0m\n\u001b[0m  90) GPT4oTranslator\n       translate\n         should handle malformed API responses:\n\u001b[0m\u001b[31m     AssertionError: expected 'Cannot read properties of undefined (…' to include 'Failed to parse translation response'\u001b[0m\u001b[90m\n      at Context.<anonymous> (tests/unit/services/translation/gpt4o-translator.test.js:145:42)\n\u001b[0m\n\u001b[0m  91) GPT4oTranslator\n       translate\n         should update conversation context when provided:\n\u001b[0m\u001b[31m     TypeError: Cannot read properties of undefined (reading 'tone')\u001b[0m\u001b[90m\n      at GPT4oTranslator.buildTranslationContext (src/services/translation/gpt4o-translator.js:272:56)\n      at GPT4oTranslator.translate (src/services/translation/gpt4o-translator.js:162:55)\n      at Context.<anonymous> (tests/unit/services/translation/gpt4o-translator.test.js:173:30)\n\u001b[0m\n\u001b[0m  92) GPT4oTranslator\n       updateConversationContext\n         should limit context size to configured window:\n\n      \u001b[31mAssertionError: expected 3 to equal 2\u001b[0m\n      \u001b[32m+ expected\u001b[0m \u001b[31m- actual\u001b[0m\n\n      \u001b[31m-3\u001b[0m\n      \u001b[32m+2\u001b[0m\n      \u001b[0m\u001b[90m\n      at Context.<anonymous> (tests/unit/services/translation/gpt4o-translator.test.js:300:39)\n      at process.processImmediate (node:internal/timers:491:21)\n\u001b[0m\n\u001b[0m  93) TranslationManager\n       initialization\n         should initialize successfully with all services:\n\u001b[0m\u001b[31m     TypeError: Cannot stub non-existent property initialize\u001b[0m\u001b[90m\n      at Function.stub (node_modules/sinon/lib/sinon/stub.js:82:15)\n      at Sandbox.stub (node_modules/sinon/lib/sinon/sandbox.js:389:39)\n      at Context.<anonymous> (tests/unit/services/translation/translation-manager.test.js:31:21)\n      at process.processImmediate (node:internal/timers:491:21)\n\u001b[0m\n\u001b[0m  94) TranslationManager\n       initialization\n         should handle service initialization failures gracefully:\n\u001b[0m\u001b[31m     TypeError: Cannot stub non-existent property initialize\u001b[0m\u001b[90m\n      at Function.stub (node_modules/sinon/lib/sinon/stub.js:82:15)\n      at Sandbox.stub (node_modules/sinon/lib/sinon/sandbox.js:389:39)\n      at Context.<anonymous> (tests/unit/services/translation/translation-manager.test.js:54:21)\n      at process.processImmediate (node:internal/timers:491:21)\n\u001b[0m\n\u001b[0m  95) TranslationManager\n       translate\n         should use cached translation when available:\n\u001b[0m\u001b[31m     TypeError: Attempted to wrap get which is already wrapped\u001b[0m\u001b[90m\n      at checkWrappedMethod (node_modules/sinon/lib/sinon/util/core/wrap-method.js:67:21)\n      at wrapMethod (node_modules/sinon/lib/sinon/util/core/wrap-method.js:132:13)\n      at Function.stub (node_modules/sinon/lib/sinon/stub.js:130:44)\n      at Sandbox.stub (node_modules/sinon/lib/sinon/sandbox.js:389:39)\n      at Context.<anonymous> (tests/unit/services/translation/translation-manager.test.js:120:21)\n  --------------\n  Error: Stack Trace for original\n      at extendObjectWithWrappedMethods (node_modules/sinon/lib/sinon/util/core/wrap-method.js:173:34)\n      at wrapMethod (node_modules/sinon/lib/sinon/util/core/wrap-method.js:161:5)\n      at Function.stub (node_modules/sinon/lib/sinon/stub.js:130:44)\n      at Sandbox.stub (node_modules/sinon/lib/sinon/sandbox.js:389:39)\n      at Context.<anonymous> (tests/unit/services/translation/translation-manager.test.js:74:21)\n      at process.processImmediate (node:internal/timers:491:21)\n\u001b[0m\n\u001b[0m  96) TranslationManager\n       fallbackTranslation\n         should try alternative services when primary fails:\n\u001b[0m\u001b[31m     TypeError: Cannot read properties of undefined (reading 'success')\u001b[0m\u001b[90m\n      at TranslationManager.fallbackTranslation (src/services/translation/translation-manager.js:383:24)\n      at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n      at async Context.<anonymous> (tests/unit/services/translation/translation-manager.test.js:247:28)\n\u001b[0m\n\u001b[0m  97) TranslationService\n       initialization\n         should create an instance with the provided config:\n\u001b[0m\u001b[31m     TypeError: Cannot read properties of undefined (reading 'serviceName')\u001b[0m\u001b[90m\n      at Context.<anonymous> (tests/unit/services/translation/translation-service.test.js:24:35)\n      at process.processImmediate (node:internal/timers:491:21)\n\u001b[0m\n\u001b[0m  98) TranslationService\n       initialization\n         should have default values for non-provided config options:\n\u001b[0m\u001b[31m     TypeError: Cannot read properties of undefined (reading 'timeout')\u001b[0m\u001b[90m\n      at Context.<anonymous> (tests/unit/services/translation/translation-service.test.js:29:35)\n      at process.processImmediate (node:internal/timers:491:21)\n\u001b[0m\n\u001b[0m  99) TranslationService\n       abstract methods\n         should throw error for abstract translate method:\n\u001b[0m\u001b[31m     AssertionError: expected 'Should have thrown an error' to include 'Method not implemented'\u001b[0m\u001b[90m\n      at Context.<anonymous> (tests/unit/services/translation/translation-service.test.js:40:40)\n\u001b[0m\n\u001b[0m  100) TranslationService\n       abstract methods\n         should throw error for abstract detectLanguage method:\n\u001b[0m\u001b[31m     AssertionError: expected 'Should have thrown an error' to include 'Method not implemented'\u001b[0m\u001b[90m\n      at Context.<anonymous> (tests/unit/services/translation/translation-service.test.js:49:40)\n\u001b[0m\n\u001b[0m  101) TranslationService\n       utility methods\n         should format language codes correctly:\n\u001b[0m\u001b[31m     TypeError: service.formatLanguageCode is not a function\u001b[0m\u001b[90m\n      at Context.<anonymous> (tests/unit/services/translation/translation-service.test.js:56:28)\n      at process.processImmediate (node:internal/timers:491:21)\n\u001b[0m\n\u001b[0m  102) ContextManager\n       initialization\n         should initialize with default settings:\n\u001b[0m\u001b[31m     TypeError: Cannot read properties of undefined (reading 'maxContextEntries')\u001b[0m\u001b[90m\n      at Context.<anonymous> (tests/unit/services/translation/utils/context-manager.test.js:28:42)\n      at process.processImmediate (node:internal/timers:491:21)\n\u001b[0m\n\u001b[0m  103) ContextManager\n       initialization\n         should initialize with custom settings:\n\u001b[0m\u001b[31m     TypeError: Cannot read properties of undefined (reading 'maxContextEntries')\u001b[0m\u001b[90m\n      at Context.<anonymous> (tests/unit/services/translation/utils/context-manager.test.js:33:42)\n      at process.processImmediate (node:internal/timers:491:21)\n\u001b[0m\n\u001b[0m  104) ContextManager\n       initialization\n         should initialize empty conversation contexts:\n\u001b[0m\u001b[31m     AssertionError: expected undefined to be an instance of Map\u001b[0m\u001b[90m\n      at Context.<anonymous> (tests/unit/services/translation/utils/context-manager.test.js:38:63)\n      at process.processImmediate (node:internal/timers:491:21)\n\u001b[0m\n\u001b[0m  105) ContextManager\n       addTranslationEntry\n         should add entries to the correct conversation:\n\u001b[0m\u001b[31m     TypeError: Cannot read properties of undefined (reading 'has')\u001b[0m\u001b[90m\n      at Context.<anonymous> (tests/unit/services/translation/utils/context-manager.test.js:54:56)\n      at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n\u001b[0m\n\u001b[0m  106) ContextManager\n       addTranslationEntry\n         should handle missing conversation ID:\n\u001b[0m\u001b[31m     TypeError: Cannot read properties of undefined (reading 'size')\u001b[0m\u001b[90m\n      at Context.<anonymous> (tests/unit/services/translation/utils/context-manager.test.js:69:56)\n      at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n\u001b[0m\n\u001b[0m  107) ContextManager\n       addTranslationEntry\n         should add multiple entries to the same conversation:\n\u001b[0m\u001b[31m     TypeError: Cannot read properties of undefined (reading 'get')\u001b[0m\u001b[90m\n      at Context.<anonymous> (tests/unit/services/translation/utils/context-manager.test.js:87:65)\n      at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n\u001b[0m\n\u001b[0m  108) ContextManager\n       addTranslationEntry\n         should respect maxContextEntries limit:\n\u001b[0m\u001b[31m     TypeError: Cannot read properties of undefined (reading 'get')\u001b[0m\u001b[90m\n      at Context.<anonymous> (tests/unit/services/translation/utils/context-manager.test.js:103:65)\n      at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n\u001b[0m\n\u001b[0m  109) ContextManager\n       getConversationContext\n         should format context entries correctly:\n\n      \u001b[31mAssertionError: expected +0 to be above +0\u001b[0m\n      \u001b[32m+ expected\u001b[0m \u001b[31m- actual\u001b[0m\n\n\u001b[0m\u001b[90m\n      at Context.<anonymous> (tests/unit/services/translation/utils/context-manager.test.js:143:42)\n      at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n\u001b[0m\n\u001b[0m  110) ContextManager\n       getConversationContext\n         should handle bidirectional conversation correctly:\n\u001b[0m\u001b[31m     AssertionError: expected '' to include 'Hello -> Hola'\u001b[0m\u001b[90m\n      at Context.<anonymous> (tests/unit/services/translation/utils/context-manager.test.js:169:32)\n      at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n\u001b[0m\n\u001b[0m  111) ContextManager\n       pruneOldEntries\n         should remove entries older than maxContextAgeMs:\n\u001b[0m\u001b[31m     TypeError: contextManager.pruneOldEntries is not a function\u001b[0m\u001b[90m\n      at Context.<anonymous> (tests/unit/services/translation/utils/context-manager.test.js:194:28)\n      at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n\u001b[0m\n\u001b[0m  112) ContextManager\n       pruneOldEntries\n         should handle non-existent conversation ID:\n\u001b[0m\u001b[31m     TypeError: contextManager.pruneOldEntries is not a function\u001b[0m\u001b[90m\n      at Context.<anonymous> (tests/unit/services/translation/utils/context-manager.test.js:203:28)\n      at process.processImmediate (node:internal/timers:491:21)\n\u001b[0m\n\u001b[0m  113) ContextManager\n       clearContext\n         should clear a specific conversation:\n\u001b[0m\u001b[31m     TypeError: contextManager.clearContext is not a function\u001b[0m\u001b[90m\n      at Context.<anonymous> (tests/unit/services/translation/utils/context-manager.test.js:221:34)\n      at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n\u001b[0m\n\u001b[0m  114) ContextManager\n       clearContext\n         should clear all conversations when no ID is provided:\n\u001b[0m\u001b[31m     TypeError: contextManager.clearContext is not a function\u001b[0m\u001b[90m\n      at Context.<anonymous> (tests/unit/services/translation/utils/context-manager.test.js:240:34)\n      at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n\u001b[0m\n\u001b[0m  115) ContextManager\n       clearContext\n         should handle non-existent conversation ID:\n\u001b[0m\u001b[31m     TypeError: contextManager.clearContext is not a function\u001b[0m\u001b[90m\n      at Context.<anonymous> (tests/unit/services/translation/utils/context-manager.test.js:247:34)\n      at process.processImmediate (node:internal/timers:491:21)\n\u001b[0m\n\u001b[0m  116) ContextManager\n       edge cases\n         should handle empty entries:\n\u001b[0m\u001b[31m     AssertionError: expected '' to include ' ->  '\u001b[0m\u001b[90m\n      at Context.<anonymous> (tests/unit/services/translation/utils/context-manager.test.js:262:32)\n      at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n\u001b[0m\n\u001b[0m  117) ContextManager\n       edge cases\n         should handle entries without timestamps:\n\u001b[0m\u001b[31m     TypeError: Cannot read properties of undefined (reading 'get')\u001b[0m\u001b[90m\n      at Context.<anonymous> (tests/unit/services/translation/utils/context-manager.test.js:275:65)\n      at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n\u001b[0m\n\u001b[0m  118) ContextManager\n       edge cases\n         should handle special characters in context:\n\u001b[0m\u001b[31m     AssertionError: expected '' to include 'Special: !@#$%^&*()_+{}[]|\\:;\"\\'<>,.?…'\u001b[0m\u001b[90m\n      at Context.<anonymous> (tests/unit/services/translation/utils/context-manager.test.js:289:32)\n      at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n\u001b[0m\n\u001b[0m  119) LanguagePairOptimizer\n       initialization\n         should initialize language pairs from config:\n\u001b[0m\u001b[31m     AssertionError: expected undefined to be an instance of Map\u001b[0m\u001b[90m\n      at Context.<anonymous> (tests/unit/services/translation/utils/language-pair-optimizer.test.js:37:51)\n      at process.processImmediate (node:internal/timers:491:21)\n\u001b[0m\n\u001b[0m  120) LanguagePairOptimizer\n       initialization\n         should load language sets from config:\n\u001b[0m\u001b[31m     AssertionError: expected undefined to be an instance of Set\u001b[0m\u001b[90m\n      at Context.<anonymous> (tests/unit/services/translation/utils/language-pair-optimizer.test.js:42:55)\n      at process.processImmediate (node:internal/timers:491:21)\n\u001b[0m\n\u001b[0m  121) LanguagePairOptimizer\n       initialization\n         should load default ranking from config:\n\u001b[0m\u001b[31m     AssertionError: expected undefined to be an object\u001b[0m\u001b[90m\n      at Context.<anonymous> (tests/unit/services/translation/utils/language-pair-optimizer.test.js:55:52)\n      at process.processImmediate (node:internal/timers:491:21)\n\u001b[0m\n\u001b[0m  122) LanguagePairOptimizer\n       getBestServiceForLanguagePair\n         should select based on language pair config:\n\u001b[0m\u001b[31m     TypeError: Cannot read properties of undefined (reading 'general')\u001b[0m\u001b[90m\n      at LanguagePairOptimizer.getBestServiceForLanguagePair (src/services/translation/utils/language-pair-optimizer.js:112:57)\n      at Context.<anonymous> (tests/unit/services/translation/utils/language-pair-optimizer.test.js:64:39)\n      at process.processImmediate (node:internal/timers:491:21)\n\u001b[0m\n\u001b[0m  123) LanguagePairOptimizer\n       getBestServiceForLanguagePair\n         should prioritize based on quality score:\n\u001b[0m\u001b[31m     TypeError: Cannot read properties of undefined (reading 'set')\u001b[0m\u001b[90m\n      at Context.<anonymous> (tests/unit/services/translation/utils/language-pair-optimizer.test.js:80:37)\n      at process.processImmediate (node:internal/timers:491:21)\n\u001b[0m\n\u001b[0m  124) LanguagePairOptimizer\n       getBestServiceForLanguagePair\n         should prioritize based on speed:\n\u001b[0m\u001b[31m     TypeError: Cannot read properties of undefined (reading 'set')\u001b[0m\u001b[90m\n      at Context.<anonymous> (tests/unit/services/translation/utils/language-pair-optimizer.test.js:107:37)\n      at process.processImmediate (node:internal/timers:491:21)\n\u001b[0m\n\u001b[0m  125) LanguagePairOptimizer\n       getBestServiceForLanguagePair\n         should respect service health status:\n\u001b[0m\u001b[31m     TypeError: Cannot read properties of undefined (reading 'set')\u001b[0m\u001b[90m\n      at Context.<anonymous> (tests/unit/services/translation/utils/language-pair-optimizer.test.js:134:37)\n      at process.processImmediate (node:internal/timers:491:21)\n\u001b[0m\n\u001b[0m  126) LanguagePairOptimizer\n       getBestServiceForLanguagePair\n         should handle unconfigured language pairs:\n\u001b[0m\u001b[31m     TypeError: Cannot read properties of undefined (reading 'general')\u001b[0m\u001b[90m\n      at LanguagePairOptimizer.getBestServiceForLanguagePair (src/services/translation/utils/language-pair-optimizer.js:112:57)\n      at Context.<anonymous> (tests/unit/services/translation/utils/language-pair-optimizer.test.js:161:39)\n      at process.processImmediate (node:internal/timers:491:21)\n\u001b[0m\n\u001b[0m  127) LanguagePairOptimizer\n       getBestServiceForLanguagePair\n         should prefer DeepL for European languages:\n\u001b[0m\u001b[31m     TypeError: Cannot read properties of undefined (reading 'general')\u001b[0m\u001b[90m\n      at LanguagePairOptimizer.getBestServiceForLanguagePair (src/services/translation/utils/language-pair-optimizer.js:112:57)\n      at Context.<anonymous> (tests/unit/services/translation/utils/language-pair-optimizer.test.js:177:39)\n      at process.processImmediate (node:internal/timers:491:21)\n\u001b[0m\n\u001b[0m  128) LanguagePairOptimizer\n       getBestServiceForLanguagePair\n         should prefer GPT-4o for Asian languages:\n\u001b[0m\u001b[31m     TypeError: Cannot read properties of undefined (reading 'general')\u001b[0m\u001b[90m\n      at LanguagePairOptimizer.getBestServiceForLanguagePair (src/services/translation/utils/language-pair-optimizer.js:112:57)\n      at Context.<anonymous> (tests/unit/services/translation/utils/language-pair-optimizer.test.js:193:39)\n      at process.processImmediate (node:internal/timers:491:21)\n\u001b[0m\n\u001b[0m  129) LanguagePairOptimizer\n       getBestServiceForLanguagePair\n         should respect user preference:\n\u001b[0m\u001b[31m     TypeError: Cannot read properties of undefined (reading 'google')\u001b[0m\u001b[90m\n      at LanguagePairOptimizer.isServiceSupportingLanguagePair (src/services/translation/utils/language-pair-optimizer.js:208:74)\n      at LanguagePairOptimizer.getBestServiceForLanguagePair (src/services/translation/utils/language-pair-optimizer.js:72:36)\n      at Context.<anonymous> (tests/unit/services/translation/utils/language-pair-optimizer.test.js:209:39)\n      at process.processImmediate (node:internal/timers:491:21)\n\u001b[0m\n\u001b[0m  130) LanguagePairOptimizer\n       getBestServiceForLanguagePair\n         should ignore unhealthy user preference:\n\u001b[0m\u001b[31m     TypeError: Cannot read properties of undefined (reading 'google')\u001b[0m\u001b[90m\n      at LanguagePairOptimizer.isServiceSupportingLanguagePair (src/services/translation/utils/language-pair-optimizer.js:208:74)\n      at LanguagePairOptimizer.getBestServiceForLanguagePair (src/services/translation/utils/language-pair-optimizer.js:72:36)\n      at Context.<anonymous> (tests/unit/services/translation/utils/language-pair-optimizer.test.js:226:39)\n      at process.processImmediate (node:internal/timers:491:21)\n\u001b[0m\n\u001b[0m  131) LanguagePairOptimizer\n       getBestServiceForLanguagePair\n         should prioritize context-aware services when context is required:\n\u001b[0m\u001b[31m     TypeError: Cannot read properties of undefined (reading 'gpt4o')\u001b[0m\u001b[90m\n      at LanguagePairOptimizer.isServiceSupportingLanguagePair (src/services/translation/utils/language-pair-optimizer.js:208:74)\n      at LanguagePairOptimizer.getBestServiceForLanguagePair (src/services/translation/utils/language-pair-optimizer.js:80:22)\n      at Context.<anonymous> (tests/unit/services/translation/utils/language-pair-optimizer.test.js:242:39)\n      at process.processImmediate (node:internal/timers:491:21)\n\u001b[0m\n\u001b[0m  132) LanguagePairOptimizer\n       getBestServiceForLanguagePair\n         should return a healthy service when all preferred services are unhealthy:\n\u001b[0m\u001b[31m     TypeError: Cannot read properties of undefined (reading 'general')\u001b[0m\u001b[90m\n      at LanguagePairOptimizer.getBestServiceForLanguagePair (src/services/translation/utils/language-pair-optimizer.js:112:57)\n      at Context.<anonymous> (tests/unit/services/translation/utils/language-pair-optimizer.test.js:259:39)\n      at process.processImmediate (node:internal/timers:491:21)\n\u001b[0m\n\u001b[0m  133) LanguagePairOptimizer\n       updateQualityScore\n         should update quality score with smoothing:\n\u001b[0m\u001b[31m     TypeError: Cannot read properties of undefined (reading 'set')\u001b[0m\u001b[90m\n      at Context.<anonymous> (tests/unit/services/translation/utils/language-pair-optimizer.test.js:277:37)\n      at process.processImmediate (node:internal/timers:491:21)\n\u001b[0m\n\u001b[0m  134) LanguagePairOptimizer\n       edge cases\n         should handle all services being unhealthy:\n\u001b[0m\u001b[31m     TypeError: Cannot read properties of undefined (reading 'general')\u001b[0m\u001b[90m\n      at LanguagePairOptimizer.getBestServiceForLanguagePair (src/services/translation/utils/language-pair-optimizer.js:112:57)\n      at Context.<anonymous> (tests/unit/services/translation/utils/language-pair-optimizer.test.js:308:39)\n      at process.processImmediate (node:internal/timers:491:21)\n\u001b[0m\n\u001b[0m  135) LanguagePairOptimizer\n       edge cases\n         should handle empty serviceHealth object:\n\u001b[0m\u001b[31m     TypeError: Cannot read properties of undefined (reading 'general')\u001b[0m\u001b[90m\n      at LanguagePairOptimizer.getBestServiceForLanguagePair (src/services/translation/utils/language-pair-optimizer.js:112:57)\n      at Context.<anonymous> (tests/unit/services/translation/utils/language-pair-optimizer.test.js:323:39)\n      at process.processImmediate (node:internal/timers:491:21)\n\u001b[0m\n\u001b[0m  136) LanguagePairOptimizer\n       edge cases\n         should handle missing options:\n\u001b[0m\u001b[31m     TypeError: Cannot read properties of undefined (reading 'general')\u001b[0m\u001b[90m\n      at LanguagePairOptimizer.getBestServiceForLanguagePair (src/services/translation/utils/language-pair-optimizer.js:112:57)\n      at Context.<anonymous> (tests/unit/services/translation/utils/language-pair-optimizer.test.js:333:39)\n      at process.processImmediate (node:internal/timers:491:21)\n\u001b[0m\n\u001b[0m  137) TranslationCache\n       initialization\n         should initialize with default settings:\n\u001b[0m\u001b[31m     TypeError: Cannot read properties of undefined (reading 'maxCacheSize')\u001b[0m\u001b[90m\n      at Context.<anonymous> (tests/unit/services/translation/utils/translation-cache.test.js:28:40)\n      at process.processImmediate (node:internal/timers:491:21)\n\u001b[0m\n\u001b[0m  138) TranslationCache\n       initialization\n         should initialize with custom settings:\n\u001b[0m\u001b[31m     TypeError: Cannot read properties of undefined (reading 'maxCacheSize')\u001b[0m\u001b[90m\n      at Context.<anonymous> (tests/unit/services/translation/utils/translation-cache.test.js:33:33)\n      at process.processImmediate (node:internal/timers:491:21)\n\u001b[0m\n\u001b[0m  139) TranslationCache\n       initialization\n         should initialize stats with zero values:\n\u001b[0m\u001b[31m     AssertionError: expected undefined to equal +0\u001b[0m\u001b[90m\n      at Context.<anonymous> (tests/unit/services/translation/utils/translation-cache.test.js:40:50)\n      at process.processImmediate (node:internal/timers:491:21)\n\u001b[0m\n\u001b[0m  140) TranslationCache\n       set and get\n         should store and retrieve translations:\n\n      \u001b[31mAssertionError: expected { translation: 'Hola mundo', …(2) } to deeply equal { translation: 'Hola mundo', …(1) }\u001b[0m\n      \u001b[32m+ expected\u001b[0m \u001b[31m- actual\u001b[0m\n\n       {\n      \u001b[31m-  \"cachedAt\": 1751670767134\u001b[0m\n         \"confidence\": 0.95\n         \"translation\": \"Hola mundo\"\n       }\n      \u001b[0m\u001b[90m\n      at Context.<anonymous> (tests/unit/services/translation/utils/translation-cache.test.js:84:36)\n\u001b[0m\n\u001b[0m  141) TranslationCache\n       set and get\n         should also store service-agnostic entries:\n\u001b[0m\u001b[31m     AssertionError: expected null to deeply equal { translation: 'Hola mundo', …(1) }\u001b[0m\u001b[90m\n      at Context.<anonymous> (tests/unit/services/translation/utils/translation-cache.test.js:101:36)\n\u001b[0m\n\u001b[0m  142) TranslationCache\n       set and get\n         should update stats when retrieving entries:\n\u001b[0m\u001b[31m     AssertionError: expected undefined to equal 1\u001b[0m\u001b[90m\n      at Context.<anonymous> (tests/unit/services/translation/utils/translation-cache.test.js:112:50)\n\u001b[0m\n\u001b[0m  143) TranslationCache\n       set and get\n         should respect expiry times:\n\u001b[0m\u001b[31m     AssertionError: expected { translation: 'Hola', …(1) } to be null\u001b[0m\u001b[90m\n      at Context.<anonymous> (tests/unit/services/translation/utils/translation-cache.test.js:135:33)\n\u001b[0m\n\u001b[0m  144) TranslationCache\n       pruneCache\n         should remove expired entries:\n\u001b[0m\u001b[31m     TypeError: cache.pruneCache is not a function\u001b[0m\u001b[90m\n      at Context.<anonymous> (tests/unit/services/translation/utils/translation-cache.test.js:150:19)\n\u001b[0m\n\u001b[0m  145) TranslationCache\n       pruneCache\n         should respect maxCacheSize:\n\u001b[0m\u001b[31m     AssertionError: expected undefined to be a number or a date\u001b[0m\u001b[90m\n      at Context.<anonymous> (tests/unit/services/translation/utils/translation-cache.test.js:168:47)\n\u001b[0m\n\u001b[0m  146) TranslationCache\n       getStats\n         should return accurate statistics:\n\u001b[0m\u001b[31m     AssertionError: expected undefined to equal 4\u001b[0m\u001b[90m\n      at Context.<anonymous> (tests/unit/services/translation/utils/translation-cache.test.js:188:44)\n\u001b[0m\n\u001b[0m  147) TranslationCache\n       clear\n         should remove all entries:\n\u001b[0m\u001b[31m     TypeError: cache.clear is not a function\u001b[0m\u001b[90m\n      at Context.<anonymous> (tests/unit/services/translation/utils/translation-cache.test.js:205:25)\n\u001b[0m\n\u001b[0m  148) TranslationCache\n       edge cases\n         should handle empty text:\n\n      \u001b[31mAssertionError: expected { translation: '', …(1) } to deeply equal { translation: '' }\u001b[0m\n      \u001b[32m+ expected\u001b[0m \u001b[31m- actual\u001b[0m\n\n       {\n      \u001b[31m-  \"cachedAt\": 1751670767167\u001b[0m\n         \"translation\": \"\"\n       }\n      \u001b[0m\u001b[90m\n      at Context.<anonymous> (tests/unit/services/translation/utils/translation-cache.test.js:218:36)\n\u001b[0m\n\u001b[0m  149) TranslationCache\n       edge cases\n         should handle special characters:\n\n      \u001b[31mAssertionError: expected { …(2) } to deeply equal { Object (translation) }\u001b[0m\n      \u001b[32m+ expected\u001b[0m \u001b[31m- actual\u001b[0m\n\n       {\n      \u001b[31m-  \"cachedAt\": 1751670767168\u001b[0m\n         \"translation\": \"Translated special chars\"\n       }\n      \u001b[0m\u001b[90m\n      at Context.<anonymous> (tests/unit/services/translation/utils/translation-cache.test.js:227:36)\n\u001b[0m\n\u001b[0m  150) TranslationCache\n       edge cases\n         should handle very long text:\n\n      \u001b[31mAssertionError: expected { …(2) } to deeply equal { Object (translation) }\u001b[0m\n      \u001b[32m+ expected\u001b[0m \u001b[31m- actual\u001b[0m\n\n       {\n      \u001b[31m-  \"cachedAt\": 1751670767171\u001b[0m\n         \"translation\": \"Long text translation\"\n       }\n      \u001b[0m\u001b[90m\n      at Context.<anonymous> (tests/unit/services/translation/utils/translation-cache.test.js:237:36)\n\u001b[0m\n\n\n[mochawesome] Report JSON saved to /Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/mochawesome-report/mochawesome.json\n\n[mochawesome] Report HTML saved to /Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/mochawesome-report/mochawesome.html\n\n",
      "stderr": "Azure translation error: The request is not authorized because credentials are missing or invalid.\nAzure Translator initialization failed: Error: Azure Translator connection test failed: Azure Translator error: The request is not authorized because credentials are missing or invalid.\n    at AzureTranslator.testConnection (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/src/services/translation/azure-translator.js:79:19)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async AzureTranslator.initialize (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/src/services/translation/azure-translator.js:51:13)\n    at async Context.<anonymous> (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/tests/api/azure-api.test.js:84:13)\nAzure translation error: Connection refused\nAzure Translator initialization failed: Error: Azure Translator connection test failed: Azure Translator error: Connection refused\n    at AzureTranslator.testConnection (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/src/services/translation/azure-translator.js:79:19)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async AzureTranslator.initialize (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/src/services/translation/azure-translator.js:51:13)\n    at async Context.<anonymous> (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/tests/api/azure-api.test.js:106:13)\nAzure translation error: Nock: No match for request {\n  \"method\": \"POST\",\n  \"url\": \"https://api.cognitive.microsofttranslator.com/translate?api-version=3.0&to=es&category=general&profanityAction=NoAction&includeAlignment=false&includeSentenceLength=false&textType=plain&from=en\",\n  \"headers\": {\n    \"accept\": \"application/json, text/plain, */*\",\n    \"content-type\": \"application/json\",\n    \"ocp-apim-subscription-key\": \"test-api-key\",\n    \"ocp-apim-subscription-region\": \"eastus\",\n    \"x-clienttraceid\": \"0bc08047-8852-4f8e-a2d1-8760f4c392d8\",\n    \"user-agent\": \"axios/1.10.0\",\n    \"content-length\": \"18\",\n    \"accept-encoding\": \"gzip, compress, deflate, br\"\n  },\n  \"body\": \"[{\\\"text\\\":\\\"Hello\\\"}]\"\n}\nAzure Translator initialization failed: Error: Azure Translator connection test failed: Azure Translator error: Nock: No match for request {\n  \"method\": \"POST\",\n  \"url\": \"https://api.cognitive.microsofttranslator.com/translate?api-version=3.0&to=es&category=general&profanityAction=NoAction&includeAlignment=false&includeSentenceLength=false&textType=plain&from=en\",\n  \"headers\": {\n    \"accept\": \"application/json, text/plain, */*\",\n    \"content-type\": \"application/json\",\n    \"ocp-apim-subscription-key\": \"test-api-key\",\n    \"ocp-apim-subscription-region\": \"eastus\",\n    \"x-clienttraceid\": \"0bc08047-8852-4f8e-a2d1-8760f4c392d8\",\n    \"user-agent\": \"axios/1.10.0\",\n    \"content-length\": \"18\",\n    \"accept-encoding\": \"gzip, compress, deflate, br\"\n  },\n  \"body\": \"[{\\\"text\\\":\\\"Hello\\\"}]\"\n}\n    at AzureTranslator.testConnection (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/src/services/translation/azure-translator.js:79:19)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async AzureTranslator.initialize (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/src/services/translation/azure-translator.js:51:13)\n    at async Context.<anonymous> (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/tests/api/azure-api.test.js:137:13)\nFailed to load Azure Translator languages: AxiosError: Nock: No match for request {\n  \"method\": \"GET\",\n  \"url\": \"https://api.cognitive.microsofttranslator.com/languages?api-version=3.0&scope=translation\",\n  \"headers\": {\n    \"accept\": \"application/json, text/plain, */*\",\n    \"content-type\": \"application/json\",\n    \"user-agent\": \"axios/1.10.0\",\n    \"accept-encoding\": \"gzip, compress, deflate, br\"\n  }\n}\n    at AxiosError.from (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/axios/dist/node/axios.cjs:863:14)\n    at RedirectableRequest.handleRequestError (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/axios/dist/node/axios.cjs:3191:25)\n    at RedirectableRequest.emit (node:events:530:35)\n    at eventHandlers.<computed> (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/follow-redirects/index.js:49:24)\n    at OverriddenClientRequest.emit (node:events:518:28)\n    at Socket.<anonymous> (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/propagate/index.js:64:17)\n    at Socket.emit (node:events:518:28)\n    at /Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/nock/lib/socket.js:101:14\n    at process.processTicksAndRejections (node:internal/process/task_queues:85:11)\n    at Axios.request (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/axios/dist/node/axios.cjs:4280:41)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async AzureTranslator.loadSupportedLanguages (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/src/services/translation/azure-translator.js:90:30)\n    at async AzureTranslator.initialize (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/src/services/translation/azure-translator.js:52:13)\n    at async Context.<anonymous> (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/tests/api/azure-api.test.js:205:13) {\n  statusCode: 404,\n  status: 404,\n  code: 'ERR_NOCK_NO_MATCH',\n  config: {\n    transitional: {\n      silentJSONParsing: true,\n      forcedJSONParsing: true,\n      clarifyTimeoutError: false\n    },\n    adapter: [ 'xhr', 'http', 'fetch' ],\n    transformRequest: [ [Function: transformRequest] ],\n    transformResponse: [ [Function: transformResponse] ],\n    timeout: 10000,\n    xsrfCookieName: 'XSRF-TOKEN',\n    xsrfHeaderName: 'X-XSRF-TOKEN',\n    maxContentLength: -1,\n    maxBodyLength: -1,\n    env: { FormData: [Function [FormData]], Blob: [class Blob] },\n    validateStatus: [Function: validateStatus],\n    headers: Object [AxiosHeaders] {\n      Accept: 'application/json, text/plain, */*',\n      'Content-Type': 'application/json',\n      'User-Agent': 'axios/1.10.0',\n      'Accept-Encoding': 'gzip, compress, deflate, br'\n    },\n    method: 'get',\n    url: 'https://api.cognitive.microsofttranslator.com/languages?api-version=3.0&scope=translation',\n    allowAbsoluteUrls: true,\n    data: undefined\n  },\n  request: <ref *2> Writable {\n    _events: {\n      close: undefined,\n      error: [Function: handleRequestError],\n      prefinish: undefined,\n      finish: undefined,\n      drain: undefined,\n      response: [Function: handleResponse],\n      socket: [Array],\n      timeout: undefined,\n      abort: undefined\n    },\n    _writableState: WritableState {\n      highWaterMark: 65536,\n      length: 0,\n      corked: 0,\n      onwrite: [Function: bound onwrite],\n      writelen: 0,\n      bufferedIndex: 0,\n      pendingcb: 0,\n      [Symbol(kState)]: 17580812,\n      [Symbol(kBufferedValue)]: null\n    },\n    _maxListeners: undefined,\n    _options: {\n      maxRedirects: 21,\n      maxBodyLength: Infinity,\n      protocol: 'https:',\n      path: '/languages?api-version=3.0&scope=translation',\n      method: 'GET',\n      headers: [Object: null prototype],\n      agents: [Object],\n      auth: undefined,\n      family: undefined,\n      beforeRedirect: [Function: dispatchBeforeRedirect],\n      beforeRedirects: [Object],\n      hostname: 'api.cognitive.microsofttranslator.com',\n      port: '',\n      agent: undefined,\n      nativeProtocols: [Object],\n      pathname: '/languages',\n      search: '?api-version=3.0&scope=translation'\n    },\n    _ended: true,\n    _ending: true,\n    _redirectCount: 0,\n    _redirects: [],\n    _requestBodyLength: 0,\n    _requestBodyBuffers: [],\n    _eventsCount: 3,\n    _onNativeResponse: [Function (anonymous)],\n    _currentRequest: <ref *1> OverriddenClientRequest {\n      _events: [Object: null prototype],\n      _eventsCount: 7,\n      _maxListeners: undefined,\n      outputData: [],\n      outputSize: 0,\n      writable: true,\n      destroyed: true,\n      _last: false,\n      chunkedEncoding: false,\n      shouldKeepAlive: true,\n      maxRequestsOnConnectionReached: false,\n      _defaultKeepAlive: true,\n      useChunkedEncodingByDefault: true,\n      sendDate: false,\n      _removedConnection: false,\n      _removedContLen: false,\n      _removedTE: false,\n      strictContentLength: false,\n      _contentLength: null,\n      _hasBody: true,\n      _trailer: '',\n      finished: true,\n      _headerSent: false,\n      _closed: false,\n      _header: null,\n      _keepAliveTimeout: 0,\n      _onPendingData: [Function: nop],\n      path: '/languages?api-version=3.0&scope=translation',\n      method: 'GET',\n      write: [Function (anonymous)],\n      end: [Function (anonymous)],\n      flushHeaders: [Function (anonymous)],\n      req: [Circular *1],\n      options: [Object],\n      interceptors: [],\n      response: [IncomingMessage],\n      requestBodyBuffers: [],\n      playbackStarted: false,\n      readyToStartPlaybackOnSocketEvent: false,\n      _redirectable: [Circular *2],\n      [Symbol(shapeMode)]: false,\n      [Symbol(kCapture)]: false,\n      [Symbol(kBytesWritten)]: 0,\n      [Symbol(kNeedDrain)]: false,\n      [Symbol(corked)]: 0,\n      [Symbol(kChunkedBuffer)]: [],\n      [Symbol(kChunkedLength)]: 0,\n      [Symbol(kSocket)]: [Socket],\n      [Symbol(kOutHeaders)]: [Object: null prototype],\n      [Symbol(errored)]: null,\n      [Symbol(kHighWaterMark)]: 65536,\n      [Symbol(kRejectNonStandardBodyWrites)]: false,\n      [Symbol(kError)]: [Error]\n    },\n    _currentUrl: 'https://api.cognitive.microsofttranslator.com/languages?api-version=3.0&scope=translation',\n    _timeout: null,\n    [Symbol(shapeMode)]: true,\n    [Symbol(kCapture)]: false\n  },\n  cause: Error: Nock: No match for request {\n    \"method\": \"GET\",\n    \"url\": \"https://api.cognitive.microsofttranslator.com/languages?api-version=3.0&scope=translation\",\n    \"headers\": {\n      \"accept\": \"application/json, text/plain, */*\",\n      \"content-type\": \"application/json\",\n      \"user-agent\": \"axios/1.10.0\",\n      \"accept-encoding\": \"gzip, compress, deflate, br\"\n    }\n  }\n      at InterceptedRequestRouter.startPlayback (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/nock/lib/intercepted_request_router.js:346:21)\n      at InterceptedRequestRouter.maybeStartPlayback (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/nock/lib/intercepted_request_router.js:268:12)\n      at InterceptedRequestRouter.connectSocket (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/nock/lib/intercepted_request_router.js:140:12)\n      at /Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/nock/lib/intercepted_request_router.js:78:33\n      at process.processTicksAndRejections (node:internal/process/task_queues:85:11) {\n    code: 'ERR_NOCK_NO_MATCH',\n    status: 404,\n    statusCode: 404\n  }\n}\nAzure translation error: Nock: No match for request {\n  \"method\": \"POST\",\n  \"url\": \"https://api.cognitive.microsofttranslator.com/translate?api-version=3.0&to=es&category=general&profanityAction=NoAction&includeAlignment=false&includeSentenceLength=false&textType=plain&from=en\",\n  \"headers\": {\n    \"accept\": \"application/json, text/plain, */*\",\n    \"content-type\": \"application/json\",\n    \"ocp-apim-subscription-key\": \"test-api-key\",\n    \"ocp-apim-subscription-region\": \"eastus\",\n    \"x-clienttraceid\": \"126db50b-b966-4060-aa56-c38c44fb6248\",\n    \"user-agent\": \"axios/1.10.0\",\n    \"content-length\": \"18\",\n    \"accept-encoding\": \"gzip, compress, deflate, br\"\n  },\n  \"body\": \"[{\\\"text\\\":\\\"Hello\\\"}]\"\n}\nAzure Translator translation failed: Error: Azure Translator error: Nock: No match for request {\n  \"method\": \"POST\",\n  \"url\": \"https://api.cognitive.microsofttranslator.com/translate?api-version=3.0&to=es&category=general&profanityAction=NoAction&includeAlignment=false&includeSentenceLength=false&textType=plain&from=en\",\n  \"headers\": {\n    \"accept\": \"application/json, text/plain, */*\",\n    \"content-type\": \"application/json\",\n    \"ocp-apim-subscription-key\": \"test-api-key\",\n    \"ocp-apim-subscription-region\": \"eastus\",\n    \"x-clienttraceid\": \"126db50b-b966-4060-aa56-c38c44fb6248\",\n    \"user-agent\": \"axios/1.10.0\",\n    \"content-length\": \"18\",\n    \"accept-encoding\": \"gzip, compress, deflate, br\"\n  },\n  \"body\": \"[{\\\"text\\\":\\\"Hello\\\"}]\"\n}\n    at AzureTranslator.translateText (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/src/services/translation/azure-translator.js:223:19)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async AzureTranslator.translate (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/src/services/translation/azure-translator.js:129:20)\n    at async Context.<anonymous> (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/tests/api/azure-api.test.js:208:13)\nTranslation Manager initialization failed: TypeError: this.languagePairOptimizer.initialize is not a function\n    at TranslationManager.initialize (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/src/services/translation/translation-manager.js:79:46)\n    at async Context.<anonymous> (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/tests/integration/complete-pipeline.test.js:61:13)\nTranslation Manager initialization failed: TypeError: this.languagePairOptimizer.initialize is not a function\n    at TranslationManager.initialize (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/src/services/translation/translation-manager.js:79:46)\n    at async Context.<anonymous> (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/tests/integration/complete-pipeline.test.js:178:13)\nTranslation Manager initialization failed: TypeError: this.languagePairOptimizer.initialize is not a function\n    at TranslationManager.initialize (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/src/services/translation/translation-manager.js:79:46)\n    at async Context.<anonymous> (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/tests/integration/stt-translation.test.js:38:13)\nTranslation Manager initialization failed: TypeError: this.languagePairOptimizer.initialize is not a function\n    at TranslationManager.initialize (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/src/services/translation/translation-manager.js:79:46)\n    at async Context.<anonymous> (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/tests/integration/stt-translation.test.js:98:13)\nTranslation Manager initialization failed: TypeError: this.languagePairOptimizer.initialize is not a function\n    at TranslationManager.initialize (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/src/services/translation/translation-manager.js:79:46)\n    at async Context.<anonymous> (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/tests/integration/stt-translation.test.js:112:13)\nTranslation Manager initialization failed: TypeError: this.languagePairOptimizer.initialize is not a function\n    at TranslationManager.initialize (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/src/services/translation/translation-manager.js:79:46)\n    at async Context.<anonymous> (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/tests/integration/stt-translation.test.js:147:13)\nTranslation Manager initialization failed: TypeError: this.languagePairOptimizer.initialize is not a function\n    at TranslationManager.initialize (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/src/services/translation/translation-manager.js:79:46)\n    at async Context.<anonymous> (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/tests/performance/translation-performance.test.js:52:9)\nTranslation Manager initialization failed: TypeError: this.languagePairOptimizer.initialize is not a function\n    at TranslationManager.initialize (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/src/services/translation/translation-manager.js:79:46)\n    at async Context.<anonymous> (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/tests/performance/translation-performance.test.js:331:9)\nFailed to load API keys: \"undefined\" is not valid JSON\nFailed to load API keys: \"undefined\" is not valid JSON\nFailed to load API keys: \"undefined\" is not valid JSON\nFailed to load API keys: \"undefined\" is not valid JSON\nFailed to load API keys: \"undefined\" is not valid JSON\nFailed to load API keys: \"undefined\" is not valid JSON\nFailed to load API keys: \"undefined\" is not valid JSON\nFailed to load API keys: \"undefined\" is not valid JSON\nFailed to load API keys: \"undefined\" is not valid JSON\nFailed to load API keys: \"undefined\" is not valid JSON\nTranslation Manager initialization failed: TypeError: this.languagePairOptimizer.initialize is not a function\n    at TranslationManager.initialize (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/src/services/translation/translation-manager.js:79:46)\n    at async Context.<anonymous> (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/tests/unit/services/error-handling/translation-error-handling.test.js:22:9)\nError configuring audio routing for Discord: Error: Config error\n    at Context.<anonymous> (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/tests/unit/services/platform-detector.test.js:139:61)\n    at callFn (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/mocha/lib/runnable.js:364:21)\n    at Runnable.run (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/mocha/lib/runnable.js:352:5)\n    at Runner.runTest (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/mocha/lib/runner.js:677:10)\n    at /Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/mocha/lib/runner.js:800:12\n    at next (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/mocha/lib/runner.js:592:14)\n    at /Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/mocha/lib/runner.js:602:7\n    at next (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/mocha/lib/runner.js:485:14)\n    at Immediate._onImmediate (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/mocha/lib/runner.js:570:5)\n    at process.processImmediate (node:internal/timers:491:21)\nError applying Windows audio routing: Error: Command failed: powershell -Command \"Set-AudioDevice -ID 'CABLE Input'\"\n/bin/sh: powershell: command not found\n\n    at genericNodeError (node:internal/errors:983:15)\n    at wrappedFn (node:internal/errors:537:14)\n    at ChildProcess.exithandler (node:child_process:414:12)\n    at ChildProcess.emit (node:events:518:28)\n    at maybeClose (node:internal/child_process:1101:16)\n    at ChildProcess._handle.onexit (node:internal/child_process:304:5) {\n  code: 127,\n  killed: false,\n  signal: null,\n  cmd: `powershell -Command \"Set-AudioDevice -ID 'CABLE Input'\"`,\n  stdout: '',\n  stderr: '/bin/sh: powershell: command not found\\n'\n}\nError applying Windows audio routing: Error: Command failed: powershell -Command \"Set-AudioDevice -ID 'CABLE Input'\"\n/bin/sh: powershell: command not found\n\n    at genericNodeError (node:internal/errors:983:15)\n    at wrappedFn (node:internal/errors:537:14)\n    at ChildProcess.exithandler (node:child_process:414:12)\n    at ChildProcess.emit (node:events:518:28)\n    at maybeClose (node:internal/child_process:1101:16)\n    at Socket.<anonymous> (node:internal/child_process:456:11)\n    at Socket.emit (node:events:518:28)\n    at Pipe.<anonymous> (node:net:351:12) {\n  code: 127,\n  killed: false,\n  signal: null,\n  cmd: `powershell -Command \"Set-AudioDevice -ID 'CABLE Input'\"`,\n  stdout: '',\n  stderr: '/bin/sh: powershell: command not found\\n'\n}\nError applying Linux audio routing: Error: Command failed: pactl set-default-sink \"CABLE Output\"\n/bin/sh: pactl: command not found\n\n    at genericNodeError (node:internal/errors:983:15)\n    at wrappedFn (node:internal/errors:537:14)\n    at ChildProcess.exithandler (node:child_process:414:12)\n    at ChildProcess.emit (node:events:518:28)\n    at maybeClose (node:internal/child_process:1101:16)\n    at Socket.<anonymous> (node:internal/child_process:456:11)\n    at Socket.emit (node:events:518:28)\n    at Pipe.<anonymous> (node:net:351:12) {\n  code: 127,\n  killed: false,\n  signal: null,\n  cmd: 'pactl set-default-sink \"CABLE Output\"',\n  stdout: '',\n  stderr: '/bin/sh: pactl: command not found\\n'\n}\nError applying Linux audio routing: Error: Command failed: pactl set-default-sink \"CABLE Output\"\n/bin/sh: pactl: command not found\n\n    at genericNodeError (node:internal/errors:983:15)\n    at wrappedFn (node:internal/errors:537:14)\n    at ChildProcess.exithandler (node:child_process:414:12)\n    at ChildProcess.emit (node:events:518:28)\n    at maybeClose (node:internal/child_process:1101:16)\n    at Socket.<anonymous> (node:internal/child_process:456:11)\n    at Socket.emit (node:events:518:28)\n    at Pipe.<anonymous> (node:net:351:12) {\n  code: 127,\n  killed: false,\n  signal: null,\n  cmd: 'pactl set-default-sink \"CABLE Output\"',\n  stdout: '',\n  stderr: '/bin/sh: pactl: command not found\\n'\n}\n(node:33278) [DEP0174] DeprecationWarning: Calling promisify on a function that returns a Promise is likely a mistake.\n(Use `node --trace-deprecation ...` to show where the warning was created)\n(node:33278) [DEP0174] DeprecationWarning: Calling promisify on a function that returns a Promise is likely a mistake.\n(node:33278) [DEP0174] DeprecationWarning: Calling promisify on a function that returns a Promise is likely a mistake.\n(node:33278) [DEP0174] DeprecationWarning: Calling promisify on a function that returns a Promise is likely a mistake.\n(node:33278) [DEP0174] DeprecationWarning: Calling promisify on a function that returns a Promise is likely a mistake.\n(node:33278) [DEP0174] DeprecationWarning: Calling promisify on a function that returns a Promise is likely a mistake.\n(node:33278) [DEP0174] DeprecationWarning: Calling promisify on a function that returns a Promise is likely a mistake.\nAzure translation error: Cannot read properties of undefined (reading 'data')\nAzure Translator initialization failed: Error: Azure Translator connection test failed: Azure Translator error: Cannot read properties of undefined (reading 'data')\n    at AzureTranslator.testConnection (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/src/services/translation/azure-translator.js:79:19)\n    at async AzureTranslator.initialize (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/src/services/translation/azure-translator.js:51:13)\n    at async Context.<anonymous> (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/tests/unit/services/translation/azure-translator.test.js:41:28)\nAzure Translator initialization failed: Error: Azure Translator API key not found\n    at AzureTranslator.initialize (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/src/services/translation/azure-translator.js:47:23)\n    at Context.<anonymous> (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/tests/unit/services/translation/azure-translator.test.js:57:34)\n    at callFn (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/mocha/lib/runnable.js:364:21)\n    at Runnable.run (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/mocha/lib/runnable.js:352:5)\n    at Runner.runTest (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/mocha/lib/runner.js:677:10)\n    at /Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/mocha/lib/runner.js:800:12\n    at next (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/mocha/lib/runner.js:592:14)\n    at /Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/mocha/lib/runner.js:602:7\n    at next (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/mocha/lib/runner.js:485:14)\n    at Immediate._onImmediate (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/mocha/lib/runner.js:570:5)\n    at process.processImmediate (node:internal/timers:491:21)\nAzure translation error: Cannot read properties of undefined (reading 'data')\nAzure Translator initialization failed: Error: Azure Translator connection test failed: Azure Translator error: Cannot read properties of undefined (reading 'data')\n    at AzureTranslator.testConnection (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/src/services/translation/azure-translator.js:79:19)\n    at async AzureTranslator.initialize (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/src/services/translation/azure-translator.js:51:13)\n    at async Context.<anonymous> (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/tests/unit/services/translation/azure-translator.test.js:69:17)\nAzure translation error: Access denied due to invalid subscription key\nAzure Translator translation failed: Error: Azure Translator error: Access denied due to invalid subscription key\n    at AzureTranslator.translateText (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/src/services/translation/azure-translator.js:223:19)\n    at async AzureTranslator.translate (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/src/services/translation/azure-translator.js:129:20)\n    at async Context.<anonymous> (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/tests/unit/services/translation/azure-translator.test.js:177:17)\nLanguage detection failed: TypeError: Cannot read properties of undefined (reading 'data')\n    at AzureTranslator.detectLanguage (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/src/services/translation/azure-translator.js:253:40)\n    at async Context.<anonymous> (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/tests/unit/services/translation/azure-translator.test.js:279:17)\nGPT-4o initialization failed: Error: GPT-4o connection test failed: Connection test response was unexpected\n    at GPT4oTranslator.testConnection (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/src/services/translation/gpt4o-translator.js:95:19)\n    at async GPT4oTranslator.initialize (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/src/services/translation/gpt4o-translator.js:57:13)\n    at async Context.<anonymous> (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/tests/unit/services/translation/gpt4o-translator.test.js:40:28)\nGPT-4o initialization failed: Error: GPT-4o connection test failed: Connection test response was unexpected\n    at GPT4oTranslator.testConnection (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/src/services/translation/gpt4o-translator.js:95:19)\n    at async GPT4oTranslator.initialize (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/src/services/translation/gpt4o-translator.js:57:13)\n    at async Context.<anonymous> (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/tests/unit/services/translation/gpt4o-translator.test.js:51:17)\nGPT-4o translation failed: TypeError: Cannot read properties of undefined (reading 'tone')\n    at GPT4oTranslator.buildTranslationContext (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/src/services/translation/gpt4o-translator.js:272:56)\n    at GPT4oTranslator.translate (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/src/services/translation/gpt4o-translator.js:162:55)\n    at Context.<anonymous> (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/tests/unit/services/translation/gpt4o-translator.test.js:100:45)\n    at callFn (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/mocha/lib/runnable.js:364:21)\n    at Runnable.run (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/mocha/lib/runnable.js:352:5)\n    at Runner.runTest (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/mocha/lib/runner.js:677:10)\n    at /Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/mocha/lib/runner.js:800:12\n    at next (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/mocha/lib/runner.js:592:14)\n    at /Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/mocha/lib/runner.js:602:7\n    at next (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/mocha/lib/runner.js:485:14)\n    at cbHookRun (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/mocha/lib/runner.js:550:7)\n    at done (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/mocha/lib/runnable.js:308:5)\n    at /Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/mocha/lib/runnable.js:369:11\nGPT-4o translation failed: TypeError: Cannot read properties of undefined (reading 'tone')\n    at GPT4oTranslator.buildTranslationContext (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/src/services/translation/gpt4o-translator.js:272:56)\n    at GPT4oTranslator.translate (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/src/services/translation/gpt4o-translator.js:162:55)\n    at Context.<anonymous> (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/tests/unit/services/translation/gpt4o-translator.test.js:116:34)\n    at callFn (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/mocha/lib/runnable.js:364:21)\n    at Runnable.run (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/mocha/lib/runnable.js:352:5)\n    at Runner.runTest (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/mocha/lib/runner.js:677:10)\n    at /Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/mocha/lib/runner.js:800:12\n    at next (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/mocha/lib/runner.js:592:14)\n    at /Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/mocha/lib/runner.js:602:7\n    at next (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/mocha/lib/runner.js:485:14)\n    at cbHookRun (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/mocha/lib/runner.js:550:7)\n    at done (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/mocha/lib/runnable.js:308:5)\n    at /Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/mocha/lib/runnable.js:369:11\nGPT-4o translation failed: TypeError: Cannot read properties of undefined (reading 'tone')\n    at GPT4oTranslator.buildTranslationContext (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/src/services/translation/gpt4o-translator.js:272:56)\n    at GPT4oTranslator.translate (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/src/services/translation/gpt4o-translator.js:162:55)\n    at Context.<anonymous> (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/tests/unit/services/translation/gpt4o-translator.test.js:142:34)\n    at callFn (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/mocha/lib/runnable.js:364:21)\n    at Runnable.run (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/mocha/lib/runnable.js:352:5)\n    at Runner.runTest (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/mocha/lib/runner.js:677:10)\n    at /Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/mocha/lib/runner.js:800:12\n    at next (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/mocha/lib/runner.js:592:14)\n    at /Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/mocha/lib/runner.js:602:7\n    at next (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/mocha/lib/runner.js:485:14)\n    at cbHookRun (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/mocha/lib/runner.js:550:7)\n    at done (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/mocha/lib/runnable.js:308:5)\n    at /Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/mocha/lib/runnable.js:369:11\nGPT-4o translation failed: TypeError: Cannot read properties of undefined (reading 'tone')\n    at GPT4oTranslator.buildTranslationContext (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/src/services/translation/gpt4o-translator.js:272:56)\n    at GPT4oTranslator.translate (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/src/services/translation/gpt4o-translator.js:162:55)\n    at Context.<anonymous> (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/tests/unit/services/translation/gpt4o-translator.test.js:173:30)\n    at callFn (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/mocha/lib/runnable.js:364:21)\n    at Runnable.run (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/mocha/lib/runnable.js:352:5)\n    at Runner.runTest (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/mocha/lib/runner.js:677:10)\n    at /Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/mocha/lib/runner.js:800:12\n    at next (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/mocha/lib/runner.js:592:14)\n    at /Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/mocha/lib/runner.js:602:7\n    at next (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/mocha/lib/runner.js:485:14)\n    at cbHookRun (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/mocha/lib/runner.js:550:7)\n    at done (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/mocha/lib/runnable.js:308:5)\n    at /Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/mocha/lib/runnable.js:369:11\ndeepl translation failed: Error: API rate limit exceeded\n    at Context.<anonymous> (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/tests/unit/services/translation/translation-manager.test.js:202:26)\n    at callFn (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/mocha/lib/runnable.js:364:21)\n    at Runnable.run (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/mocha/lib/runnable.js:352:5)\n    at Runner.runTest (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/mocha/lib/runner.js:677:10)\n    at /Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/mocha/lib/runner.js:800:12\n    at next (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/mocha/lib/runner.js:592:14)\n    at /Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/mocha/lib/runner.js:602:7\n    at next (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/mocha/lib/runner.js:485:14)\n    at cbHookRun (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/mocha/lib/runner.js:550:7)\n    at done (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/mocha/lib/runnable.js:308:5)\n    at callFn (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/mocha/lib/runnable.js:387:7)\n    at Runnable.run (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/mocha/lib/runnable.js:352:5)\n    at next (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/mocha/lib/runner.js:509:10)\n    at Immediate.<anonymous> (/Volumes/Project Disk/Multi-Platform-Translation-APP/translation-app/node_modules/mocha/lib/runner.js:570:5)\n    at process.processImmediate (node:internal/timers:491:21)\nConversation conversation1 not found\nConversation null not found\nConversation conversation1 not found\nConversation conversation1 not found\nConversation conversation1 not found\nConversation conversation1 not found\nConversation conversation1 not found\nConversation conversation1 not found\nConversation conversation1 not found\nConversation conversation1 not found\nConversation conversation1 not found\nConversation conversation1 not found\nConversation conversation1 not found\nConversation conversation1 not found\nConversation conversation1 not found\nConversation conversation1 not found\nConversation conversation1 not found\nConversation conversation1 not found\nConversation conversation2 not found\nConversation conversation1 not found\nConversation conversation2 not found\nConversation conversation1 not found\nConversation conversation1 not found\nConversation conversation1 not found\n",
      "success": false,
      "error": "Test suite failed with exit code 1"
    }
  },
  "errors": [
    "Test suite failed with exit code null",
    "Test suite failed with exit code null",
    "Test suite failed with exit code null",
    "Test suite failed with exit code null",
    "Test suite failed with exit code null",
    "Test suite failed with exit code null",
    "Test suite failed with exit code 1",
    "Test suite failed with exit code 1"
  ],
  "timestamp": "2025-07-04T23:12:47.483Z"
}